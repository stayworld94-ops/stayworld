<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Results - StayWorld</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- HEADER (ê³µí†µ) -->
  <header class="site-header">
    <div class="container header-row">
      <a href="index.html" class="brand">
        <img src="/stayworld-logo.png" alt="StayWorld" class="brand-logo" />
        <span class="brand-text">STAYWORLD</span>
      </a>
      <nav class="main-nav">
        <a href="index.html" data-i18n="nav_home">Home</a>
        <a href="membership.html" data-i18n="nav_membership">Membership</a>
        <a href="login.html" id="navAuthLink" data-i18n="nav_login">Login</a>
      </nav>
      <div class="header-cta">
        <label for="lang" data-i18n="language">Language</label>
        <select id="lang" class="lang-select"></select>
        <a href="signup.html" class="btn btn-gold" data-i18n="nav_signup">Sign Up</a>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="container" style="padding:40px 16px;">
    <h1 data-i18n="results_title">Search Results</h1>
    <p data-i18n="results_desc">Browse available properties.</p>
    <!-- ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ -->
  </main>

  <footer class="site-footer">Â© StayWorld</footer>
  <script src="i18n.js"></script>
  <script src="/assets/login-modal.js"></script>
  <!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>StayWorld â€” ê²°ê³¼</title>
  <style>
    .card{border:1px solid #e5e7eb;border-radius:12px;padding:16px;margin:12px 0;display:flex;justify-content:space-between;align-items:center}
    .meta{opacity:.8;font-size:14px}
    .actions button{padding:10px 14px;border-radius:10px;border:1px solid #111;cursor:pointer}
  </style>
</head>
<body>
  <header>
    <span data-auth-state>ë¡œê·¸ì¸ í•„ìš”</span>
    <button id="google-login">Googleë¡œ ë¡œê·¸ì¸</button>
  </header>

  <main>
    <!-- ì˜ˆì‹œ ì¹´ë“œ 1 -->
    <div class="card" 
         data-listing-id="LST_1001"
         data-title="ë³´ìŠ¤í¬ë£¨ìŠ¤ ë·° ëŸ­ì…”ë¦¬ ìŠ¤ìœ„íŠ¸"
         data-price="120000"
         data-currency="TRY">
      <div>
        <div class="title">ë³´ìŠ¤í¬ë£¨ìŠ¤ ë·° ëŸ­ì…”ë¦¬ ìŠ¤ìœ„íŠ¸</div>
        <div class="meta">ìµœëŒ€ 3ì¸ Â· 1ì¹¨ì‹¤ Â· ì²´í¬ì¸ 2025-09-01 / ì²´í¬ì•„ì›ƒ 2025-09-03</div>
      </div>
      <div class="actions">
        <button class="book-btn">ì˜ˆì•½í•˜ê¸°</button>
      </div>
    </div>

    <!-- ì˜ˆì‹œ ì¹´ë“œ 2 -->
    <div class="card" 
         data-listing-id="LST_2002"
         data-title="íƒì‹¬ ì„¼í„° í”„ë¦¬ë¯¸ì—„ ì•„íŒŒíŠ¸"
         data-price="90000"
         data-currency="TRY">
      <div>
        <div class="title">íƒì‹¬ ì„¼í„° í”„ë¦¬ë¯¸ì—„ ì•„íŒŒíŠ¸</div>
        <div class="meta">ìµœëŒ€ 2ì¸ Â· ìŠ¤íŠœë””ì˜¤ Â· ì²´í¬ì¸ 2025-09-05 / ì²´í¬ì•„ì›ƒ 2025-09-07</div>
      </div>
      <div class="actions">
        <button class="book-btn">ì˜ˆì•½í•˜ê¸°</button>
      </div>
    </div>
  </main>

  <!-- Firebase & ì˜ˆì•½ ìŠ¤í¬ë¦½íŠ¸ -->
  <script type="module" src="/js/app.js"></script>
  <script type="module">
    import { auth, googleLogin } from "/js/app.js";
    import { bookNow } from "/js/bookings.js";

    // ë¡œê·¸ì¸ ë²„íŠ¼
    document.getElementById("google-login")?.addEventListener("click", async () => {
      await googleLogin();
      alert("ë¡œê·¸ì¸ ì„±ê³µ");
    });

    // "ì˜ˆì•½í•˜ê¸°" ë²„íŠ¼ ì´ë²¤íŠ¸
    document.querySelectorAll(".book-btn").forEach(btn => {
      btn.addEventListener("click", async (e) => {
        const card = e.target.closest(".card");
        const listingId = card.dataset.listingId;
        const listingTitle = card.dataset.title;
        const priceTotal = Number(card.dataset.price);
        const currency = card.dataset.currency || "TRY";

        // ë°ëª¨ìš© ê³ ì • ë‚ ì§œ/ì¸ì› (ì‹¤ì„œë¹„ìŠ¤ëŠ” ë‹¬ë ¥ ì…ë ¥ê°’ ì°¸ì¡°)
        const checkIn = "2025-09-01";
        const checkOut = "2025-09-03";
        const guests = 2;

        const id = await bookNow({ listingId, listingTitle, checkIn, checkOut, guests, priceTotal, currency });
        if (id) console.log("ì˜ˆì•½ ìƒì„±:", id);
      });
    });
  </script>
  <script type="module" src="/js/bookings.js"></script>
</body>
</html>
<script>
/**
 * ë¡œê·¸ì¸ ì‹œ localStorage.sw_user ë¥¼ ê¸°ì¤€ìœ¼ë¡œ
 * - ê²ŒìŠ¤íŠ¸ìš© ë²„íŠ¼/ë§í¬(Login, Sign up, data-auth="guest") ìˆ¨ê¹€
 * - ìœ ì €ìš© UI(My Page, Logout, data-auth="user") í‘œì‹œ
 * - Logout í´ë¦­ ë™ì‘ ì—°ê²°
 */
(function () {
  const user = JSON.parse(localStorage.getItem('sw_user') || 'null');

  const show = (sel) => document.querySelectorAll(sel).forEach(el => el.style.display = '');
  const hide = (sel) => document.querySelectorAll(sel).forEach(el => el.style.display = 'none');

  if (user) {
    // ë¡œê·¸ì¸ ìƒíƒœ: ê²ŒìŠ¤íŠ¸ìš© ìˆ¨ê¸°ê³  ìœ ì €ìš© ë³´ì—¬ì£¼ê¸°
    hide('a[href="/login.html"], a[href="/signup.html"], [data-auth="guest"]');
    show('[data-auth="user"]');

    // í™˜ì˜ ë¬¸êµ¬ ê°±ì‹ (ìˆì„ ë•Œë§Œ)
    const welcomeEl = document.getElementById('welcomeUser');
    if (welcomeEl) welcomeEl.textContent = `Welcome, ${user.name} ğŸ‰`;
  } else {
    // ë¹„ë¡œê·¸ì¸: ê²ŒìŠ¤íŠ¸ìš© ë³´ì´ê³  ìœ ì €ìš© ìˆ¨ê¸°ê¸°
    show('a[href="/login.html"], a[href="/signup.html"], [data-auth="guest"]');
    hide('[data-auth="user"]');
  }

  // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ë™ì‘(ì—¬ëŸ¬ ì•„ì´ë””/ì†ì„± ì§€ì›)
  document.querySelectorAll('#logoutBtn, [data-logout]').forEach(btn => {
    btn.addEventListener('click', (e) => {
      e.preventDefault();
      localStorage.removeItem('sw_user');
      location.href = '/index.html';
    });
  });
})();
</script>

</body>
</html>

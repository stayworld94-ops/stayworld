<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Login - StayWorld</title>

  <!-- ‚úÖ ÌÜµÌï© Ïä§ÌÉÄÏùº: ÌîÑÎ°úÏ†ùÌä∏ Íµ¨Ï°∞Ïóê ÎßûÏ∂∞ /styles/style.css -->
  <link rel="stylesheet" href="/styles/style.css?v=1" />

  <!-- ÌéòÏù¥ÏßÄ Î†àÏù¥ÏïÑÏõÉ Î≥¥Ï†ï + Google Î≤ÑÌäº Í∞ÄÏãúÏÑ± -->
  <style>
    .auth-wrap{
      min-height:calc(100vh - 72px - 80px);
      display:flex;align-items:center;justify-content:center;
      padding:40px 16px;
    }
    .auth-card{
      width:100%;max-width:480px;
      background:#0f1420;border:1px solid rgba(255,255,255,.08);
      border-radius:16px;padding:24px;
      box-shadow:0 8px 30px rgba(0,0,0,.25);
    }
    .auth-card h1{margin:6px 0 18px}
    .auth-card label{display:block;margin:12px 0 6px;opacity:.9}
    .auth-actions{margin-top:16px;display:flex;flex-direction:column;gap:10px}

    /* ‚úÖ Google Î≤ÑÌäº(Ìï≠ÏÉÅ Î∞ùÍ≤å) */
    #btnGoogle{
      display:flex;align-items:center;justify-content:center;gap:10px;
      width:100%;background:#ffffff;color:#111;
      border:1px solid rgba(0,0,0,.15);border-radius:12px;
      padding:12px 14px;font-weight:700;cursor:pointer;
    }
    #btnGoogle:hover{filter:brightness(0.97)}
    .or{display:flex;align-items:center;gap:10px;margin:18px 0;opacity:.7}
    .or::before,.or::after{content:"";flex:1;height:1px;background:rgba(255,255,255,.12)}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-row">
      <a href="/" class="brand">
        <img src="/stayworld-logo.png" alt="StayWorld" class="brand-logo" />
        <span class="brand-text">STAYWORLD</span>
      </a>

      <nav class="main-nav" aria-label="Primary">
        <a href="index.html" data-i18n="nav_home">Home</a>
        <a href="membership.html" data-i18n="nav_membership">Membership</a>
        <a href="login.html" id="navAuthLink" data-i18n="nav_login">Login</a>
      </nav>

      <div class="header-cta">
        <label for="lang" class="lang-label" data-i18n="language">Language</label>
        <select id="lang" class="lang-select">
          <option value="EN" selected>EN</option>
          <option value="KO">KO</option>
          <option value="JA">JA</option>
          <option value="ZH">ZH</option>
          <option value="FR">FR</option>
          <option value="ES">ES</option>
          <option value="DE">DE</option>
          <option value="TR">TR</option>
          <option value="AR">AR</option>
          <option value="RU">RU</option>
        </select>
        <a href="signup.html" class="btn btn-gold" data-i18n="nav_signup">Sign Up</a>
      </div>
    </div>
  </header>

  <!-- MAIN -->
  <main class="auth-wrap">
    <div class="auth-card">
      <h1 data-i18n="nav_login">Login</h1>

      <form id="loginForm" novalidate>
        <label for="loginEmail" data-i18n="email">Email</label>
        <input type="email" id="loginEmail" required class="input" placeholder="you@example.com" />

        <label for="loginPassword" data-i18n="password">Password</label>
        <input type="password" id="loginPassword" required class="input" placeholder="********" />

        <div class="auth-actions">
          <button type="submit" class="btn btn-gold" data-i18n="nav_login">Login</button>
        </div>
      </form>

      <div class="or" aria-hidden="true">OR</div>

      <!-- ‚úÖ Íµ¨Í∏Ä Î°úÍ∑∏Ïù∏ Î≤ÑÌäº -->
      <button id="btnGoogle" class="btn google-btn" type="button" data-i18n="signin_google">
        Sign in with Google
      </button>

      <p style="margin-top:18px;">
        <span data-i18n="have_account_q">Don‚Äôt have an account?</span>
        <a href="signup.html" data-i18n="nav_signup">Sign Up</a>
      </p>
    </div>
  </main>

  <!-- i18n (ÏûàÏúºÎ©¥ Ïú†ÏßÄ) -->
  <script src="i18n.js"></script>

  <!-- Î°úÍ∑∏Ïù∏/Î°úÍ∑∏ÏïÑÏõÉ ÎßÅÌÅ¨ ÌÜ†Í∏Ä (Îç∞Î™®) -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const link = document.getElementById('navAuthLink');
      function toLoginUI(){
        link.setAttribute('data-i18n','nav_login');
        link.textContent='Login';
        link.href='login.html';
        link.onclick=null;
        window.applyI18NPage?.();
      }
      function toLogoutUI(){
        link.setAttribute('data-i18n','nav_logout');
        link.textContent='Logout';
        link.href='#';
        link.onclick=(e)=>{
          e.preventDefault();
          localStorage.removeItem('sw_logged_in');
          alert('Î°úÍ∑∏ÏïÑÏõÉ ÎêòÏóàÏäµÎãàÎã§.');
          toLoginUI();
          location.reload();
        };
        window.applyI18NPage?.();
      }
      if(localStorage.getItem('sw_logged_in')==='true') toLogoutUI(); else toLoginUI();
    });
  </script>

  <!-- ‚úÖ Firebase (Ïù∏ÎùºÏù∏ Î™®Îìà): Ïù¥Î©îÏùº Î°úÍ∑∏Ïù∏ + Google Î°úÍ∑∏Ïù∏ -->
  <script type="module">
    // üîß Firebase ÏΩòÏÜî > ÌîÑÎ°úÏ†ùÌä∏ ÏÑ§Ï†ï > ÏùºÎ∞ò > SDK ÏÑ§Ï†ïÏóêÏÑú Î≥µÏÇ¨Ìïú "Ïõπ Ïï±" Íµ¨ÏÑ±ÏúºÎ°ú ÍµêÏ≤¥
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      appId: "YOUR_APP_ID",
    };

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
      getAuth, signInWithEmailAndPassword,
      GoogleAuthProvider, signInWithPopup
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // Ïù¥Î©îÏùº Î°úÍ∑∏Ïù∏
    document.getElementById('loginForm').addEventListener('submit', async (e)=>{
      e.preventDefault();
      const email = document.getElementById('loginEmail').value.trim();
      const pw = document.getElementById('loginPassword').value.trim();
      try{
        await signInWithEmailAndPassword(auth, email, pw);
        localStorage.setItem('sw_logged_in','true');
        alert('Î°úÍ∑∏Ïù∏ ÏôÑÎ£å!');
        location.href = '/';
      }catch(err){
        alert('Î°úÍ∑∏Ïù∏ Ïò§Î•ò: ' + err.message);
      }
    });

    // Google Î°úÍ∑∏Ïù∏
    document.getElementById('btnGoogle').addEventListener('click', async ()=>{
      try{
        await signInWithPopup(auth, provider);
        localStorage.setItem('sw_logged_in','true');
        alert('Google Î°úÍ∑∏Ïù∏ ÏôÑÎ£å!');
        location.href = '/';
      }catch(err){
        alert('Google Î°úÍ∑∏Ïù∏ Ïò§Î•ò: ' + err.message);
      }
    });
  </script>

  <!-- ‚ö†Ô∏è Ïù¥ ÌéòÏù¥ÏßÄÏóêÏÑúÎäî /assets/login-modal.js Î∂àÌïÑÏöî/Ï∂©Îèå Í∞ÄÎä• ‚Üí Ï†úÍ±∞ -->
</body>
</html>

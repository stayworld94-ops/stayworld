  function applyTranslations(lang) {
    const translations = window.translations || {};
    const selected = translations[lang];
    if (!selected) return;
    elements.forEach(el => {
      const key = el.getAttribute("data-lang");
      if (selected[key]) el.textContent = selected[key];
    });
  }

  langSelect?.addEventListener("change", () => {
    applyTranslations(langSelect.value);
  });

  applyTranslations(langSelect?.value || "en");

  document.getElementById("searchBtn")?.addEventListener("click", () => {
    const input = document.getElementById("searchInput").value.toLowerCase();
    if (input) {
      window.location.href = `results.html?query=${encodeURIComponent(input)}`;
    } else {
      alert("â— ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”");
    }
  });

  document.getElementById("chatBtn")?.addEventListener("click", () => {
    alert("ğŸ’¬ AI ì±—ë´‡ì´ ê³§ ì—°ê²°ë©ë‹ˆë‹¤ (ì˜ˆì‹œ)");
  });

  document.querySelector('#login .btn-primary')?.addEventListener("click", () => {
    alert("ğŸ” ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤ (ì˜ˆì‹œ)");
  });

  document.querySelector('#login .btn-secondary')?.addEventListener("click", () => {
    alert("ğŸ“ íšŒì›ê°€ì… í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤ (ì˜ˆì‹œ)");
  });

  document.getElementById("reserveBtn")?.addEventListener("click", () => {
    alert("ğŸ“… ì˜ˆì•½ì´ ì‹œì‘ë©ë‹ˆë‹¤ (ì˜ˆì‹œ)");
  });

  const searchInput = document.getElementById("searchInput");
  const datalist = document.createElement("datalist");
  datalist.id = "city-suggestions";

  const suggestions = [
    "Istanbul", "Paris", "Tokyo", "New York", "Barcelona",
    "Seoul", "Bangkok", "Dubai", "London", "Berlin",
    "Rome", "Moscow", "Shanghai", "Los Angeles", "Cape Town"
  ];
  suggestions.forEach(city => {
    const option = document.createElement("option");
    option.value = city;
    datalist.appendChild(option);
  });
  document.body.appendChild(datalist);
  searchInput.setAttribute("list", "city-suggestions");

  const recommendBox = document.getElementById("recommended-destinations");
  if (recommendBox) {
    recommendBox.innerHTML = suggestions.map(city => `<button class="recommend-city">${city}</button>`).join(" ");
    document.querySelectorAll(".recommend-city").forEach(btn => {
      btn.addEventListener("click", () => {
        window.location.href = `results.html?query=${encodeURIComponent(btn.textContent)}`;
      });
    });
  }

  const hotels = ["Seoul Grand Hotel", "Tokyo Bay Resort", "Paris Luxe Suite"];
  const hotelBox = document.getElementById("recommended-hotels");
  if (hotelBox) {
    hotelBox.innerHTML = hotels.map(name => `<div class="recommend-hotel">ğŸ¨ ${name}</div>`).join("");
  }

  const levelBox = document.getElementById("level-status");
  if (levelBox) {
    const currentPoints = 1800000;
    const nextLevel = 2000000;
    const daysSinceLast = 45;

    const progress = Math.min(100, Math.floor((currentPoints / nextLevel) * 100));
    const downgrade = daysSinceLast >= 60 ? "âš ï¸ ë ˆë²¨ ê°•ë“± ì˜ˆì •!" : "ìœ ì§€ ì¤‘";

    levelBox.innerHTML = `
      <div>ğŸ–ï¸ í˜„ì¬ í¬ì¸íŠ¸: ${currentPoints.toLocaleString()} / ${nextLevel.toLocaleString()}</div>
      <div>ğŸ“ˆ ë ˆë²¨ì—…ê¹Œì§€ ${nextLevel - currentPoints}í¬ì¸íŠ¸ ë‚¨ìŒ</div>
      <div>â³ ìµœê·¼ í™œë™ í›„ ê²½ê³¼ì¼: ${daysSinceLast}ì¼ (${downgrade})</div>
      <div style="width:100%;background:#eee;height:10px;border-radius:5px;margin-top:5px;">
        <div style="width:${progress}%;height:10px;background:#4caf50;border-radius:5px;"></div>
      </div>
    `;
  }

  fetch('https://api.openweathermap.org/data/2.5/weather?q=Istanbul&appid=2ad4370f87ea28fc1d3e514b5a6f1603&units=metric')
    .then(response => response.json())
    .then(data => {
      const weatherBox = document.getElementById("weather");
      if (weatherBox) {
        const temp = data.main.temp;
        const icon = data.weather[0].icon;
        weatherBox.innerHTML = `<img src="https://openweathermap.org/img/wn/${icon}@2x.png" alt="weather" /> ${temp}Â°C`;
      }
    });
});

function initMap() {
  const location = { lat: 41.0082, lng: 28.9784 };
  const map = new google.maps.Map(document.getElementById("googleMap"), {
    zoom: 10,
    center: location,
  });
  new google.maps.Marker({ position: location, map: map });
}

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STAYWORLD ‚Äî Luxury Global Reach</title>

  <!-- Leaflet (ÏßÄÎèÑ) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>

  <!-- ÌÜµÌï© CSS (Ìó§Îçî/ÌûàÏñ¥Î°ú/Í≤ÄÏÉâ/Ïπ¥Îìú/ÏßÄÎèÑ/ÌïÑÌÑ∞ÎìúÎ°úÏñ¥/Ï±óÎ¥á/Î∞òÏùëÌòï) -->
  <style>
    :root{--bg:#0b0f16;--panel:#101018;--text:#e7e9ee;--muted:#cfd6e6;--line:rgba(255,255,255,.08);--chip:#121a26;--gold1:#f4d78c;--gold2:#c9a35b}
    *{box-sizing:border-box}html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif;line-height:1.5}
    a{color:inherit;text-decoration:none}.container{max-width:1120px;margin:0 auto;padding:0 16px}
    img{max-width:100%;display:block}

    /* Header */
    .site-header{position:sticky;top:0;z-index:1000;background:rgba(11,15,22,.85);backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
    .header-row{display:flex;align-items:center;justify-content:space-between;gap:20px;height:72px}
    .brand{display:flex;align-items:center;gap:10px}.brand-logo{width:36px;height:36px;border-radius:8px;box-shadow:0 4px 18px rgba(0,0,0,.3)}
    .brand-text{font-weight:800;letter-spacing:.6px}
    .main-nav{display:flex;gap:28px;justify-content:center;flex:1}
    .header-cta{display:flex;align-items:center;gap:12px}
    .lang-label{font-size:12px;opacity:.7}
    .lang-select{appearance:none;background:#101826;border:1px solid var(--line);color:var(--text);border-radius:12px;padding:8px 32px 8px 10px}
    .btn{border:0;padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn-ghost{background:transparent;color:#cfcfcf}.btn-ghost:hover{background:rgba(255,255,255,.06)}
    .btn-gold{background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#170f04;font-weight:700;border-radius:14px;padding:12px 18px;box-shadow:0 8px 26px rgba(201,163,91,.35)}
    .btn-chip{background:var(--chip);color:#dfe3ea;border:1px solid var(--line);border-radius:14px;padding:10px 14px}

    /* Hero */
    .hero{padding:48px 0 24px;background:radial-gradient(1200px 500px at 20% -10%,rgba(244,215,140,.12),transparent),radial-gradient(1200px 600px at 100% 0,rgba(78,94,130,.18),transparent)}
    .hero-title{font-size:48px;letter-spacing:.2px;margin:10px 0 8px}.accent{color:#f1cf84}
    .hero-sub{opacity:.85;margin:8px 0 28px}
    .search-bar{display:grid;grid-template-columns:1.2fr .7fr .7fr auto auto;gap:10px;align-items:center}
    .input{background:#0f1621;border:1px solid var(--line);color:var(--text);padding:12px 14px;border-radius:12px}
    .input::placeholder{color:#a7b0bf}
    .search-status{margin-top:8px;color:#cfd6e6;opacity:0;transition:opacity .3s}
    .btn.loading{opacity:.65;pointer-events:none}

    /* Ïπ¥Îìú */
    .features{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:28px}
    .card{background:#0f1420;border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 8px 30px rgba(0,0,0,.25)}
    .card h3{margin:0 0 6px}.card p{margin:0;opacity:.85}

    /* Map */
    .map-section{padding:36px 0 60px}
    #map{height:420px;border-radius:16px;border:1px solid var(--line);box-shadow:0 8px 30px rgba(0,0,0,.25);overflow:hidden}
    /* ÏßÄÎèÑ Î†àÏù¥Ïñ¥Í∞Ä Î≤ÑÌäº Í∞ÄÎ¶¨Îäî Í≤É Î∞©ÏßÄ */
    .leaflet-container,.leaflet-pane,.leaflet-top,.leaflet-bottom{z-index:10 !important}

    /* ÌïÑÌÑ∞ ÎìúÎ°úÏñ¥(Ïö∞Ï∏° Ïä¨ÎùºÏù¥Îìú) */
    #filterDrawer{position:fixed;inset:0;display:none;z-index:2147483637;align-items:stretch;justify-content:flex-end}
    #filterDrawer[aria-hidden="false"]{display:flex}
    #filterDrawer .back{position:absolute;inset:0;background:rgba(0,0,0,.45)}
    #filterDrawer .panel{position:relative;margin-left:auto;width:min(780px,92vw);max-height:92vh;overflow:auto;background:var(--panel);border-left:1px solid var(--line);border-top-left-radius:16px;border-bottom-left-radius:16px;display:flex;flex-direction:column}
    #filterDrawer .head,#filterDrawer .foot{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--line)}
    #filterDrawer .foot{border-bottom:0;border-top:1px solid var(--line)}
    #filterGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px;padding:14px}
    #filterDrawer .box{background:#0f1420;border:1px solid var(--line);border-radius:12px;padding:12px}
    #filterDrawer h4{margin:0 0 8px;font-size:14px}
    .sw-badge{position:absolute;top:-8px;right:-8px;background:#ffd36e;color:#1a1205;border-radius:999px;font-size:11px;padding:2px 6px}

    /* Ï±óÎ¥á (FAB + Ìå®ÎÑê) */
    #chatFab{position:fixed;right:20px;bottom:20px;width:56px;height:56px;border-radius:50%;border:0;cursor:pointer;z-index:2147483639;background:linear-gradient(180deg,var(--gold1),var(--gold2));box-shadow:0 14px 30px rgba(201,163,91,.35);font-size:22px}
    #botPanel{position:fixed;right:20px;bottom:86px;width:min(360px,88vw);height:480px;background:#101018;border:1px solid #23232b;border-radius:16px;z-index:2147483638;display:none;box-shadow:0 20px 60px rgba(0,0,0,.5);color:var(--text)}
    #botPanel .hdr{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--line)}
    #botPanel .body{height:360px;overflow:auto;padding:10px;display:flex;flex-direction:column;gap:8px}
    #botPanel .row{display:flex;gap:8px;padding:10px;border-top:1px solid var(--line)}
    #botInput{flex:1;background:#0f1621;border:1px solid var(--line);color:var(--text);border-radius:12px;padding:10px 12px}
    #botSend{border:0;border-radius:12px;padding:10px 14px;background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#1a1205;font-weight:700}
    .msg{max-width:80%;padding:10px 12px;border-radius:12px}.me{align-self:flex-end;background:#132132}.ai{align-self:flex-start;background:#121820}

    /* Footer */
    .site-footer{padding:28px 0;border-top:1px solid var(--line);opacity:.8}

    /* Responsive */
    @media (max-width:920px){.main-nav{display:none}.hero-title{font-size:40px}.search-bar{grid-template-columns:1fr 1fr 1fr auto}}
    @media (max-width:640px){.hero-title{font-size:34px}.features{grid-template-columns:1fr}}
  </style>
</head>

<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-row">
      <a href="/" class="brand">
        <img src="stayworld-logo.png" alt="StayWorld" class="brand-logo" />
        <span class="brand-text">STAYWORLD</span>
      </a>

      <nav class="main-nav" aria-label="Primary">
        <a href="index.html" data-i18n="nav_home">Home</a>
        <a href="membership.html" data-i18n="nav_membership">Membership</a>
        <a href="login.html" data-i18n="nav_login">Login</a>
      </nav>

      <div class="header-cta">
        <label for="lang" class="lang-label" data-i18n="language">Language</label>
        <select id="lang" class="lang-select">
          <option value="EN" selected>EN</option><option>KO</option><option>JA</option><option>ZH</option><option>FR</option>
          <option>ES</option><option>DE</option><option>TR</option><option>AR</option><option>RU</option>
        </select>
        <a href="signup.html" class="btn btn-gold" data-i18n="nav_signup">Sign Up</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="container">
      <h1 class="hero-title"><span data-i18n="hero_luxury">Luxury stays.</span><br><span class="accent" data-i18n="hero_reach">Global reach.</span></h1>
      <p class="hero-sub" data-i18n="hero_sub">Cards, bank transfer & crypto (BTC ¬∑ ETH ¬∑ USDT).</p>

      <div class="search-bar">
        <input class="input" id="searchDestination" type="text" placeholder="Paris, Tokyo, Istanbul‚Ä¶" data-i18n-placeholder="placeholder_city">
        <input class="input" id="checkIn" type="date">
        <input class="input" id="checkOut" type="date">
        <button class="btn btn-chip" id="btnFilters" type="button" data-i18n="filters">Filters</button>
        <button class="btn btn-gold" id="btnSearch" type="button" data-i18n="search">Search</button>
      </div>
      <div id="searchStatus" class="search-status"></div>

      <div class="features">
        <div class="card><h3 data-i18n="feat_verified">Verified stays</h3><p data-i18n="feat_verified_sub">Top picks near you.</p></div>
        <div class="card><h3 data-i18n="feat_rewards">StayWorld+ Rewards</h3><p data-i18n="feat_rewards_sub">Earn points on every booking.</p></div>
        <div class="card><h3 data-i18n="feat_payments">Secure payments</h3><p data-i18n="feat_payments_sub">Visa, Mastercard, Amex & Crypto.</p></div>
      </div>
    </div>
  </section>

  <!-- MAP -->
  <section class="map-section">
    <div class="container"><div id="map" aria-label="Map" role="region"></div></div>
  </section>

  <!-- ====== SW FIX PATCH: ÌïÑÌÑ∞/Í∞ÄÍ≤©ÌÜµÌôî/ÎÇ¥Î∂Ä Î≤àÏó≠/Ïò§Î≤ÑÎ†àÏù¥ Í∞ÄÎìú/Í≤ÄÏÉâ/ÏßÄÎèÑ/Ï±óÎ¥á ====== -->
  <script>
  /* ------------------ I18N (UI + ÌïÑÌÑ∞) ------------------ */
  const I18N={
    EN:{nav_home:"Home",nav_membership:"Membership",nav_login:"Login",nav_signup:"Sign Up",language:"Language",
      hero_luxury:"Luxury stays.",hero_reach:"Global reach.",hero_sub:"Cards, bank transfer & crypto (BTC ¬∑ ETH ¬∑ USDT).",
      placeholder_city:"Paris, Tokyo, Istanbul‚Ä¶",filters:"Filters",search:"Search",
      feat_verified:"Verified stays",feat_verified_sub:"Top picks near you.",
      feat_rewards:"StayWorld+ Rewards",feat_rewards_sub:"Earn points on every booking.",
      feat_payments:"Secure payments",feat_payments_sub:"Visa, Mastercard, Amex & Crypto.",
      f_title:"Filters", f_reset:"Reset", f_apply:"Apply", f_currency:"Currency", f_price:"Price per night",
      f_staytype:"Stay type", f_review:"Review score", f_beds:"Beds & Baths", f_pets:"Pets", f_checkin:"Check-in",
      f_amen:"Amenities", f_booking:"Booking", f_verify:"Verification", f_long:"Long-stay", f_biz:"Business",
      f_loc:"Location", f_access:"Accessibility", f_ex:"Experiences", f_view:"View", f_safe:"Safety",
      f_family:"Family", f_ent:"Entertainment", f_out:"Outdoor", f_park:"Parking",
      w:{ // Ìï≠Î™© Î≤àÏó≠(ÎåÄÌëúÎßå)
        "Wi-Fi":"Wi-Fi","Pool":"Pool","Spa":"Spa","Gym":"Gym","Kitchen":"Kitchen","Balcony":"Balcony","Hot tub":"Hot tub","Sauna":"Sauna","Air conditioning":"Air conditioning","Breakfast":"Breakfast",
        "Hotel":"Hotel","Motel":"Motel","Hostel":"Hostel","Apartment":"Apartment","Villa":"Villa","Ryokan":"Ryokan","Guesthouse":"Guesthouse","B&B":"B&B",
        "Sea view":"Sea view","City view":"City view","Mountain view":"Mountain view","Garden":"Garden",
        "Crypto":"Crypto","Cards":"Cards","Bank transfer":"Bank transfer","Free cancellation":"Free cancellation","Late checkout":"Late checkout","Non-smoking":"Non-smoking",
        "Accessible":"Accessible","Step-free access":"Step-free access","Elevator":"Elevator","Family-friendly":"Family-friendly","24h check-in":"24h check-in","Airport shuttle":"Airport shuttle",
        "Allowed":"Allowed","Self check-in":"Self check-in",
        "Near airport":"Near airport","Near station":"Near station","Near beach":"Near beach","City center":"City center",
        "Workspace":"Workspace","Washer":"Washer","Dryer":"Dryer","Instant book":"Instant book","Request to book":"Request to book",
        "Verified listings only":"Verified listings only","Verified reviews":"Verified reviews","Show long-stay deals":"Show long-stay deals","B2B-ready":"B2B-ready","Invoice available":"Invoice available",
        "Wide doorway":"Wide doorway","Accessible bathroom":"Accessible bathroom","Nature":"Nature","Camping":"Camping","Traditional":"Traditional",
        "Ski-in/out":"Ski-in/out","Wine country":"Wine country","TV":"TV","Netflix":"Netflix","Game console":"Game console",
        "BBQ grill":"BBQ grill","Patio":"Patio","Private garden":"Private garden","On-site":"On-site","Street":"Street","Paid garage":"Paid garage",
        "4.5+":"4.5+","4.0+":"4.0+","Any":"Any","beds":"beds","baths":"baths"
      }},
    KO:{nav_home:"Home",nav_membership:"Membership",nav_login:"Login",nav_signup:"Sign Up",language:"Language",
      hero_luxury:"Îü≠ÏÖîÎ¶¨ Ïä§ÌÖåÏù¥.",hero_reach:"Í∏ÄÎ°úÎ≤å Î¶¨Ïπò.",hero_sub:"Ïπ¥Îìú, Í≥ÑÏ¢åÏù¥Ï≤¥ & ÌÅ¨Î¶ΩÌÜ† (BTC ¬∑ ETH ¬∑ USDT).",
      placeholder_city:"ÌååÎ¶¨, ÎèÑÏøÑ, Ïù¥Ïä§ÌÉÑÎ∂à‚Ä¶",filters:"ÌïÑÌÑ∞",search:"Í≤ÄÏÉâ",
      feat_verified:"Í≤ÄÏ¶ùÎêú Ïä§ÌÖåÏù¥",feat_verified_sub:"Í∞ÄÍπåÏö¥ Ï∂îÏ≤ú ÏàôÏÜå.",feat_rewards:"StayWorld+ Î¶¨ÏõåÎìú",feat_rewards_sub:"ÏòàÏïΩÎßàÎã§ Ìè¨Ïù∏Ìä∏ Ï†ÅÎ¶Ω.",
      feat_payments:"ÏïàÏ†ÑÌïú Í≤∞Ï†ú",feat_payments_sub:"VISA, ÎßàÏä§ÌÑ∞, ÏïÑÎ©ïÏä§ & ÌÅ¨Î¶ΩÌÜ†.",
      f_title:"ÌïÑÌÑ∞", f_reset:"Ï¥àÍ∏∞Ìôî", f_apply:"Ï†ÅÏö©", f_currency:"ÌÜµÌôî", f_price:"1Î∞ï Í∞ÄÍ≤©",
      f_staytype:"ÏàôÏÜå Ïú†Ìòï", f_review:"ÌõÑÍ∏∞ Ï†êÏàò", f_beds:"Ïπ®ÎåÄ&ÏöïÏã§", f_pets:"Î∞òÎ†§ÎèôÎ¨º", f_checkin:"Ï≤¥ÌÅ¨Ïù∏",
      f_amen:"Ìé∏ÏùòÏãúÏÑ§", f_booking:"ÏòàÏïΩ Î∞©Ïãù", f_verify:"Í≤ÄÏ¶ù", f_long:"Ïû•Í∏∞ ÏàôÎ∞ï", f_biz:"ÎπÑÏ¶àÎãàÏä§",
      f_loc:"ÏúÑÏπò", f_access:"Ï†ëÍ∑ºÏÑ±", f_ex:"Ï≤¥Ìóò", f_view:"Ï†ÑÎßù", f_safe:"ÏïàÏ†Ñ",
      f_family:"Í∞ÄÏ°±", f_ent:"ÏóîÌÑ∞ÌÖåÏù∏Î®ºÌä∏", f_out:"ÏïºÏô∏", f_park:"Ï£ºÏ∞®",
      w:{
        "Wi-Fi":"ÏôÄÏù¥ÌååÏù¥","Pool":"ÏàòÏòÅÏû•","Spa":"Ïä§Ìåå","Gym":"Ìó¨Ïä§Ïû•","Kitchen":"Ï£ºÎ∞©","Balcony":"Î∞úÏΩîÎãà","Hot tub":"Ïò®Ïàò ÏöïÏ°∞","Sauna":"ÏÇ¨Ïö∞ÎÇò","Air conditioning":"ÏóêÏñ¥Ïª®","Breakfast":"Ï°∞Ïãù",
        "Hotel":"Ìò∏ÌÖî","Motel":"Î™®ÌÖî","Hostel":"Ìò∏Ïä§ÌÖî","Apartment":"ÏïÑÌååÌä∏","Villa":"ÎπåÎùº","Ryokan":"Î£åÏπ∏","Guesthouse":"Í≤åÏä§Ìä∏ÌïòÏö∞Ïä§","B&B":"B&B",
        "Sea view":"Î∞îÎã§ Ï†ÑÎßù","City view":"ÎèÑÏãú Ï†ÑÎßù","Mountain view":"ÏÇ∞ Ï†ÑÎßù","Garden":"Ï†ïÏõê",
        "Crypto":"ÏïîÌò∏ÌôîÌèê","Cards":"Ïπ¥Îìú","Bank transfer":"Í≥ÑÏ¢åÏù¥Ï≤¥","Free cancellation":"Î¨¥Î£å Ï∑®ÏÜå","Late checkout":"Î†àÏù¥Ìä∏ Ï≤¥ÌÅ¨ÏïÑÏõÉ","Non-smoking":"Í∏àÏó∞",
        "Accessible":"Ï†ëÍ∑ºÏÑ±","Step-free access":"Î¨¥Í≥ÑÎã® Ï∂úÏûÖ","Elevator":"ÏóòÎ¶¨Î≤†Ïù¥ÌÑ∞","Family-friendly":"Í∞ÄÏ°± ÏπúÌôî","24h check-in":"24ÏãúÍ∞Ñ Ï≤¥ÌÅ¨Ïù∏","Airport shuttle":"Í≥µÌï≠ ÏÖîÌãÄ",
        "Allowed":"ÌóàÏö©","Self check-in":"ÏÖÄÌîÑ Ï≤¥ÌÅ¨Ïù∏",
        "Near airport":"Í≥µÌï≠ Ïù∏Í∑º","Near station":"Ïó≠ Ïù∏Í∑º","Near beach":"Ìï¥Î≥Ä Ïù∏Í∑º","City center":"ÎèÑÏã¨",
        "Workspace":"ÏóÖÎ¨¥ Í≥µÍ∞Ñ","Washer":"ÏÑ∏ÌÉÅÍ∏∞","Dryer":"Í±¥Ï°∞Í∏∞","Instant book":"Ï¶âÏãú ÏòàÏïΩ","Request to book":"ÏöîÏ≤≠ ÏòàÏïΩ",
        "Verified listings only":"Í≤ÄÏ¶ùÎêú Îß§Î¨ºÎßå","Verified reviews":"Í≤ÄÏ¶ùÎêú Î¶¨Î∑∞","Show long-stay deals":"Ïû•Í∏∞ ÌäπÍ∞Ä Î≥¥Í∏∞","B2B-ready":"B2B ÎåÄÏùë","Invoice available":"ÏÑ∏Í∏àÍ≥ÑÏÇ∞ÏÑú Í∞ÄÎä•",
        "Wide doorway":"ÎÑìÏùÄ Ï∂úÏûÖÍµ¨","Accessible bathroom":"Ïû•Ïï†Ïù∏ ÌôîÏû•Ïã§","Nature":"ÏûêÏó∞","Camping":"Ï∫†Ìïë","Traditional":"Ï†ÑÌÜµ",
        "Ski-in/out":"Ïä§ÌÇ§ Ïù∏/ÏïÑÏõÉ","Wine country":"ÏôÄÏù∏ ÏÇ∞ÏßÄ","TV":"TV","Netflix":"ÎÑ∑ÌîåÎ¶≠Ïä§","Game console":"Í≤åÏûÑ ÏΩòÏÜî",
        "BBQ grill":"Î∞îÎπÑÌÅê Í∑∏Î¶¥","Patio":"ÌååÌã∞Ïò§","Private garden":"Í∞úÏù∏ Ï†ïÏõê","On-site":"Î∂ÄÏßÄ ÎÇ¥","Street":"ÎÖ∏ÏÉÅ","Paid garage":"Ïú†Î£å Ï∞®Í≥†",
        "4.5+":"4.5+","4.0+":"4.0+","Any":"Î¨¥Í¥Ä","beds":"Ïπ®ÎåÄ","baths":"ÏöïÏã§"
      }},
    JA:{nav_home:"Home",nav_membership:"Membership",nav_login:"Login",nav_signup:"Sign Up",language:"Language",
      hero_luxury:"Ë¥ÖÊ≤¢„Å™ÊªûÂú®„ÄÇ",hero_reach:"„Ç∞„É≠„Éº„Éê„É´„Å´„ÄÇ",hero_sub:"„Ç´„Éº„Éâ„ÄÅÈäÄË°åÊåØËæº„ÄÅÊöóÂè∑Ë≥áÁî£ÔºàBTC„ÉªETH„ÉªUSDTÔºâ„ÄÇ",
      placeholder_city:"„Éë„É™„ÄÅÊù±‰∫¨„ÄÅ„Ç§„Çπ„Çø„É≥„Éñ„Éº„É´‚Ä¶",filters:"„Éï„Ç£„É´„Çø„Éº",search:"Ê§úÁ¥¢",
      feat_verified:"Ê§úË®ºÊ∏à„Åø„ÅÆÂÆø",feat_verified_sub:"Ëøë„Åè„ÅÆ„Åä„Åô„Åô„ÇÅ„ÄÇ",feat_rewards:"StayWorld+ „É™„ÉØ„Éº„Éâ",feat_rewards_sub:"‰∫àÁ¥ÑÊØé„Å´„Éù„Ç§„É≥„Éà„ÄÇ",
      feat_payments:"ÂÆâÂÖ®„Å™ÊîØÊâï„ÅÑ",feat_payments_sub:"VISA, Master, Amex & Crypto„ÄÇ",
      f_title:"„Éï„Ç£„É´„Çø„Éº", f_reset:"„É™„Çª„ÉÉ„Éà", f_apply:"ÈÅ©Áî®", f_currency:"ÈÄöË≤®", f_price:"1Ê≥ä„ÅÆ‰æ°Ê†º",
      f_staytype:"ÂÆø„Çø„Ç§„Éó", f_review:"„É¨„Éì„É•„ÉºË©ï‰æ°", f_beds:"„Éô„ÉÉ„Éâ&„Éê„Çπ", f_pets:"„Éö„ÉÉ„Éà", f_checkin:"„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥",
      f_amen:"„Ç¢„É°„Éã„ÉÜ„Ç£", f_booking:"‰∫àÁ¥ÑÊñπÊ≥ï", f_verify:"Ë™çË®º", f_long:"Èï∑ÊúüÊªûÂú®", f_biz:"„Éì„Ç∏„Éç„Çπ",
      f_loc:"Â†¥ÊâÄ", f_access:"„Ç¢„ÇØ„Çª„Ç∑„Éì„É™„ÉÜ„Ç£", f_ex:"‰ΩìÈ®ì", f_view:"Áú∫Êúõ", f_safe:"ÂÆâÂÖ®",
      f_family:"ÂÆ∂ÊóèÂêë„Åë", f_ent:"„Ç®„É≥„Çø„É°", f_out:"Â±ãÂ§ñ", f_park:"ÈßêËªä"
    },
    ZH:{nav_home:"È¶ñÈ°µ",nav_membership:"‰ºöÂëò",nav_login:"ÁôªÂΩï",nav_signup:"Ê≥®ÂÜå",language:"ËØ≠Ë®Ä",
      hero_luxury:"Â•¢Âçé‰ΩèÂÆø„ÄÇ",hero_reach:"ÂÖ®ÁêÉË¶ÜÁõñ„ÄÇ",hero_sub:"Èì∂Ë°åÂç°„ÄÅËΩ¨Ë¥¶‰∏éÂä†ÂØÜË¥ßÂ∏ÅÔºàBTC ¬∑ ETH ¬∑ USDTÔºâ„ÄÇ",
      placeholder_city:"Â∑¥Èªé„ÄÅ‰∏ú‰∫¨„ÄÅ‰ºäÊñØÂù¶Â∏ÉÂ∞î‚Ä¶",filters:"Á≠õÈÄâ",search:"ÊêúÁ¥¢",
      feat_verified:"Â∑≤È™åËØÅ‰ΩèÂÆø",feat_verified_sub:"ÈôÑËøëÁ≤æÈÄâ„ÄÇ",feat_rewards:"StayWorld+ Â•ñÂä±",feat_rewards_sub:"ÊØèÊ¨°È¢ÑËÆ¢ËµöÁßØÂàÜ„ÄÇ",
      feat_payments:"ÂÆâÂÖ®ÊîØ‰ªò",feat_payments_sub:"Visa„ÄÅMastercard„ÄÅAmex ‰∏éÂä†ÂØÜË¥ßÂ∏Å„ÄÇ",
      f_title:"Á≠õÈÄâ", f_reset:"ÈáçÁΩÆ", f_apply:"Â∫îÁî®", f_currency:"Ë¥ßÂ∏Å", f_price:"ÊØèÊôö‰ª∑Ê†º",
      f_staytype:"ÊàøÊ∫êÁ±ªÂûã", f_review:"ËØÑÂàÜ", f_beds:"Â∫ä&Êµ¥ÂÆ§", f_pets:"ÂÆ†Áâ©", f_checkin:"ÂÖ•‰Ωè",
      f_amen:"ËÆæÊñΩ", f_booking:"È¢ÑËÆ¢ÊñπÂºè", f_verify:"ËÆ§ËØÅ", f_long:"Èïø‰Ωè", f_biz:"ÂïÜÂä°",
      f_loc:"‰ΩçÁΩÆ", f_access:"Êó†ÈöúÁ¢ç", f_ex:"‰ΩìÈ™å", f_view:"ÊôØËßÇ", f_safe:"ÂÆâÂÖ®",
      f_family:"‰∫≤Â≠ê", f_ent:"Â®±‰πê", f_out:"Êà∑Â§ñ", f_park:"ÂÅúËΩ¶"
    },
    FR:{nav_home:"Accueil",nav_membership:"Adh√©sion",nav_login:"Connexion",nav_signup:"S‚Äôinscrire",language:"Langue",
      hero_luxury:"S√©jours de luxe.",hero_reach:"Port√©e mondiale.",hero_sub:"Carte, virement & crypto (BTC ¬∑ ETH ¬∑ USDT).",
      placeholder_city:"Paris, Tokyo, Istanbul‚Ä¶",filters:"Filtres",search:"Rechercher",
      feat_verified:"Logements v√©rifi√©s",feat_verified_sub:"Meilleurs choix pr√®s de chez vous.",
      feat_rewards:"R√©compenses StayWorld+",feat_rewards_sub:"Des points √† chaque r√©servation.",
      feat_payments:"Paiements s√©curis√©s",feat_payments_sub:"Visa, Mastercard, Amex & Crypto.",
      f_title:"Filtres", f_reset:"R√©initialiser", f_apply:"Appliquer", f_currency:"Devise", f_price:"Prix par nuit",
      f_staytype:"Type d‚Äôh√©bergement", f_review:"Note", f_beds:"Lits & Salles de bain", f_pets:"Animaux", f_checkin:"Arriv√©e",
      f_amen:"√âquipements", f_booking:"R√©servation", f_verify:"V√©rification", f_long:"Long s√©jour", f_biz:"Affaires",
      f_loc:"Emplacement", f_access:"Accessibilit√©", f_ex:"Exp√©riences", f_view:"Vue", f_safe:"S√©curit√©",
      f_family:"Famille", f_ent:"Divertissement", f_out:"Ext√©rieur", f_park:"Parking"
    },
    ES:{nav_home:"Inicio",nav_membership:"Membres√≠a",nav_login:"Ingresar",nav_signup:"Reg√≠strate",language:"Idioma",
      hero_luxury:"Estancias de lujo.",hero_reach:"Alcance global.",hero_sub:"Tarjetas, transferencia bancaria y cripto (BTC ¬∑ ETH ¬∑ USDT).",
      placeholder_city:"Par√≠s, Tokio, Estambul‚Ä¶",filters:"Filtros",search:"Buscar",
      feat_verified:"Alojamientos verificados",feat_verified_sub:"Mejores opciones cerca de ti.",
      feat_rewards:"Recompensas StayWorld+",feat_rewards_sub:"Puntos en cada reserva.",
      feat_payments:"Pagos seguros",feat_payments_sub:"Visa, Mastercard, Amex y Cripto.",
      f_title:"Filtros", f_reset:"Limpiar", f_apply:"Aplicar", f_currency:"Moneda", f_price:"Precio por noche",
      f_staytype:"Tipo de alojamiento", f_review:"Puntuaci√≥n", f_beds:"Camas y ba√±os", f_pets:"Mascotas", f_checkin:"Check-in",
      f_amen:"Servicios", f_booking:"Reserva", f_verify:"Verificaci√≥n", f_long:"Larga estancia", f_biz:"Negocios",
      f_loc:"Ubicaci√≥n", f_access:"Accesibilidad", f_ex:"Experiencias", f_view:"Vista", f_safe:"Seguridad",
      f_family:"Familia", f_ent:"Entretenimiento", f_out:"Exterior", f_park:"Aparcamiento"
    },
    DE:{nav_home:"Start",nav_membership:"Mitgliedschaft",nav_login:"Login",nav_signup:"Registrieren",language:"Sprache",
      hero_luxury:"Luxuri√∂se Aufenthalte.",hero_reach:"Globale Reichweite.",hero_sub:"Karten, √úberweisung & Krypto (BTC ¬∑ ETH ¬∑ USDT).",
      placeholder_city:"Paris, Tokio, Istanbul‚Ä¶",filters:"Filter",search:"Suchen",
      feat_verified:"Verifizierte Unterk√ºnfte",feat_verified_sub:"Top-Auswahl in deiner N√§he.",
      feat_rewards:"StayWorld+ Pr√§mien",feat_rewards_sub:"Punkte bei jeder Buchung.",
      feat_payments:"Sichere Zahlungen",feat_payments_sub:"Visa, Mastercard, Amex & Krypto.",
      f_title:"Filter", f_reset:"Zur√ºcksetzen", f_apply:"Anwenden", f_currency:"W√§hrung", f_price:"Preis pro Nacht",
      f_staytype:"Unterkunftstyp", f_review:"Bewertung", f_beds:"Betten & B√§der", f_pets:"Haustiere", f_checkin:"Check-in",
      f_amen:"Ausstattung", f_booking:"Buchung", f_verify:"Verifizierung", f_long:"Langzeit", f_biz:"Gesch√§ft",
      f_loc:"Lage", f_access:"Barrierefreiheit", f_ex:"Erlebnisse", f_view:"Aussicht", f_safe:"Sicherheit",
      f_family:"Familie", f_ent:"Entertainment", f_out:"Au√üenbereich", f_park:"Parken"
    },
    TR:{nav_home:"Ana Sayfa",nav_membership:"√úyelik",nav_login:"Giri≈ü",nav_signup:"Kaydol",language:"Dil",
      hero_luxury:"L√ºks konaklamalar.",hero_reach:"K√ºresel eri≈üim.",hero_sub:"Kart, havale ve kripto (BTC ¬∑ ETH ¬∑ USDT).",
      placeholder_city:"Paris, Tokyo, ƒ∞stanbul‚Ä¶",filters:"Filtreler",search:"Ara",
      feat_verified:"Doƒürulanmƒ±≈ü konaklamalar",feat_verified_sub:"Yakƒ±nƒ±nƒ±zdaki en iyi se√ßenekler.",
      feat_rewards:"StayWorld+ √ñd√ºlleri",feat_rewards_sub:"Her rezervasyonda puan kazanƒ±n.",
      feat_payments:"G√ºvenli √∂demeler",feat_payments_sub:"Visa, Mastercard, Amex & Kripto.",
      f_title:"Filtreler", f_reset:"Sƒ±fƒ±rla", f_apply:"Uygula", f_currency:"Para birimi", f_price:"Gecelik fiyat",
      f_staytype:"Konaklama t√ºr√º", f_review:"Puan", f_beds:"Yatak & Banyo", f_pets:"Evcil", f_checkin:"Giri≈ü",
      f_amen:"Olanaklar", f_booking:"Rezervasyon", f_verify:"Doƒürulama", f_long:"Uzun konaklama", f_biz:"ƒ∞≈ü",
      f_loc:"Konum", f_access:"Eri≈üilebilirlik", f_ex:"Deneyimler", f_view:"Manzara", f_safe:"G√ºvenlik",
      f_family:"Aile", f_ent:"Eƒülence", f_out:"A√ßƒ±k alan", f_park:"Otopark"
    },
    AR:{nav_home:"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",nav_membership:"ÿßŸÑÿπÿ∂ŸàŸäÿ©",nav_login:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",nav_signup:"ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®",language:"ÿßŸÑŸÑÿ∫ÿ©",
      hero_luxury:"ÿ•ŸÇÿßŸÖÿßÿ™ ŸÅÿßÿÆÿ±ÿ©.",hero_reach:"ÿßŸÜÿ™ÿ¥ÿßÿ± ÿπÿßŸÑŸÖŸä.",hero_sub:"ÿ®ÿ∑ÿßŸÇÿßÿ™ÿå ÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜŸÉŸä ŸàÿπŸÖŸÑÿßÿ™ ŸÖÿ¥ŸÅÿ±ÿ© (BTC ¬∑ ETH ¬∑ USDT).",
      placeholder_city:"ÿ®ÿßÿ±Ÿäÿ≥ÿå ÿ∑ŸàŸÉŸäŸàÿå ÿ•ÿ≥ÿ∑ŸÜÿ®ŸàŸÑ‚Ä¶",filters:"ÿßŸÑŸÅŸÑÿßÿ™ÿ±",search:"ÿ®ÿ≠ÿ´",
      feat_verified:"ÿ•ŸÇÿßŸÖÿßÿ™ ŸÖŸàÿ´ŸàŸÇÿ©",feat_verified_sub:"ÿ£ŸÅÿ∂ŸÑ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿ®ÿßŸÑŸÇÿ±ÿ® ŸÖŸÜŸÉ.",
      feat_rewards:"ŸÖŸÉÿßŸÅÿ¢ÿ™ StayWorld+",feat_rewards_sub:"ŸÜŸÇÿßÿ∑ ŸÖÿπ ŸÉŸÑ ÿ≠ÿ¨ÿ≤.",
      feat_payments:"ŸÖÿØŸÅŸàÿπÿßÿ™ ÿ¢ŸÖŸÜÿ©",feat_payments_sub:"Visa ŸàMastercard ŸàAmex ŸàÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ŸÅÿ±ÿ©.",
      f_title:"ÿßŸÑŸÅŸÑÿßÿ™ÿ±", f_reset:"ÿ•ÿπÿßÿØÿ© ÿ∂ÿ®ÿ∑", f_apply:"ÿ™ÿ∑ÿ®ŸäŸÇ", f_currency:"ÿßŸÑÿπŸÖŸÑÿ©", f_price:"ÿßŸÑÿ≥ÿπÿ± ŸÑŸÑŸäŸÑÿ©",
      f_staytype:"ŸÜŸàÿπ ÿßŸÑÿ•ŸÇÿßŸÖÿ©", f_review:"ÿßŸÑÿ™ŸÇŸäŸäŸÖ", f_beds:"ÿßŸÑÿ£ÿ≥ÿ±ÿ© ŸàÿßŸÑÿ≠ŸÖÿßŸÖÿßÿ™", f_pets:"ÿßŸÑÿ≠ŸäŸàÿßŸÜÿßÿ™ ÿßŸÑÿ£ŸÑŸäŸÅÿ©", f_checkin:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸàÿµŸàŸÑ",
      f_amen:"ÿßŸÑŸÖÿ±ÿßŸÅŸÇ", f_booking:"ÿßŸÑÿ≠ÿ¨ÿ≤", f_verify:"ÿßŸÑÿ™ÿ≠ŸÇŸÇ", f_long:"ÿ•ŸÇÿßŸÖÿ© ÿ∑ŸàŸäŸÑÿ©", f_biz:"ÿ£ÿπŸÖÿßŸÑ",
      f_loc:"ÿßŸÑŸÖŸàŸÇÿπ", f_access:"ÿ•ŸÖŸÉÿßŸÜŸäÿ© ÿßŸÑŸàÿµŸàŸÑ", f_ex:"ÿßŸÑÿÆÿ®ÿ±ÿßÿ™", f_view:"ÿßŸÑÿ•ÿ∑ŸÑÿßŸÑÿ©", f_safe:"ÿßŸÑÿ≥ŸÑÿßŸÖÿ©",
      f_family:"ÿßŸÑÿπÿßÿ¶ŸÑÿ©", f_ent:"ÿßŸÑÿ™ÿ±ŸÅŸäŸá", f_out:"ÿÆÿßÿ±ÿ¨Ÿä", f_park:"ŸÖŸàŸÇŸÅ ÿ≥Ÿäÿßÿ±ÿßÿ™"
    },
    RU:{nav_home:"–ì–ª–∞–≤–Ω–∞—è",nav_membership:"–ü–æ–¥–ø–∏—Å–∫–∞",nav_login:"–í–æ–π—Ç–∏",nav_signup:"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è",language:"–Ø–∑—ã–∫",
      hero_luxury:"–†–æ—Å–∫–æ—à–Ω–æ–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ.",hero_reach:"–ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ—Ö–≤–∞—Ç.",hero_sub:"–ö–∞—Ä—Ç—ã, –ø–µ—Ä–µ–≤–æ–¥ –∏ –∫—Ä–∏–ø—Ç–æ (BTC ¬∑ ETH ¬∑ USDT).",
      placeholder_city:"–ü–∞—Ä–∏–∂, –¢–æ–∫–∏–æ, –°—Ç–∞–º–±—É–ª‚Ä¶",filters:"–§–∏–ª—å—Ç—Ä—ã",search:"–ü–æ–∏—Å–∫",
      feat_verified:"–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã",feat_verified_sub:"–õ—É—á—à–∏–µ –º–µ—Å—Ç–∞ —Ä—è–¥–æ–º —Å –≤–∞–º–∏.",
      feat_rewards:"–ë–æ–Ω—É—Å—ã StayWorld+",feat_rewards_sub:"–ë–∞–ª–ª—ã –∑–∞ –∫–∞–∂–¥–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.",
      feat_payments:"–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏",feat_payments_sub:"Visa, Mastercard, Amex –∏ –∫—Ä–∏–ø—Ç–æ.",
      f_title:"–§–∏–ª—å—Ç—Ä—ã", f_reset:"–°–±—Ä–æ—Å–∏—Ç—å", f_apply:"–ü—Ä–∏–º–µ–Ω–∏—Ç—å", f_currency:"–í–∞–ª—é—Ç–∞", f_price:"–¶–µ–Ω–∞ –∑–∞ –Ω–æ—á—å",
      f_staytype:"–¢–∏–ø –∂–∏–ª—å—è", f_review:"–û—Ü–µ–Ω–∫–∞", f_beds:"–ö—Ä–æ–≤–∞—Ç–∏ –∏ –≤–∞–Ω–Ω—ã–µ", f_pets:"–ü–∏—Ç–æ–º—Ü—ã", f_checkin:"–ó–∞–µ–∑–¥",
      f_amen:"–£–¥–æ–±—Å—Ç–≤–∞", f_booking:"–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ", f_verify:"–ü—Ä–æ–≤–µ—Ä–∫–∞", f_long:"–î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ", f_biz:"–ë–∏–∑–Ω–µ—Å",
      f_loc:"–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ", f_access:"–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å", f_ex:"–í–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è", f_view:"–í–∏–¥", f_safe:"–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å",
      f_family:"–°–µ–º—å—è", f_ent:"–†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è", f_out:"–ù–∞ —É–ª–∏—Ü–µ", f_park:"–ü–∞—Ä–∫–æ–≤–∫–∞"
    }
  };
  function tkey(k){const lang=document.getElementById('lang').value||'EN';return (I18N[lang]||I18N.EN)[k]||I18N.EN[k]||k;}
  function wkey(word){const lang=document.getElementById('lang').value||'EN';const dict=(I18N[lang]||I18N.EN).w||{};return dict[word]||word;}
  function applyI18NPage(lang){
    const d=I18N[lang]||I18N.EN;
    document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.getAttribute('data-i18n'); if(d[k]) el.textContent=d[k];});
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el=>{const k=el.getAttribute('data-i18n-placeholder'); if(d[k]) el.setAttribute('placeholder', d[k]);});
    // ÎìúÎ°úÏñ¥Í∞Ä ÏûàÏúºÎ©¥ ÎÇ¥Î∂Ä ÌÖçÏä§Ìä∏ÎèÑ Ï¶âÏãú Í∞±Ïã†
    localizeDrawer();
  }
  document.getElementById('lang').addEventListener('change', e=>{
    applyI18NPage(e.target.value);
    setCurrencyByLang(e.target.value);
  });
  applyI18NPage('EN');

  /* ------------------ ÌÜµÌôî(10Í∞ú) & Í∞ÄÍ≤© ÌëúÏãú ------------------ */
  const CURRENCIES = {
    USD:{symbol:'$',  rate:1,      locale:'en-US', name:'USD'},
    EUR:{symbol:'‚Ç¨',  rate:0.92,   locale:'fr-FR', name:'EUR'},
    KRW:{symbol:'‚Ç©',  rate:1300,   locale:'ko-KR', name:'KRW'},
    JPY:{symbol:'¬•',  rate:155,    locale:'ja-JP', name:'JPY'},
    CNY:{symbol:'¬•',  rate:7.2,    locale:'zh-CN', name:'CNY'},
    TRY:{symbol:'‚Ç∫',  rate:33,     locale:'tr-TR', name:'TRY'},
    RUB:{symbol:'‚ÇΩ',  rate:90,     locale:'ru-RU', name:'RUB'},
    GBP:{symbol:'¬£',  rate:0.78,   locale:'en-GB', name:'GBP'},
    AED:{symbol:'ÿØ.ÿ•',rate:3.67,   locale:'ar-AE', name:'AED'},
    CAD:{symbol:'$',  rate:1.36,   locale:'en-CA', name:'CAD'}
  };
  const LANG_TO_CUR = { EN:'USD', KO:'KRW', JA:'JPY', ZH:'CNY', FR:'EUR', ES:'EUR', DE:'EUR', TR:'TRY', AR:'AED', RU:'RUB' };
  function setCurrencyByLang(lang){
    const curSel=document.getElementById('currencySelect');
    if(!curSel) return;
    const code = LANG_TO_CUR[lang] || 'USD';
    curSel.value = code;
    updatePriceLabels();
  }
  function fmtMoney(usd){
    const curSel=document.getElementById('currencySelect'); if(!curSel) return '$'+usd.toFixed(0);
    const cur=CURRENCIES[curSel.value]||CURRENCIES.USD;
    const val=usd*cur.rate;
    return new Intl.NumberFormat(cur.locale,{style:'currency',currency:cur.name,maximumFractionDigits:(cur.name==='JPY'||cur.name==='KRW')?0:0}).format(val);
  }

  /* ------------------ Ïò§Î≤ÑÎ†àÏù¥ Í∞ÄÎìú ------------------ */
  const mutedOverlays=new Set();
  function muteFullscreenOverlays(){
    document.querySelectorAll('body *').forEach(el=>{
      try{
        const cs=getComputedStyle(el); if(cs.position!=='fixed')return;
        const r=el.getBoundingClientRect();
        if(r.width>=innerWidth*0.96 && r.height>=innerHeight*0.96){
          if(el.id==='filterDrawer'||el.id==='botPanel') return;
          if(!mutedOverlays.has(el)){ el.dataset.swPe=cs.pointerEvents; el.style.pointerEvents='none'; mutedOverlays.add(el); }
        }
      }catch(_){}
    });
  }
  function restoreOverlays(){ mutedOverlays.forEach(el=>{ if(el.dataset.swPe!=null){el.style.pointerEvents=el.dataset.swPe; delete el.dataset.swPe;} }); mutedOverlays.clear(); }

  /* ------------------ ÌïÑÌÑ∞ ÎìúÎ°úÏñ¥ + Î†åÎçî ------------------ */
  const GROUPS=[
    {t:'f_price', kind:'price'},
    {t:'f_staytype', checks:['Hotel','Motel','Hostel','Apartment','Villa','Ryokan','Guesthouse','B&B']},
    {t:'f_review', radios:['4.5+','4.0+','Any']},
    {t:'f_beds', inputs:[['number','beds',{min:1,value:1}],['number','baths',{min:1,value:1}]]},
    {t:'f_pets', checks:['Allowed']},
    {t:'f_checkin', checks:['Self check-in']},
    {t:'f_amen', checks:['Wi-Fi','Kitchen','Parking','Pool','Air conditioning','Gym','Workspace','Washer','Dryer','Breakfast']},
    {t:'f_booking', checks:['Instant book','Request to book']},
    {t:'f_verify', checks:['Verified listings only','Verified reviews']},
    {t:'f_long', checks:['Show long-stay deals']},
    {t:'f_biz', checks:['B2B-ready','Invoice available']},
    {t:'f_loc', checks:['Near airport','Near station','Near beach','City center']},
    {t:'f_access', checks:['Step-free access','Elevator','Wide doorway','Accessible bathroom']},
    {t:'f_ex', checks:['Nature','Camping','Traditional','Ski-in/out','Wine country']},
    {t:'f_view', checks:['Sea view','City view','Mountain view','Garden']},
    {t:'f_safe', checks:['Carbon monoxide alarm','Smoke alarm','First aid kit']},
    {t:'f_family', checks:['Crib','High chair','Stroller friendly']},
    {t:'f_ent', checks:['TV','Netflix','Game console']},
    {t:'f_out', checks:['BBQ grill','Patio','Private garden']},
    {t:'f_park', checks:['On-site','Street','Paid garage']},
  ];
  function ensureDrawer(){
    let d=document.getElementById('filterDrawer');
    if(!d){
      d=document.createElement('div'); d.id='filterDrawer'; d.setAttribute('aria-hidden','true');
      d.innerHTML=`
        <div class="back"></div>
        <div class="panel">
          <div class="head">
            <strong id="fTitle">${tkey('f_title')}</strong>
            <div style="display:flex;gap:8px;align-items:center">
              <label for="currencySelect" id="curLabel" style="font-size:12px;opacity:.8">${tkey('f_currency')}</label>
              <select id="currencySelect" class="lang-select" style="padding:6px 10px">
                ${Object.keys(CURRENCIES).map(k=>`<option value="${k}">${k}</option>`).join('')}
              </select>
              <button id="swClose" class="btn btn-ghost">‚úï</button>
            </div>
          </div>
          <div id="filterGrid"></div>
          <div class="foot">
            <button id="swReset" class="btn btn-ghost" style="border:1px solid rgba(255,255,255,.14)">${tkey('f_reset')}</button>
            <button id="swApply" class="btn btn-gold">${tkey('f_apply')}</button>
          </div>
        </div>`;
      document.body.appendChild(d);

      const grid=d.querySelector('#filterGrid');
      GROUPS.forEach((g,gi)=>{
        const box=document.createElement('div'); box.className='box';
        box.innerHTML=`<h4 data-title="${g.t}">${tkey(g.t)}</h4>`;
        if(g.kind==='price'){
          // Í∞ÄÍ≤©: Ïä¨ÎùºÏù¥Îçî(USD Í∏∞Ï§Ä) + ÌÜµÌôî Î≥ÄÌôòÎêú ÌëúÏãú
          const html=`
            <div style="display:grid;gap:10px">
              <div style="display:flex;justify-content:space-between;font-size:13px">
                <span>${tkey('f_price')}</span>
                <span><span id="priceMinVal">‚Äì</span> ~ <span id="priceMaxVal">‚Äì</span></span>
              </div>
              <label style="font-size:12px;opacity:.8">Min</label>
              <input type="range" id="priceMin" min="0" max="1000" step="10" value="100">
              <label style="font-size:12px;opacity:.8">Max</label>
              <input type="range" id="priceMax" min="0" max="5000" step="50" value="800">
            </div>`;
          const wrap=document.createElement('div'); wrap.innerHTML=html; box.appendChild(wrap);
        }
        (g.inputs||[]).forEach(([type,id,attrs])=>{
          const wrap=document.createElement('div'); wrap.style.margin='6px 0';
          wrap.innerHTML=`<label style="font-size:12px">${wkey(id)}</label><input type="${type}" id="${id}" style="width:100%">`;
          Object.entries(attrs||{}).forEach(([k,v])=>wrap.querySelector('input').setAttribute(k,v));
          box.appendChild(wrap);
        });
        (g.radios||[]).forEach((name,ri)=>{
          const id=`rg_${gi}_${ri}`;
          const lab=document.createElement('label'); lab.style.cssText='display:inline-flex;align-items:center;gap:6px;margin:6px 10px 0 0';
          lab.innerHTML=`<input type="radio" name="rg_${gi}" id="${id}" ${/Any/i.test(name)?'checked':''}> <span data-word="${name}">${wkey(name)}</span>`;
          box.appendChild(lab);
        });
        (g.checks||[]).forEach((name,ci)=>{
          const id=`ck_${gi}_${ci}`;
          const lab=document.createElement('label'); lab.style.cssText='display:inline-flex;align-items:center;gap:6px;margin:6px 10px 0 0';
          lab.innerHTML=`<input type="checkbox" id="${id}"> <span data-word="${name}">${wkey(name)}</span>`;
          box.appendChild(lab);
        });
        grid.appendChild(box);
      });

      // ÎèôÏûë
      const back=d.querySelector('.back');
      const close=()=>{d.setAttribute('aria-hidden','true'); restoreOverlays();};
      back.addEventListener('click',close);
      d.querySelector('#swClose').addEventListener('click',close);
      d.querySelector('.panel').addEventListener('click',e=>e.stopPropagation());

      d.querySelector('#swReset').addEventListener('click',()=>{
        d.querySelectorAll('input[type=checkbox]').forEach(i=>i.checked=false);
        d.querySelectorAll('input[type=radio]').forEach(i=>i.checked=/Any/i.test(i.nextSibling?.textContent||'Any'));
        document.getElementById('priceMin').value=100;
        document.getElementById('priceMax').value=800;
        updatePriceLabels();
        setBadge('');
      });
      d.querySelector('#swApply').addEventListener('click',()=>{
        const n=d.querySelectorAll('input[type=checkbox]:checked, input[type=radio]:checked').length;
        setBadge(n?n.toString():''); close();
      });
      document.getElementById('currencySelect').addEventListener('change', updatePriceLabels);
      ['priceMin','priceMax'].forEach(id=>{
        d.querySelector('#'+id).addEventListener('input',()=>{
          const min=+d.querySelector('#priceMin').value;
          const max=+d.querySelector('#priceMax').value;
          if(min>max){ d.querySelector('#priceMin').value=max; }
          updatePriceLabels();
        });
      });

      // Ï¥àÍ∏∞ ÌÜµÌôî(Ïñ∏Ïñ¥ Í∏∞Î∞ò) & Í∞ÄÍ≤© ÌëúÏãú
      setCurrencyByLang(document.getElementById('lang').value || 'EN');
      updatePriceLabels();
    }
    return d;
  }
  function updatePriceLabels(){
    const d=document.getElementById('filterDrawer'); if(!d) return;
    const min=+d.querySelector('#priceMin').value||0;
    const max=+d.querySelector('#priceMax').value||0;
    const minEl=d.querySelector('#priceMinVal'); const maxEl=d.querySelector('#priceMaxVal');
    if(minEl) minEl.textContent = fmtMoney(min);
    if(maxEl) maxEl.textContent = fmtMoney(max);
  }
  function localizeDrawer(){
    const d=document.getElementById('filterDrawer'); if(!d) return;
    d.querySelector('#fTitle').textContent=tkey('f_title');
    d.querySelector('#curLabel').textContent=tkey('f_currency');
    d.querySelector('#swReset').textContent=tkey('f_reset');
    d.querySelector('#swApply').textContent=tkey('f_apply');
    d.querySelectorAll('[data-title]').forEach(el=>{ el.textContent=tkey(el.getAttribute('data-title')); });
    d.querySelectorAll('[data-word]').forEach(el=>{ el.textContent=wkey(el.getAttribute('data-word')); });
    // Í∞ÄÍ≤© ÌÉÄÏù¥ÌãÄ
    const priceBox = Array.from(d.querySelectorAll('h4')).find(h=>h.getAttribute('data-title')==='f_price');
    if(priceBox) priceBox.textContent = tkey('f_price');
    updatePriceLabels();
  }
  function openDrawer(){ const d=ensureDrawer(); d.setAttribute('aria-hidden','false'); muteFullscreenOverlays(); localizeDrawer(); }
  function setBadge(text){ const btn=document.getElementById('btnFilters'); btn.style.position='relative'; let b=btn.querySelector('.sw-badge'); if(text){ if(!b){b=document.createElement('span');b.className='sw-badge';btn.appendChild(b);} b.textContent=text; } else if(b){b.remove();} }
  document.getElementById('btnFilters').addEventListener('click',e=>{e.stopPropagation(); openDrawer();},{capture:true});

  /* ------------------ Ï±óÎ¥á ------------------ */
  function ensureChat(){
    let fab=document.getElementById('chatFab');
    if(!fab){ fab=document.createElement('button'); fab.id='chatFab'; fab.textContent='üí¨'; document.body.appendChild(fab); }
    let panel=document.getElementById('botPanel');
    if(!panel){
      panel=document.createElement('div'); panel.id='botPanel';
      panel.innerHTML=`<div class="hdr"><strong>AI Concierge</strong><button id="botClose" class="btn btn-ghost">‚úï</button></div>
        <div id="botBody" class="body"><div class="msg ai">Hello! Ask in any language.</div></div>
        <div class="row"><input id="botInput" placeholder="Type a message‚Ä¶"><button id="botSend">Send</button></div>`;
      document.body.appendChild(panel);
    }
    const open=()=>{panel.style.display='block'; muteFullscreenOverlays();};
    const close=()=>{panel.style.display='none'; restoreOverlays();};
    fab.addEventListener('click',e=>{e.stopPropagation(); open();},{capture:true});
    panel.querySelector('#botClose').addEventListener('click',e=>{e.stopPropagation(); close();});
    document.addEventListener('click',e=>{
      if(panel.style.display!=='block')return;
      const r=panel.getBoundingClientRect(); const inside=e.clientX>=r.left&&e.clientX<=r.right&&e.clientY>=r.top&&e.clientY<=r.bottom;
      if(!inside) close();
    },{capture:true});

    const body=panel.querySelector('#botBody'), input=panel.querySelector('#botInput'), send=panel.querySelector('#botSend');
    const msgs=[];
    const add=(t,me)=>{const d=document.createElement('div'); d.className=`msg ${me?'me':'ai'}`; d.textContent=t; body.appendChild(d); body.scrollTop=body.scrollHeight;};
    async function askAI(message,lang){
      // Î∞±ÏóîÎìú ÏûêÎèô ÌÉêÏÉâ(Îëò Ï§ë ÌïòÎÇòÎßå Î∞∞Ìè¨Ìï¥ÎèÑ Îê®)
      for(const ep of ['/.netlify/functions/sw-chat','/api/chat']){
        try{
          const r=await fetch(ep,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({messages:[...msgs,{role:'user',content:message}],lang})});
          if(r.ok){const d=await r.json(); if(d.reply) return d.reply;}
        }catch(_){}
      }
      return '(Demo) Backend not found. Add Netlify/Vercel function.';
    }
    async function sendIt(){
      const v=(input.value||'').trim(); if(!v) return; input.value='';
      add(v,true); msgs.push({role:'user',content:v}); add('‚Ä¶',false); const dots=body.lastChild;
      try{ const reply=await askAI(v,(document.getElementById('lang').value||'EN').toLowerCase()); dots.remove(); add(reply,false); msgs.push({role:'assistant',content:reply}); }
      catch(_){ dots.remove(); add('Assistant is unavailable.',false); }
    }
    send.addEventListener('click',sendIt); input.addEventListener('keydown',e=>{if(e.key==='Enter') sendIt();});
  }
  ensureChat();

  /* ------------------ ÏßÄÎèÑ + Í≤ÄÏÉâ ------------------ */
  let map, marker;
  function initMap(){
    map=L.map('map',{scrollWheelZoom:true}).setView([48.8566,2.3522],12); // Paris
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap'}).addTo(map);
  }
  initMap();

  const statusEl=document.getElementById('searchStatus');
  function setStatus(msg){ statusEl.textContent=msg||''; statusEl.style.opacity=msg?1:0; if(msg){clearTimeout(statusEl._t); statusEl._t=setTimeout(()=>statusEl.style.opacity=0,3000);} }
  function setLoading(on){ const b=document.getElementById('btnSearch'); const lang=document.getElementById('lang').value; const w=(I18N[lang]||I18N.EN).search||'Search'; b.disabled=on; b.classList.toggle('loading',on); b.textContent=on?'‚Ä¶':w;}

  async function geocodeAny(q){
    const prov=[q=>`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(q)}`,q=>`https://photon.komoot.io/api/?limit=1&q=${encodeURIComponent(q)}`];
    for(const make of prov){
      try{
        const r=await fetch(make(q),{headers:{'Accept':'application/json'}}); if(!r.ok) continue; const data=await r.json();
        if(Array.isArray(data)&&data[0]) return {lat:+data[0].lat,lon:+data[0].lon,label:data[0].display_name||q};
        if(data?.features?.[0]){const f=data.features[0];return {lat:f.geometry.coordinates[1],lon:f.geometry.coordinates[0],label:f.properties.name||f.properties.city||f.properties.country||q};}
      }catch(_){}
    }
    throw new Error('no_results');
  }
  function goTo(lat,lon,label){ if(marker) marker.remove(); marker=L.marker([lat,lon]).addTo(map).bindPopup(label||'').openPopup(); map.setView([lat,lon],13,{animate:true}); document.getElementById('map').scrollIntoView({behavior:'smooth',block:'start'}); }

  async function runSearch(){
    const q=(document.getElementById('searchDestination').value||'').trim(); if(!q){document.getElementById('searchDestination').focus(); return;}
    try{ setLoading(true); setStatus('Searching‚Ä¶'); const {lat,lon,label}=await geocodeAny(q); goTo(lat,lon,label); setStatus(`Found: ${label}`);}
    catch(_){ setStatus('No results. Try another place.'); alert('Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§. Îã§Î•∏ ÎèÑÏãúÎ•º ÏûÖÎ†•Ìï¥Î≥¥ÏÑ∏Ïöî.'); }
    finally{ setLoading(false); }
  }
  document.getElementById('btnSearch').addEventListener('click',runSearch,{capture:true});
  ['searchDestination','checkIn','checkOut'].forEach(id=>{const el=document.getElementById(id); el&&el.addEventListener('keydown',e=>{if(e.key==='Enter') runSearch();});});
  </script>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container"><small>¬© StayWorld ‚Äî stayworldbooking.com</small></div>
  </footer>
</body>
</html>
<script>
// ===== Currency + Filter i18n patch =====

// 10Í∞ú ÌÜµÌôî ÏÑ†ÌÉù(USD, EUR, KRW, JPY, CNY, TRY, GBP, AED, RUB, ARS)
const CURRENCIES = ["USD","EUR","KRW","JPY","CNY","TRY","GBP","AED","RUB","ARS"];
// ÎåÄÎûµÏ†ÅÏù∏ ÌôòÏú®(USD Í∏∞Ï§Ä) ‚Äî ÏóÜÏúºÎ©¥ 1Î°ú ÎèôÏûë, ÎÇòÏ§ëÏóê Í∞±Ïã† Í∞ÄÎä•
let FX = { USD:1, EUR:0.92, KRW:1380, JPY:156, CNY:7.25, TRY:33, GBP:0.78, AED:3.67, RUB:90, ARS:920 };

// Ìó§ÎçîÏóê ÌÜµÌôî ÏÖÄÎ†âÌÑ∞ Ï∂îÍ∞Ä
(function ensureCurrencySelect(){
  const wrap = document.querySelector(".header-cta");
  if (!wrap || document.getElementById("currency")) return;
  const sel = document.createElement("select");
  sel.id = "currency";
  sel.className = "lang-select";
  sel.style.marginLeft = "8px";
  CURRENCIES.forEach(c => {
    const o = document.createElement("option");
    o.value = c; o.textContent = c; sel.appendChild(o);
  });
  sel.value = "USD";
  wrap.insertBefore(sel, wrap.lastElementChild); // Sign Up ÏïûÏóê
})();

// ÏÑ†ÌÉù ÌÜµÌôîÏùò NumberFormat
function fmtMoney(v, cur) {
  try {
    return new Intl.NumberFormat(undefined, { style: "currency", currency: cur }).format(v);
  } catch(_){ // Î∏åÎùºÏö∞Ï†ÄÍ∞Ä Î™®Î•¥Îäî ÌÜµÌôîÏù∏ Í≤ΩÏö∞
    return `${cur} ${Math.round(v).toLocaleString()}`;
  }
}
// USD -> ÏÑ†ÌÉùÌÜµÌôî Î≥ÄÌôò
function toSelectedCurrency(usd) {
  const cur = document.getElementById("currency")?.value || "USD";
  const rate = FX[cur] || 1;
  return { cur, value: usd * rate };
}

// ÌïÑÌÑ∞ ÎìúÎ°úÏñ¥ ÏÉùÏÑ± ÌõÑ Í∞ÄÍ≤© Ïä¨ÎùºÏù¥Îçî ÏàòÏπò ÌëúÏãú Ïó∞Í≤∞
function hookPriceLabels() {
  const d = document.getElementById("filterDrawer");
  if (!d) return;
  const min = d.querySelector("#priceMin");
  const max = d.querySelector("#priceMax");
  if (!min || !max) return;

  // Î†àÏù¥Î∏î ÏóÜÏúºÎ©¥ ÎßåÎì§Í∏∞
  if (!min.nextElementSibling || !min.nextElementSibling.classList?.contains("sw-price-label")) {
    const l1 = document.createElement("div"); l1.className = "sw-price-label"; l1.style.marginTop="6px"; min.after(l1);
    const l2 = document.createElement("div"); l2.className = "sw-price-label"; l2.style.marginTop="6px"; max.after(l2);
  }

  const [lab1, lab2] = d.querySelectorAll(".sw-price-label");

  function render() {
    const a = toSelectedCurrency(Number(min.value));
    const b = toSelectedCurrency(Number(max.value));
    lab1.textContent = `Min: ${fmtMoney(a.value, a.cur)} / night`;
    lab2.textContent = `Max: ${fmtMoney(b.value, b.cur)} / night`;
  }
  min.oninput = max.oninput = render;
  document.getElementById("currency")?.addEventListener("change", render);
  render();
}

// ÎìúÎ°úÏñ¥Í∞Ä Ïó¥Î¶¥ ÎïåÎßàÎã§ Î†àÏù¥Î∏î ÌõÑÌÇπ
const obs = new MutationObserver(()=> hookPriceLabels());
obs.observe(document.documentElement,{ childList:true, subtree:true });

// (ÏÑ†ÌÉù) ÌôòÏú®ÏùÑ Ìïú Î≤à ÏãúÎèÑÌï¥ÏÑú Î∂àÎü¨Ïò§Í∏∞(Ïã§Ìå®Ìï¥ÎèÑ Í¥úÏ∞ÆÍ≤å)
(async function tryFetchRates(){
  try {
    const r = await fetch("https://open.er-api.com/v6/latest/USD");
    const j = await r.json();
    if (j && j.rates) {
      for (const c of CURRENCIES) if (j.rates[c]) FX[c] = j.rates[c];
    }
  } catch(_) { /* fallback FX Í∑∏ÎåÄÎ°ú */ }
})();

// ---- ÌïÑÌÑ∞ ÌÉÄÏù¥ÌãÄ Î≤àÏó≠(ÏûêÏ£º Î≥¥Ïù¥Îäî Í≤É ÏúÑÏ£º) ----
const FILTER_I18N = {
  filter_price: { KO:"1Î∞ï Í∞ÄÍ≤©", JA:"1Ê≥ä„ÅÇ„Åü„Çä„ÅÆÊñôÈáë", ZH:"ÊØèÊôö‰ª∑Ê†º", FR:"Prix par nuit", ES:"Precio por noche", DE:"Preis pro Nacht", TR:"Gecelik fiyat", AR:"ÿßŸÑÿ≥ÿπÿ± ŸÑŸÉŸÑ ŸÑŸäŸÑÿ©", RU:"–¶–µ–Ω–∞ –∑–∞ –Ω–æ—á—å", EN:"Price per night" },
  filter_staytype: { KO:"ÏàôÏÜå Ïú†Ìòï", JA:"ÂÆø„Çø„Ç§„Éó", ZH:"ÊàøÊ∫êÁ±ªÂûã", FR:"Type de s√©jour", ES:"Tipo de estancia", DE:"Unterkunftstyp", TR:"Konaklama t√ºr√º", AR:"ŸÜŸàÿπ ÿßŸÑÿ•ŸÇÿßŸÖÿ©", RU:"–¢–∏–ø —Ä–∞–∑–º–µ—â–µ–Ω–∏—è", EN:"Stay type" },
  filter_reviews: { KO:"ÌèâÏ†ê", JA:"„É¨„Éì„É•„Éº", ZH:"ËØÑÂàÜ", FR:"Note", ES:"Puntuaci√≥n", DE:"Bewertung", TR:"Puan", AR:"ÿßŸÑÿ™ŸÇŸäŸäŸÖ", RU:"–û—Ü–µ–Ω–∫–∞", EN:"Review score" },
  filter_bedsbaths: { KO:"Ïπ®ÎåÄ¬∑ÏöïÏã§", JA:"„Éô„ÉÉ„Éâ„Éª„Éê„Çπ", ZH:"Â∫ä‰Ωç‰∏éÊµ¥ÂÆ§", FR:"Lits & Salles de bain", ES:"Camas y ba√±os", DE:"Betten & B√§der", TR:"Yatak & Banyo", AR:"ÿßŸÑÿ£ÿ≥Ÿêÿ±Ÿëÿ© ŸàÿßŸÑÿ≠ŸÖŸëÿßŸÖÿßÿ™", RU:"–ö—Ä–æ–≤–∞—Ç–∏ –∏ –≤–∞–Ω–Ω—ã–µ", EN:"Beds & Baths" },
  filter_amenities: { KO:"Ìé∏ÏùòÏãúÏÑ§", JA:"Ë®≠ÂÇô", ZH:"ËÆæÊñΩ", FR:"√âquipements", ES:"Servicios", DE:"Ausstattung", TR:"Olanaklar", AR:"ÿßŸÑŸÖÿ±ÿßŸÅŸÇ", RU:"–£–¥–æ–±—Å—Ç–≤–∞", EN:"Amenities" },
  filter_view: { KO:"Ï†ÑÎßù", JA:"Áú∫Êúõ", ZH:"ÊôØËßÇ", FR:"Vue", ES:"Vistas", DE:"Aussicht", TR:"Manzara", AR:"ÿßŸÑÿ•ÿ∑ŸÑÿßŸÑÿ©", RU:"–í–∏–¥", EN:"View" },
  filter_access: { KO:"Ï†ëÍ∑ºÏÑ±", JA:"„Ç¢„ÇØ„Çª„Ç∑„Éì„É™„ÉÜ„Ç£", ZH:"Êó†ÈöúÁ¢ç", FR:"Accessibilit√©", ES:"Accesibilidad", DE:"Barrierefreiheit", TR:"Eri≈üilebilirlik", AR:"ÿ≥ŸáŸàŸÑÿ© ÿßŸÑŸàÿµŸàŸÑ", RU:"–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å", EN:"Accessibility" },
  filter_booking: { KO:"ÏòàÏïΩ", JA:"‰∫àÁ¥Ñ", ZH:"È¢ÑËÆ¢", FR:"R√©servation", ES:"Reserva", DE:"Buchung", TR:"Rezervasyon", AR:"ÿßŸÑÿ≠ÿ¨ÿ≤", RU:"–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ", EN:"Booking" },
};

function translateFilterHeadings() {
  const lang = (document.getElementById("lang")?.value || "EN").toUpperCase();
  const d = document.getElementById("filterDrawer");
  if (!d) return;
  // Ìó§Îçî strong ÌÖçÏä§Ìä∏
  const head = d.querySelector(".head strong");
  if (head) head.textContent = (I18N[lang]?.filters || "Filters");

  const map = {
    "Price per night":"filter_price",
    "Stay type":"filter_staytype",
    "Review score":"filter_reviews",
    "Beds & Baths":"filter_bedsbaths",
    "Amenities":"filter_amenities",
    "View":"filter_view",
    "Accessibility":"filter_access",
    "Booking":"filter_booking",
  };
  d.querySelectorAll("#filterGrid .box > h4").forEach(h=>{
    const key = map[h.textContent.trim()];
    if (!key) return;
    h.textContent = FILTER_I18N[key]?.[lang] || FILTER_I18N[key]?.EN || h.textContent;
  });

  // Î≤ÑÌäº
  const reset = d.querySelector("#swReset");
  const apply = d.querySelector("#swApply");
  if (reset) reset.textContent = (I18N[lang]?.clear || "Clear");
  if (apply) apply.textContent = (I18N[lang]?.apply || "Apply");
}
document.getElementById("lang")?.addEventListener("change", translateFilterHeadings);
new MutationObserver(translateFilterHeadings).observe(document.documentElement,{childList:true,subtree:true});
</script>

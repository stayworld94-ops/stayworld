<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STAYWORLD — Luxury Global Reach</title>

  <!-- Leaflet (지도) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>

  <style>
    :root{--bg:#0b0f16;--panel:#101018;--text:#e7e9ee;--muted:#cfd6e6;--line:rgba(255,255,255,.08);--chip:#121a26;--gold1:#f4d78c;--gold2:#c9a35b}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif;line-height:1.5}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:1120px;margin:0 auto;padding:0 16px}

    /* Header */
    .site-header{position:sticky;top:0;z-index:1000;background:rgba(11,15,22,.85);backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
    .header-row{display:flex;align-items:center;justify-content:space-between;gap:20px;height:72px}
    .logo img{width:36px;height:36px;border-radius:8px;box-shadow:0 4px 18px rgba(0,0,0,.3)}
    .brand{font-weight:800;letter-spacing:.6px}
    .main-nav{display:flex;gap:20px;align-items:center}
    .main-nav a{padding:8px 10px;border-radius:10px}
    .main-nav a:hover{background:rgba(255,255,255,.06)}
    .btn{border:0;padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn-ghost{background:transparent;color:#cfcfcf;border:1px solid var(--line)}
    .btn-gold{background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#170f04;font-weight:700;border-radius:14px;padding:12px 18px;box-shadow:0 8px 26px rgba(201,163,91,.35)}
    .lang-select{appearance:none;background:#101826;border:1px solid var(--line);color:var(--text);border-radius:12px;padding:8px 32px 8px 10px}

    /* Hero */
    .hero{padding:48px 0 24px;background:radial-gradient(1200px 500px at 20% -10%,rgba(244,215,140,.12),transparent),radial-gradient(1200px 600px at 100% 0,rgba(78,94,130,.18),transparent)}
    .hero-title{font-size:48px;letter-spacing:.2px;margin:10px 0 8px}
    .accent{color:#f1cf84}
    .hero-sub{opacity:.85;margin:8px 0 28px}
    .search-bar{display:grid;grid-template-columns:1.2fr .7fr .7fr auto auto;gap:10px;align-items:center}
    .input{background:#0f1621;border:1px solid var(--line);color:var(--text);padding:12px 14px;border-radius:12px}
    .input::placeholder{color:#a7b0bf}
    .search-status{margin-top:8px;color:#cfd6e6;opacity:0;transition:opacity .3s}
    .btn.loading{opacity:.65;pointer-events:none}

    /* Cards */
    .features{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:28px}
    .card{background:#0f1420;border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 8px 30px rgba(0,0,0,.25)}

    /* Map */
    .map-section{padding:36px 0 60px}
    #map{height:420px;border-radius:16px;border:1px solid var(--line);box-shadow:0 8px 30px rgba(0,0,0,.25);overflow:hidden}
    .leaflet-container,.leaflet-pane,.leaflet-top,.leaflet-bottom{z-index:10 !important}

    /* Footer */
    .site-footer{padding:28px 0;border-top:1px solid var(--line);opacity:.85}

    /* ===== StayWorld Explore Section ===== */
    .sw-explore{background:linear-gradient(180deg,rgba(8,10,14,.0),rgba(8,10,14,.6));padding:40px 0;border-top:1px solid var(--line)}
    .sw-wrap{max-width:1120px;margin:0 auto;padding:0 16px}
    .sw-explore-head h2{margin:0 0 6px;font-size:26px;font-weight:800}
    .sw-explore-head p{margin:0 0 18px;opacity:.8}

    .sw-row{position:relative;display:flex;align-items:center;gap:12px}
    .sw-track{display:flex;gap:16px;overflow:hidden;scroll-behavior:smooth;padding:6px}
    .sw-card{min-width:260px;background:#0f1420;border:1px solid var(--line);border-radius:16px;box-shadow:0 8px 26px rgba(0,0,0,.25);transition:transform .18s}
    .sw-card:hover{transform:translateY(-2px)}
    .sw-card-media{position:relative;aspect-ratio:16/10;border-radius:16px 16px 0 0;background-size:cover;background-position:center}
    .sw-like{position:absolute;right:10px;top:10px;border:0;background:rgba(0,0,0,.45);color:#fff;border-radius:999px;width:34px;height:34px;cursor:pointer}
    .sw-like.active{background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#121212}
    .sw-badge{position:absolute;left:10px;bottom:10px;background:rgba(0,0,0,.65);color:#fff;padding:4px 8px;border-radius:10px;font-weight:700;font-size:12px}
    .sw-card-body{padding:12px 14px 14px}
    .sw-card h3{margin:0 0 6px;font-size:16px}
    .sw-meta{margin:0;opacity:.75;font-size:13px}

    .sw-nav{border:1px solid var(--line);background:#0c121b;color:#e5edff;width:34px;height:34px;border-radius:999px;cursor:pointer}
    .sw-nav:active{transform:scale(.98)}

    .sw-tabs{display:flex;gap:8px;margin:20px 0 14px}
    .sw-tabs button{background:#0e141e;border:1px solid var(--line);border-radius:999px;padding:8px 14px;color:#cbd6e6;cursor:pointer;font-size:13px}
    .sw-tabs button.is-active,.sw-tabs button:hover{border-color:var(--gold2);color:#fff}
    .sw-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
    .sw-spot{grid-column:span 4;position:relative;display:block;aspect-ratio:16/10;border-radius:16px;background-size:cover;background-position:center;overflow:hidden;border:1px solid var(--line);box-shadow:0 6px 24px rgba(0,0,0,.25)}
    .sw-spot-title{position:absolute;left:12px;bottom:12px;background:rgba(0,0,0,.45);backdrop-filter:blur(6px);padding:8px 10px;border-radius:12px;color:#fff;font-weight:700;border:1px solid rgba(255,255,255,.2)}

    @media (max-width:1024px){.sw-spot{grid-column:span 6}}
    @media (max-width:640px){.sw-card{min-width:220px}.sw-spot{grid-column:span 12}.hero-title{font-size:36px}.features{grid-template-columns:1fr}.search-bar{grid-template-columns:1fr 1fr 1fr auto}}
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-row">
      <div class="logo"><a href="/"><img src="/assets/img/logo-stayworld.png" alt="StayWorld Logo"></a></div>
      <nav class="main-nav">
        <a href="/" data-i18n="nav_home">Home</a>
        <a href="/membership.html" data-i18n="nav_membership">Membership</a>
        <a href="/host-login.html" id="hostLink" data-i18n="host_login">Host Login</a>
      </nav>
      <div style="display:flex;align-items:center;gap:10px">
        <label for="langSel" style="font-size:12px;opacity:.7" data-i18n="language">Language</label>
        <select id="langSel" class="lang-select">
          <option value="EN">EN</option><option value="KO">KO</option><option value="JA">JA</option><option value="ZH">ZH</option>
          <option value="FR">FR</option><option value="ES">ES</option><option value="DE">DE</option><option value="TR">TR</option>
          <option value="AR">AR</option><option value="RU">RU</option>
        </select>
        <a href="/login.html" id="loginBtn" class="btn btn-ghost" data-i18n="nav_login">Login</a>
        <button id="logoutBtn" class="btn btn-ghost" style="display:none" data-i18n="nav_logout">Logout</button>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="hero">
    <div class="container">
      <h1 class="hero-title"><span data-i18n="hero_luxury">Luxury stays.</span><br><span class="accent" data-i18n="hero_reach">Global reach.</span></h1>
      <p class="hero-sub" data-i18n="hero_sub">Cards, bank transfer & crypto (BTC · ETH · USDT).</p>

      <div class="search-bar">
        <input class="input" id="searchDestination" type="text" placeholder="Paris, Tokyo, Istanbul…" data-i18n-placeholder="placeholder_city">
        <input class="input" id="checkIn" type="date">
        <input class="input" id="checkOut" type="date">
        <button class="btn btn-ghost" id="btnFilters" type="button" data-i18n="filters">Filters</button>
        <button class="btn btn-gold" id="btnSearch" type="button" data-i18n="search">Search</button>
      </div>
      <div id="searchStatus" class="search-status"></div>

      <div class="features">
        <div class="card"><h3 data-i18n="feat_verified">Verified stays</h3><p data-i18n="feat_verified_sub">Top picks near you.</p></div>
        <div class="card"><h3 data-i18n="feat_rewards">StayWorld+ Rewards</h3><p data-i18n="feat_rewards_sub">Earn points on every booking.</p></div>
        <div class="card"><h3 data-i18n="feat_payments">Secure payments</h3><p data-i18n="feat_payments_sub">Visa, Mastercard, Amex & Crypto.</p></div>
      </div>
    </div>
  </section>

  <!-- MAP -->
  <section class="map-section">
    <div class="container"><div id="map"></div></div>
  </section>

  <!-- EXPLORE (푸터 바로 위) -->
  <section class="sw-explore">
    <div class="sw-wrap">
      <header class="sw-explore-head">
        <h2 data-i18n="explore_unique_title">한 번쯤 묵어보고 싶은 숙소</h2>
        <p data-i18n="explore_unique_sub">캐빈, 빌라, 샬레 등 특별한 숙소를 찾아보세요</p>
      </header>

      <div class="sw-row">
        <button class="sw-nav prev" aria-label="prev">‹</button>
        <div class="sw-track" data-track="unique">
          <article class="sw-card">
            <div class="sw-card-media" style="background-image:url('/assets/unique/cabin.jpg')">
              <button class="sw-like" aria-label="favorite">♡</button>
              <span class="sw-badge">9.6</span>
            </div>
            <div class="sw-card-body">
              <h3>Forest Cabin</h3>
              <p class="sw-meta">Poland • <span data-i18n="explore_exceptional">Exceptional</span></p>
            </div>
          </article>
          <article class="sw-card">
            <div class="sw-card-media" style="background-image:url('/assets/unique/chalet.jpg')">
              <button class="sw-like" aria-label="favorite">♡</button>
              <span class="sw-badge">9.5</span>
            </div>
            <div class="sw-card-body">
              <h3>Alpine Chalet</h3>
              <p class="sw-meta">Germany • <span data-i18n="explore_exceptional">Exceptional</span></p>
            </div>
          </article>
          <article class="sw-card">
            <div class="sw-card-media" style="background-image:url('/assets/unique/tinyhouse.jpg')">
              <button class="sw-like" aria-label="favorite">♡</button>
              <span class="sw-badge">9.4</span>
            </div>
            <div class="sw-card-body">
              <h3>Tiny House</h3>
              <p class="sw-meta">Poland • <span data-i18n="explore_exceptional">Exceptional</span></p>
            </div>
          </article>
        </div>
        <button class="sw-nav next" aria-label="next">›</button>
      </div>

      <div class="sw-tabs">
        <button class="is-active" data-filter="city" data-i18n="explore_tab_city">City</button>
        <button data-filter="beach" data-i18n="explore_tab_beach">Beach</button>
        <button data-filter="outdoor" data-i18n="explore_tab_outdoor">Outdoor</button>
        <button data-filter="romance" data-i18n="explore_tab_romance">Romance</button>
        <button data-filter="food" data-i18n="explore_tab_food">Food</button>
      </div>

      <div class="sw-grid" data-grid="destinations">
        <a class="sw-spot" data-type="city" style="background-image:url('/assets/dest/athens.jpg')"><span class="sw-spot-title">Athens 🇬🇷</span></a>
        <a class="sw-spot" data-type="city" style="background-image:url('/assets/dest/dubai.jpg')"><span class="sw-spot-title">Dubai 🇦🇪</span></a>
        <a class="sw-spot" data-type="city" style="background-image:url('/assets/dest/amsterdam.jpg')"><span class="sw-spot-title">Amsterdam 🇳🇱</span></a>
        <a class="sw-spot" data-type="beach" style="background-image:url('/assets/dest/antalya.jpg')"><span class="sw-spot-title">Antalya 🏖️</span></a>
        <a class="sw-spot" data-type="outdoor" style="background-image:url('/assets/dest/cappadocia.jpg')"><span class="sw-spot-title">Cappadocia ⛰️</span></a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container"><small data-i18n="footer_copy">© StayWorld — stayworldbooking.com</small></div>
  </footer>

  <script>
  /* ========================= I18N (10 languages) ========================= */
  const I18N = {
    EN:{nav_home:"Home",nav_membership:"Membership",nav_login:"Login",nav_logout:"Logout",language:"Language",
        host_login:"Host Login",
        hero_luxury:"Luxury stays.",hero_reach:"Global reach.",hero_sub:"Cards, bank transfer & crypto (BTC · ETH · USDT).",
        placeholder_city:"Paris, Tokyo, Istanbul…",filters:"Filters",search:"Search",
        feat_verified:"Verified stays",feat_verified_sub:"Top picks near you.",
        feat_rewards:"StayWorld+ Rewards",feat_rewards_sub:"Earn points on every booking.",
        feat_payments:"Secure payments",feat_payments_sub:"Visa, Mastercard, Amex & Crypto.",
        explore_unique_title:"Stays you'll love",explore_unique_sub:"Cabins, villas, chalets and more",
        explore_exceptional:"Exceptional",
        explore_tab_city:"City",explore_tab_beach:"Beach",explore_tab_outdoor:"Outdoor",explore_tab_romance:"Romance",explore_tab_food:"Food",
        footer_copy:"© StayWorld — stayworldbooking.com"},
    KO:{nav_home:"홈",nav_membership:"멤버십",nav_login:"로그인",nav_logout:"로그아웃",language:"언어",
        host_login:"호스트 로그인",
        hero_luxury:"럭셔리 스테이.",hero_reach:"글로벌 리치.",hero_sub:"카드, 계좌이체 & 크립토 (BTC · ETH · USDT).",
        placeholder_city:"파리, 도쿄, 이스탄불…",filters:"필터",search:"검색",
        feat_verified:"검증된 스테이",feat_verified_sub:"가까운 추천 숙소.",
        feat_rewards:"StayWorld+ 리워드",feat_rewards_sub:"예약마다 포인트 적립.",
        feat_payments:"안전한 결제",feat_payments_sub:"VISA, 마스터, 아멕스 & 크립토.",
        explore_unique_title:"한 번쯤 묵어보고 싶은 숙소",explore_unique_sub:"캐빈, 빌라, 샬레 등 특별한 숙소",
        explore_exceptional:"평점 훌륭함",
        explore_tab_city:"도시",explore_tab_beach:"바다",explore_tab_outdoor:"자연",explore_tab_romance:"로맨스",explore_tab_food:"맛집",
        footer_copy:"© 스테이월드 — stayworldbooking.com"},
    JA:{nav_home:"ホーム",nav_membership:"メンバーシップ",nav_login:"ログイン",nav_logout:"ログアウト",language:"言語",
        host_login:"ホストログイン",
        hero_luxury:"贅沢な滞在。",hero_reach:"グローバルに。",hero_sub:"カード、銀行振込、暗号資産（BTC・ETH・USDT）。",
        placeholder_city:"パリ、東京、イスタンブール…",filters:"フィルター",search:"検索",
        feat_verified:"検証済みの宿",feat_verified_sub:"近くのおすすめ。",
        feat_rewards:"StayWorld+ リワード",feat_rewards_sub:"予約毎にポイント。",
        feat_payments:"安全な支払い",feat_payments_sub:"VISA, Master, Amex & Crypto。",
        explore_unique_title:"気に入る宿",explore_unique_sub:"キャビン、ヴィラ、シャレーなど",
        explore_exceptional:"素晴らしい",
        explore_tab_city:"都市",explore_tab_beach:"ビーチ",explore_tab_outdoor:"アウトドア",explore_tab_romance:"ロマンス",explore_tab_food:"グルメ",
        footer_copy:"© StayWorld — stayworldbooking.com"},
    ZH:{nav_home:"首页",nav_membership:"会员",nav_login:"登录",nav_logout:"退出登录",language:"语言",
        host_login:"房东登录",
        hero_luxury:"奢华住宿。",hero_reach:"全球覆盖。",hero_sub:"银行卡、转账与加密货币（BTC · ETH · USDT）。",
        placeholder_city:"巴黎、东京、伊斯坦布尔…",filters:"筛选",search:"搜索",
        feat_verified:"已验证住宿",feat_verified_sub:"附近精选。",
        feat_rewards:"StayWorld+ 奖励",feat_rewards_sub:"每次预订赚积分。",
        feat_payments:"安全支付",feat_payments_sub:"Visa、Mastercard、Amex 与加密货币。",
        explore_unique_title:"你会喜欢的住宿",explore_unique_sub:"小木屋、别墅、木屋等",
        explore_exceptional:"极好",
        explore_tab_city:"城市",explore_tab_beach:"海滩",explore_tab_outdoor:"户外",explore_tab_romance:"浪漫",explore_tab_food:"美食",
        footer_copy:"© StayWorld — stayworldbooking.com"},
    FR:{nav_home:"Accueil",nav_membership:"Adhésion",nav_login:"Connexion",nav_logout:"Déconnexion",language:"Langue",
        host_login:"Connexion hôte",
        hero_luxury:"Séjours de luxe.",hero_reach:"Portée mondiale.",hero_sub:"Carte, virement & crypto (BTC · ETH · USDT).",
        placeholder_city:"Paris, Tokyo, Istanbul…",filters:"Filtres",search:"Rechercher",
        feat_verified:"Logements vérifiés",feat_verified_sub:"Meilleurs choix près de chez vous.",
        feat_rewards:"Récompenses StayWorld+",feat_rewards_sub:"Des points à chaque réservation.",
        feat_payments:"Paiements sécurisés",feat_payments_sub:"Visa, Mastercard, Amex & Crypto.",
        explore_unique_title:"Séjours à découvrir",explore_unique_sub:"Cabanes, villas, chalets et plus",
        explore_exceptional:"Exceptionnel",
        explore_tab_city:"Ville",explore_tab_beach:"Plage",explore_tab_outdoor:"Plein air",explore_tab_romance:"Romance",explore_tab_food:"Gastronomie",
        footer_copy:"© StayWorld — stayworldbooking.com"},
    ES:{nav_home:"Inicio",nav_membership:"Membresía",nav_login:"Ingresar",nav_logout:"Cerrar sesión",language:"Idioma",
        host_login:"Inicio de sesión de anfitrión",
        hero_luxury:"Estancias de lujo.",hero_reach:"Alcance global.",hero_sub:"Tarjetas, transferencia bancaria y cripto (BTC · ETH · USDT).",
        placeholder_city:"París, Tokio, Estambul…",filters:"Filtros",search:"Buscar",
        feat_verified:"Alojamientos verificados",feat_verified_sub:"Mejores opciones cerca de ti.",
        feat_rewards:"Recompensas StayWorld+",feat_rewards_sub:"Puntos en cada reserva.",
        feat_payments:"Pagos seguros",feat_payments_sub:"Visa, Mastercard, Amex y Cripto.",
        explore_unique_title:"Alojamientos que te encantarán",explore_unique_sub:"Cabañas, villas, chalets y más",
        explore_exceptional:"Fantástico",
        explore_tab_city:"Ciudad",explore_tab_beach:"Playa",explore_tab_outdoor:"Aire libre",explore_tab_romance:"Romance",explore_tab_food:"Comida",
        footer_copy:"© StayWorld — stayworldbooking.com"},
    DE:{nav_home:"Start",nav_membership:"Mitgliedschaft",nav_login:"Login",nav_logout:"Abmelden",language:"Sprache",
        host_login:"Gastgeber-Login",
        hero_luxury:"Luxuriöse Aufenthalte.",hero_reach:"Globale Reichweite.",hero_sub:"Karten, Überweisung & Krypto (BTC · ETH · USDT).",
        placeholder_city:"Paris, Tokio, Istanbul…",filters:"Filter",search:"Suchen",
        feat_verified:"Verifizierte Unterkünfte",feat_verified_sub:"Top-Auswahl in deiner Nähe.",
        feat_rewards:"StayWorld+ Prämien",feat_rewards_sub:"Punkte bei jeder Buchung.",
        feat_payments:"Sichere Zahlungen",feat_payments_sub:"Visa, Mastercard, Amex & Krypto.",
        explore_unique_title:"Unterkünfte, die begeistern",explore_unique_sub:"Hütten, Villen, Chalets u.v.m.",
        explore_exceptional:"Hervorragend",
        explore_tab_city:"Stadt",explore_tab_beach:"Strand",explore_tab_outdoor:"Draußen",explore_tab_romance:"Romantik",explore_tab_food:"Essen",
        footer_copy:"© StayWorld — stayworldbooking.com"},
    TR:{nav_home:"Ana Sayfa",nav_membership:"Üyelik",nav_login:"Giriş",nav_logout:"Çıkış",language:"Dil",
        host_login:"Ev Sahibi Girişi",
        hero_luxury:"Lüks konaklamalar.",hero_reach:"Küresel erişim.",hero_sub:"Kart, havale ve kripto (BTC · ETH · USDT).",
        placeholder_city:"Paris, Tokyo, İstanbul…",filters:"Filtreler",search:"Ara",
        feat_verified:"Doğrulanmış konaklamalar",feat_verified_sub:"Yakınınızdaki en iyi seçenekler.",
        feat_rewards:"StayWorld+ Ödülleri",feat_rewards_sub:"Her rezervasyonda puan kazanın.",
        feat_payments:"Güvenli ödemeler",feat_payments_sub:"Visa, Mastercard, Amex & Kripto.",
        explore_unique_title:"Bayılacağınız konaklamalar",explore_unique_sub:"Kulübeler, villalar, dağ evleri ve daha fazlası",
        explore_exceptional:"Harika",
        explore_tab_city:"Şehir",explore_tab_beach:"Plaj",explore_tab_outdoor:"Açık hava",explore_tab_romance:"Romantik",explore_tab_food:"Yemek",
        footer_copy:"© StayWorld — stayworldbooking.com"},
    AR:{nav_home:"الرئيسية",nav_membership:"العضوية",nav_login:"تسجيل الدخول",nav_logout:"تسجيل الخروج",language:"اللغة",
        host_login:"تسجيل دخول المضيف",
        hero_luxury:"إقامات فاخرة.",hero_reach:"انتشار عالمي.",hero_sub:"بطاقات، تحويل بنكي وعملات مشفرة (BTC · ETH · USDT).",
        placeholder_city:"باريس، طوكيو، إسطنبول…",filters:"الفلاتر",search:"بحث",
        feat_verified:"إقامات موثوقة",feat_verified_sub:"أفضل الخيارات بالقرب منك.",
        feat_rewards:"مكافآت StayWorld+",feat_rewards_sub:"نقاط مع كل حجز.",
        feat_payments:"مدفوعات آمنة",feat_payments_sub:"Visa وMastercard وAmex والعملات المشفرة.",
        explore_unique_title:"إقامات ستعجبك",explore_unique_sub:"أكواخ وفيلات وشاليهات وأكثر",
        explore_exceptional:"رائع",
        explore_tab_city:"مدينة",explore_tab_beach:"شاطئ",explore_tab_outdoor:"خارجي",explore_tab_romance:"رومانسي",explore_tab_food:"طعام",
        footer_copy:"© StayWorld — stayworldbooking.com"},
    RU:{nav_home:"Главная",nav_membership:"Подписка",nav_login:"Войти",nav_logout:"Выйти",language:"Язык",
        host_login:"Вход хоста",
        hero_luxury:"Роскошное проживание.",hero_reach:"Глобальный охват.",hero_sub:"Карты, перевод и крипто (BTC · ETH · USDT).",
        placeholder_city:"Париж, Токио, Стамбул…",filters:"Фильтры",search:"Поиск",
        feat_verified:"Проверенные варианты",feat_verified_sub:"Лучшие места рядом с вами.",
        feat_rewards:"Бонусы StayWorld+",feat_rewards_sub:"Баллы за каждое бронирование.",
        feat_payments:"Безопасные платежи",feat_payments_sub:"Visa, Mastercard, Amex и крипто.",
        explore_unique_title:"Гостиницы, которые вам понравятся",explore_unique_sub:"Домики, виллы, шале и др.",
        explore_exceptional:"Отлично",
        explore_tab_city:"Город",explore_tab_beach:"Пляж",explore_tab_outdoor:"Природа",explore_tab_romance:"Романтика",explore_tab_food:"Еда",
        footer_copy:"© StayWorld — stayworldbooking.com"}
  };

  const CURRENCIES = {
    USD:{symbol:'$',rate:1,locale:'en-US',name:'USD'}, EUR:{symbol:'€',rate:0.92,locale:'fr-FR',name:'EUR'},
    KRW:{symbol:'₩',rate:1300,locale:'ko-KR',name:'KRW'}, JPY:{symbol:'¥',rate:155,locale:'ja-JP',name:'JPY'},
    CNY:{symbol:'¥',rate:7.2,locale:'zh-CN',name:'CNY'}, TRY:{symbol:'₺',rate:33,locale:'tr-TR',name:'TRY'},
    RUB:{symbol:'₽',rate:90,locale:'ru-RU',name:'RUB'}, GBP:{symbol:'£',rate:0.78,locale:'en-GB',name:'GBP'},
    AED:{symbol:'د.إ',rate:3.67,locale:'ar-AE',name:'AED'}, CAD:{symbol:'$',rate:1.36,locale:'en-CA',name:'CAD'}
  };
  const LANG_TO_CUR = { EN:'USD', KO:'KRW', JA:'JPY', ZH:'CNY', FR:'EUR', ES:'EUR', DE:'EUR', TR:'TRY', AR:'AED', RU:'RUB' };

  function t(k){ const lang = localStorage.getItem('sw_lang') || 'EN'; const dict = I18N[lang]||I18N.EN; return dict[k] || (I18N.EN[k]||k); }
  function applyI18N(){
    const lang = localStorage.getItem('sw_lang') || 'EN';
    document.getElementById('langSel').value = lang;
    const dict = I18N[lang]||I18N.EN;
    document.querySelectorAll('[data-i18n]').forEach(el=>{ const k=el.getAttribute('data-i18n'); if(dict[k]) el.textContent=dict[k];});
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el=>{ const k=el.getAttribute('data-i18n-placeholder'); if(dict[k]) el.setAttribute('placeholder', dict[k]);});
  }

  document.getElementById('langSel').addEventListener('change', (e)=>{
    localStorage.setItem('sw_lang', e.target.value);
    setCurrencyByLang(e.target.value);
    applyI18N();
  });

  function setCurrencyByLang(lang){ localStorage.setItem('sw_cur', LANG_TO_CUR[lang]||'USD'); }
  function fmtMoneyUSDToLocal(usd){ const code = localStorage.getItem('sw_cur')||'USD'; const cur=CURRENCIES[code]||CURRENCIES.USD; const val=usd*cur.rate; return new Intl.NumberFormat(cur.locale,{style:'currency',currency:cur.name,maximumFractionDigits:0}).format(val); }

  /* ========================= Auth (robust stubs) ========================= */
  const Auth = {
    isLogged(){ return localStorage.getItem('sw_logged')==='1'; },
    login(type){ // type: user|host|google
      try{ localStorage.setItem('sw_logged','1'); localStorage.setItem('sw_login_type', type||'user'); }catch(_){ }
      renderAuth();
    },
    logout(){ try{ localStorage.removeItem('sw_logged'); localStorage.removeItem('sw_login_type'); }catch(_){}
      renderAuth(); }
  };

  function renderAuth(){
    const logged = Auth.isLogged();
    document.getElementById('loginBtn').style.display = logged ? 'none' : '';
    document.getElementById('logoutBtn').style.display = logged ? '' : 'none';
  }
  document.getElementById('logoutBtn').addEventListener('click', (e)=>{ e.preventDefault(); Auth.logout(); alert('Logged out'); });

  // Example: attach these from your login pages
  window.googleLogin = async function(){
    try{
      const r = await fetch('/api/auth/google', {method:'POST',credentials:'include'});
      if(r.ok){ Auth.login('google'); return; }
    }catch(_){ /* network fail -> fallback */ }
    // Fallback (no backend): simulate success
    Auth.login('google');
  };
  window.userLogin = ()=> Auth.login('user');
  window.hostLogin = ()=> Auth.login('host');

  /* ========================= Map + Search ========================= */
  let map, marker; 
  function initMap(){ map=L.map('map',{scrollWheelZoom:true}).setView([48.8566,2.3522],12); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap'}).addTo(map); }
  function goTo(lat,lon,label){ if(marker) marker.remove(); marker=L.marker([lat,lon]).addTo(map).bindPopup(label||'').openPopup(); map.setView([lat,lon],13,{animate:true}); document.getElementById('map').scrollIntoView({behavior:'smooth',block:'start'}); }
  async function geocodeAny(q){ const prov=[q=>`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(q)}`,q=>`https://photon.komoot.io/api/?limit=1&q=${encodeURIComponent(q)}`]; for(const make of prov){ try{ const r=await fetch(make(q),{headers:{'Accept':'application/json'}}); if(!r.ok) continue; const data=await r.json(); if(Array.isArray(data)&&data[0]) return {lat:+data[0].lat,lon:+data[0].lon,label:data[0].display_name||q}; if(data?.features?.[0]){const f=data.features[0];return {lat:f.geometry.coordinates[1],lon:f.geometry.coordinates[0],label:f.properties.name||f.properties.city||f.properties.country||q};} }catch(_){ } } throw new Error('no_results'); }
  const statusEl=document.getElementById('searchStatus');
  function setStatus(msg){ statusEl.textContent=msg||''; statusEl.style.opacity=msg?1:0; if(msg){clearTimeout(statusEl._t); statusEl._t=setTimeout(()=>statusEl.style.opacity=0,3000);} }
  function setLoading(on){ const b=document.getElementById('btnSearch'); b.disabled=on; b.classList.toggle('loading',on); b.textContent=on?'…':t('search'); }
  async function runSearch(){ const q=(document.getElementById('searchDestination').value||'').trim(); if(!q){document.getElementById('searchDestination').focus(); return;} try{ setLoading(true); setStatus('Searching…'); const {lat,lon,label}=await geocodeAny(q); goTo(lat,lon,label); setStatus(`Found: ${label}`);} catch(_){ setStatus('No results. Try another place.'); alert('검색 결과가 없습니다. 다른 도시를 입력해보세요.'); } finally{ setLoading(false); } }

  document.getElementById('btnSearch').addEventListener('click',runSearch,{capture:true});
  ;['searchDestination','checkIn','checkOut'].forEach(id=>{const el=document.getElementById(id); el&&el.addEventListener('keydown',e=>{if(e.key==='Enter') runSearch();});});

  /* ========================= Filters Drawer (self-contained) ========================= */
  const GROUPS=[
    {t:'f_price', kind:'price'},
    {t:'f_staytype', checks:['Hotel','Motel','Hostel','Apartment','Villa','Ryokan','Guesthouse','B&B']},
    {t:'f_review', radios:['4.5+','4.0+','Any']},
    {t:'f_beds', inputs:[['number','beds',{min:1,value:1}],['number','baths',{min:1,value:1}]]},
    {t:'f_amen', checks:['Wi-Fi','Kitchen','Parking','Pool','Air conditioning','Gym','Workspace','Washer','Dryer','Breakfast']},
  ];

  function ensureDrawer(){
    let d=document.getElementById('filterDrawer'); if(d) return d;
    d=document.createElement('div'); d.id='filterDrawer'; d.setAttribute('aria-hidden','true'); d.style.cssText='position:fixed;inset:0;display:none;z-index:2147483637';
    d.innerHTML=`<div class="back" style="position:absolute;inset:0;background:rgba(0,0,0,.45)"></div>
      <div class="panel" style="position:relative;margin-left:auto;width:min(780px,92vw);max-height:92vh;overflow:auto;background:var(--panel);border-left:1px solid var(--line);border-top-left-radius:16px;border-bottom-left-radius:16px;display:flex;flex-direction:column">
        <div class="head" style="display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--line)">
          <strong id="fTitle">Filters</strong>
          <div style="display:flex;gap:8px;align-items:center">
            <label for="currencySelect" id="curLabel" style="font-size:12px;opacity:.8">Currency</label>
            <select id="currencySelect" class="lang-select" style="padding:6px 10px">
              ${Object.keys(CURRENCIES).map(k=>`<option value="${k}">${k}</option>`).join('')}
            </select>
            <button id="swClose" class="btn btn-ghost">✕</button>
          </div>
        </div>
        <div id="filterGrid" style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px;padding:14px"></div>
        <div class="foot" style="display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-top:1px solid var(--line)">
          <button id="swReset" class="btn btn-ghost">Reset</button>
          <button id="swApply" class="btn btn-gold">Apply</button>
        </div>
      </div>`;
    document.body.appendChild(d);

    const grid=d.querySelector('#filterGrid');
    GROUPS.forEach((g,gi)=>{
      const box=document.createElement('div'); box.className='box'; box.style.cssText='background:#0f1420;border:1px solid var(--line);border-radius:12px;padding:12px';
      box.innerHTML=`<h4 data-title="${g.t}" style="margin:0 0 8px;font-size:14px">${t(g.t)||g.t}</h4>`;
      if(g.kind==='price'){
        const html=`<div style="display:grid;gap:10px">
            <div style="display:flex;justify-content:space-between;font-size:13px"><span>${t('f_price')||'Price per night'}</span>
              <span><span id="priceMinVal">–</span> ~ <span id="priceMaxVal">–</span></span></div>
            <label style="font-size:12px;opacity:.8">Min</label><input type="range" id="priceMin" min="0" max="1000" step="10" value="100">
            <label style="font-size:12px;opacity:.8">Max</label><input type="range" id="priceMax" min="0" max="5000" step="50" value="800">
          </div>`; box.insertAdjacentHTML('beforeend', html);
      }
      (g.inputs||[]).forEach(([type,id,attrs])=>{ const wrap=document.createElement('div'); wrap.style.margin='6px 0'; wrap.innerHTML=`<label style="font-size:12px">${id}</label><input type="${type}" id="${id}" style="width:100%">`; Object.entries(attrs||{}).forEach(([k,v])=>wrap.querySelector('input').setAttribute(k,v)); box.appendChild(wrap); });
      (g.radios||[]).forEach((name,ri)=>{ const id=`rg_${gi}_${ri}`; const lab=document.createElement('label'); lab.style.cssText='display:inline-flex;align-items:center;gap:6px;margin:6px 10px 0 0'; lab.innerHTML=`<input type="radio" name="rg_${gi}" id="${id}" ${/Any/i.test(name)?'checked':''}> <span>${name}</span>`; box.appendChild(lab); });
      (g.checks||[]).forEach((name,ci)=>{ const id=`ck_${gi}_${ci}`; const lab=document.createElement('label'); lab.style.cssText='display:inline-flex;align-items:center;gap:6px;margin:6px 10px 0 0'; lab.innerHTML=`<input type="checkbox" id="${id}"> <span>${name}</span>`; box.appendChild(lab); });
      grid.appendChild(box);
    });

    const back=d.querySelector('.back'); const panel=d.querySelector('.panel');
    function open(){ d.style.display='flex'; setTimeout(()=>d.setAttribute('aria-hidden','false'),0); }
    function close(){ d.setAttribute('aria-hidden','true'); d.style.display='none'; }
    back.addEventListener('click', close); d.querySelector('#swClose').addEventListener('click', close); panel.addEventListener('click', e=>e.stopPropagation());
    d.querySelector('#swReset').addEventListener('click',()=>{ d.querySelectorAll('input[type=checkbox]').forEach(i=>i.checked=false); d.querySelectorAll('input[type=radio]').forEach(i=>i.checked=/Any/i.test(i.nextSibling?.textContent||'Any')); document.getElementById('priceMin').value=100; document.getElementById('priceMax').value=800; updatePriceLabels(); });
    d.querySelector('#swApply').addEventListener('click',close);
    d.querySelector('#currencySelect').addEventListener('change',()=>{ localStorage.setItem('sw_cur', d.querySelector('#currencySelect').value); updatePriceLabels(); });
    ['priceMin','priceMax'].forEach(id=>{ d.querySelector('#'+id).addEventListener('input',()=>{ const min=+d.querySelector('#priceMin').value; const max=+d.querySelector('#priceMax').value; if(min>max){ d.querySelector('#priceMin').value=max; } updatePriceLabels(); }); });

    setCurrencyByLang(localStorage.getItem('sw_lang')||'EN'); updatePriceLabels();
    d.open = open; d.close = close; return d;
  }
  function updatePriceLabels(){ const d=document.getElementById('filterDrawer'); if(!d) return; const min=+d.querySelector('#priceMin').value||0; const max=+d.querySelector('#priceMax').value||0; d.querySelector('#priceMinVal').textContent = fmtMoneyUSDToLocal(min); d.querySelector('#priceMaxVal').textContent = fmtMoneyUSDToLocal(max); }
  document.getElementById('btnFilters').addEventListener('click',()=>{ const d=ensureDrawer(); applyI18N(); d.open(); });

  /* ========================= Explore interactions ========================= */
  (function(){
    const row = document.querySelector('.sw-row'); if(!row) return; const track=row.querySelector('.sw-track'); const prev=row.querySelector('.prev'); const next=row.querySelector('.next');
    const step = () => Math.min(360, track.clientWidth * 0.85);
    prev.addEventListener('click', ()=> track.scrollBy({left:-step(), behavior:'smooth'}));
    next.addEventListener('click', ()=> track.scrollBy({left: step(), behavior:'smooth'}));
    let isDown=false,startX=0,scrollLeft=0; track.addEventListener('pointerdown',e=>{isDown=true;startX=e.pageX;scrollLeft=track.scrollLeft;track.setPointerCapture(e.pointerId);}); track.addEventListener('pointermove',e=>{if(!isDown)return; const dx=e.pageX-startX; track.scrollLeft=scrollLeft-dx;}); track.addEventListener('pointerup',()=>isDown=false);
    track.addEventListener('click',e=>{ if(e.target.classList.contains('sw-like')) e.target.classList.toggle('active'); });
    const tabs = document.querySelector('.sw-tabs'); const spots = document.querySelectorAll('.sw-spot');
    tabs?.addEventListener('click', (e)=>{ const btn=e.target.closest('button'); if(!btn) return; tabs.querySelectorAll('button').forEach(b=>b.classList.remove('is-active')); btn.classList.add('is-active'); const type=btn.dataset.filter; spots.forEach(s=>{ s.style.display = (!type || s.dataset.type===type)?'block':'none'; }); });
  })();

  /* ========================= Init ========================= */
  (function init(){
    const savedLang = localStorage.getItem('sw_lang') || (navigator.language||'en').slice(0,2).toUpperCase();
    if(!localStorage.getItem('sw_lang')) localStorage.setItem('sw_lang', I18N[savedLang]?savedLang:'EN');
    setCurrencyByLang(localStorage.getItem('sw_lang'));
    applyI18N(); renderAuth(); initMap();
  })();
  </script>
</body>
</html>

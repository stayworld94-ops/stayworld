<!doctype html>
<html lang="en" class="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>StayWorld — Luxury Global Reach</title>
  <link rel="icon" href="/assets/img/logo-stayworld.png" />

  <style>
    :root{
      --bg:#0b0f16;--panel:#101018;--text:#e7e9ee;--muted:#cfd6e6;--line:rgba(255,255,255,.08);
      --chip:#121a26;--gold1:#f4d78c;--gold2:#c9a35b
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,Inter,Segoe UI,Roboto,sans-serif;line-height:1.5}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:1200px;margin:0 auto;padding:0 16px}
    .btn{border:0;cursor:pointer;border-radius:12px;padding:10px 14px}
    .btn-ghost{background:transparent;border:1px solid var(--line)}
    .btn-chip{background:var(--chip);border:1px solid var(--line)}
    .btn-gold{background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#1c1203;font-weight:700;box-shadow:0 8px 26px rgba(201,163,91,.35)}
    .pill{border:1px solid var(--line);border-radius:999px;padding:8px 12px;display:inline-flex;gap:8px;align-items:center}

    /* Header */
    header{position:sticky;top:0;z-index:50;background:rgba(11,15,22,.9);backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
    .hdr{height:64px;display:flex;align-items:center;justify-content:space-between;gap:14px}
    .brand{display:flex;align-items:center;gap:10px}
    .brand img{height:28px}
    nav{display:flex;gap:18px;align-items:center}
    .right{display:flex;gap:10px;align-items:center}
    .hide{display:none !important}

    /* Welcome bar */
    .welcome-bar{display:none;background:#0f1621;border-bottom:1px solid var(--line)}
    .welcome-wrap{max-width:1200px;margin:0 auto;padding:8px 16px;display:flex;align-items:center;gap:10px}
    .notif-btn{position:relative}
    .notif-badge{position:absolute;top:-6px;right:-6px;background:#ff5a5a;color:#fff;border-radius:999px;font-size:11px;padding:2px 6px}

    /* Notification panel */
    .notif-panel{position:absolute;right:0;top:46px;width:min(340px,92vw);background:#101018;border:1px solid var(--line);border-radius:12px;box-shadow:0 18px 50px rgba(0,0,0,.45);display:none}
    .notif-panel .notif-header{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--line)}
    .notif-panel .notif-list{list-style:none;margin:0;padding:0;max-height:320px;overflow:auto}
    .notif-panel .notif-item{display:flex;gap:10px;padding:10px 12px;border-bottom:1px solid var(--line)}
    .notif-panel .notif-item:last-child{border-bottom:0}
    .notif-panel .notif-footer{padding:10px 12px;border-top:1px solid var(--line);text-align:right}

    /* Hero */
    .hero{padding:70px 0 40px;background:
      radial-gradient(1200px 500px at 20% -10%,rgba(244,215,140,.12),transparent),
      radial-gradient(1000px 600px at 100% 0,rgba(78,94,130,.18),transparent)}
    .hero h1{font-size:56px;margin:0 0 10px;line-height:1.05}
    .accent{color:#f1cf84}
    .sub{opacity:.85}
    .search{display:grid;grid-template-columns:1.2fr .8fr .8fr auto auto;gap:10px;margin-top:20px}
    .ipt{background:#0f1621;border:1px solid var(--line);padding:12px 14px;border-radius:12px;color:var(--text)}

    /* Cards */
    .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .grid4{display:grid;grid-template-columns:repeat(4,1fr);gap:14px}
    .card{background:#0f1420;border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 8px 30px rgba(0,0,0,.25)}
    .card-media{height:180px;background:#111820;border-radius:12px;margin-bottom:10px;overflow:hidden}
    .card-media img{width:100%;height:100%;object-fit:cover}

    /* Featured block (with skeleton) */
    .featured{padding:20px 0}
    .skeleton-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .sk-card{border:1px solid var(--line);border-radius:16px;overflow:hidden;background:rgba(255,255,255,.03)}
    .sk-media{height:160px;background:rgba(255,255,255,.06);animation:pulse 1.2s infinite}
    .sk-body{padding:12px}
    .sk-line{height:12px;background:rgba(255,255,255,.06);border-radius:8px;margin:6px 0;animation:pulse 1.2s infinite}
    @keyframes pulse{0%{opacity:.5}50%{opacity:.9}100%{opacity:.5}}

    /* Chatbot */
    #chatFab{position:fixed;right:20px;bottom:20px;width:56px;height:56px;border-radius:50%;border:0;cursor:pointer;z-index:40;background:linear-gradient(180deg,var(--gold1),var(--gold2));box-shadow:0 14px 30px rgba(201,163,91,.35);font-size:22px}
    #botPanel{position:fixed;right:20px;bottom:86px;width:min(360px,88vw);height:480px;background:#101018;border:1px solid #23232b;border-radius:16px;z-index:39;display:none;box-shadow:0 20px 60px rgba(0,0,0,.5);color:var(--text)}
    #botPanel .hdr{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--line)}
    #botPanel .body{height:360px;overflow:auto;padding:10px;display:flex;flex-direction:column;gap:8px}
    #botPanel .row{display:flex;gap:8px;padding:10px;border-top:1px solid var(--line)}
    .msg{max-width:80%;padding:10px 12px;border-radius:12px}
    .me{align-self:flex-end;background:#132132}
    .ai{align-self:flex-start;background:#121820}

    /* Filter Drawer */
    #filterDrawer{position:fixed;inset:0;display:none;z-index:60;align-items:stretch;justify-content:flex-end}
    #filterDrawer[aria-hidden="false"]{display:flex}
    #filterDrawer .back{position:absolute;inset:0;background:rgba(0,0,0,.45)}
    #filterDrawer .panel{position:relative;margin-left:auto;width:min(780px,92vw);max-height:92vh;overflow:auto;background:#0f1420;border-left:1px solid var(--line);border-top-left-radius:16px;border-bottom-left-radius:16px;display:flex;flex-direction:column}
    #filterDrawer .head,#filterDrawer .foot{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--line)}
    #filterDrawer .foot{border-bottom:0;border-top:1px solid var(--line)}
    #filterGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px;padding:14px}
    #filterDrawer .box{background:#0f1320;border:1px solid var(--line);border-radius:12px;padding:12px}
    #filterDrawer h4{margin:0 0 8px;font-size:14px}
    .sw-badge{position:absolute;top:-8px;right:-8px;background:#ffd36e;color:#1a1205;border-radius:999px;font-size:11px;padding:2px 6px}

    footer{margin-top:40px;padding:24px 0;border-top:1px solid var(--line);opacity:.85;text-align:center}

    @media(max-width:920px){nav{display:none}.hero h1{font-size:42px}.search{grid-template-columns:1fr 1fr 1fr auto}}
    @media(max-width:640px){.hero h1{font-size:34px}.grid3,.grid4{grid-template-columns:1fr}.search{grid-template-columns:1fr;gap:8px}}
  </style>
</head>
<body>
  <!-- ====== HEADER ====== -->
<header>
  <div class="container hdr">
    <!-- 좌측: 로고 -->
    <a class="brand" href="/"><img src="/assets/img/logo-stayworld.png" alt="StayWorld Logo"/><strong>STAYWORLD</strong></a>

    <!-- 내비 -->
    <nav>
      <a href="/" data-i18n="nav_home">Home</a>
      <a href="/membership.html" data-i18n="nav_membership">Membership</a>
      <a href="/hotels.html" data-i18n="nav_hotels">Hotels</a>
    </nav>

    <!-- 우측: 언어/통화/알림/인증 -->
    style
      <div class="lang-currency">
        <label class="pill"><span data-i18n="language">Language</span><select id="lang"></select></label>
        <label class="pill"><span>FX</span><select id="currency"></select></label>
      </div>

      <!-- 로그인 후에만 보이는 알림 버튼 -->
      <button class="btn btn-chip notif-btn hide" id="notifBtn" aria-label="Notifications" title="Notifications">
        🔔 <span class="notif-badge hide" id="notifBadge">0</span>
      </button>

      <!-- 로그인 전 -->
      <div id="authGuest" class="auth-buttons">
        <a href="/login.html" class="btn btn-ghost" data-i18n="nav_login">Log in</a>
        <a href="/signup.html" class="btn btn-gold" data-i18n="nav_signup">Sign up</a>
        <a href="/host-login.html" class="btn btn-ghost" data-i18n="nav_host_login">Host login</a>
      </div>

      <!-- 로그인 후 -->
      <div id="authUser" class="auth-user hide">
        <span id="welcomeMini" class="pill"></span>
        <a href="#" id="logoutBtn" class="btn btn-ghost" data-i18n="nav_logout">Logout</a>
      </div>

      <!-- 알림 패널 -->
      <div class="notif-panel" id="notifPanel" role="dialog" aria-modal="true" aria-label="Notifications">
        <div class="notif-header">
          <span>Notifications</span>
          <button id="markAllReadBtn" class="btn btn-ghost">Mark all read</button>
        </div>
        <ul id="notifList" class="notif-list"></ul>
        <div class="notif-footer"><a href="/notifications.html">View all</a></div>
      </div>
    </div>
  </div>
</header>

  <!-- 로그인 후에만 뜨는 환영 바 -->
  <div class="welcome-bar" id="welcomeBar">
    <div class="welcome-wrap">
      <span class="welcome-text" id="welcomeText">Welcome, <strong>Guest</strong> 🎉</span>
    </div>
  </div>

  <!-- ====== HERO ====== -->
  <section class="hero">
    <div class="container">
      <h1><span data-i18n="hero_luxury">Luxury stays.</span><br><span class="accent" data-i18n="hero_reach">Global reach.</span></h1>
      <p class="sub" data-i18n="hero_sub">Cards, bank transfer & crypto (BTC · ETH · USDT).</p>

      <div class="search">
        <input id="q" class="ipt" type="text" placeholder="Paris, Tokyo, Istanbul…" data-i18n-placeholder="placeholder_city"/>
        <input id="ci" class="ipt" type="date" />
        <input id="co" class="ipt" type="date" />
        <button id="btnFilters" class="btn btn-ghost" data-i18n="filters">Filters</button>
        <a class="btn btn-gold" href="/results.html" data-i18n="search">Search</a>
      </div>
    </div>
  </section>

  <!-- ====== FEATURES 3 ====== -->
  <section>
    <div class="container grid3">
      <div class="card"><h3 data-i18n="feat_verified">Verified stays</h3><p data-i18n="feat_verified_sub">Top picks near you.</p></div>
      <div class="card"><h3 data-i18n="feat_rewards">StayWorld+ Rewards</h3><p data-i18n="feat_rewards_sub">Earn points on every booking.</p></div>
      <div class="card"><h3 data-i18n="feat_payments">Secure payments</h3><p data-i18n="feat_payments_sub">Visa, Mastercard, Amex & Crypto.</p></div>
    </div>
  </section>

  <!-- ====== PROMOTION ====== -->
  <section>
    <div class="container card" style="display:flex;align-items:center;justify-content:space-between;gap:14px">
      <div>
        <h3>🎉 <span data-i18n="promo_title">New members: 10% off your first stay</span></h3>
        <p data-i18n="promo_sub">Join to earn points & unlock perks.</p>
      </div>
      <a href="/membership.html" class="btn btn-gold" data-i18n="promo_cta">Join now</a>
    </div>
  </section>

  <!-- ====== FEATURED LISTINGS (with skeleton) ====== -->
  <section class="featured">
    <div class="container">
      <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
        <h2>✨ <span data-i18n="featured_title">Featured stays</span></h2>
        <a href="/results.html" class="btn btn-chip" data-i18n="view_all">View all</a>
      </div>

      <div id="recosSkeleton" class="skeleton-grid">
        <div class="sk-card"><div class="sk-media"></div><div class="sk-body"><div class="sk-line" style="width:70%"></div><div class="sk-line" style="width:40%"></div><div class="sk-line" style="width:30%"></div></div></div>
        <div class="sk-card"><div class="sk-media"></div><div class="sk-body"><div class="sk-line" style="width:70%"></div><div class="sk-line" style="width:40%"></div><div class="sk-line" style="width:30%"></div></div></div>
        <div class="sk-card"><div class="sk-media"></div><div class="sk-body"><div class="sk-line" style="width:70%"></div><div class="sk-line" style="width:40%"></div><div class="sk-line" style="width:30%"></div></div></div>
      </div>

      <div id="recosGrid" class="grid3" style="display:none"></div>
    </div>
  </section>

  <!-- ====== EXPLORE ====== -->
  <section>
    <div class="container">
      <h2 data-i18n="explore.unique_title">Stays you'll want to try once</h2>
      <p data-i18n="explore.unique_sub">Find cabins, villas, chalets and more</p>
      <div class="grid4">
        <div class="card">
          <div class="card-media"><img src="https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1200&auto=format&fit=crop" alt=""></div>
          <h4>Forest Cabin</h4>
        </div>
        <div class="card">
          <div class="card-media"><img src="https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?q=80&w=1200&auto=format&fit=crop" alt=""></div>
          <h4>Alpine Chalet</h4>
        </div>
        <div class="card">
          <div class="card-media"><img src="https://images.unsplash.com/photo-1528909514045-2fa4ac7a08ba?q=80&w=1200&auto=format&fit=crop" alt=""></div>
          <h4>Beach Villa</h4>
        </div>
        <div class="card">
          <div class="card-media"><img src="https://images.unsplash.com/photo-1506126613408-eca07ce68773?q=80&w=1200&auto=format&fit=crop" alt=""></div>
          <h4>City Loft</h4>
        </div>
      </div>
    </div>
  </section>

  <!-- ====== REVIEWS ====== -->
  <section>
    <div class="container">
      <h2>⭐ Guest Reviews</h2>
      <div class="grid3">
        <div class="card">“Amazing stay, felt like home.” — Anna 🇫🇷</div>
        <div class="card">“Super clean and great location.” — Ken 🇯🇵</div>
        <div class="card">“Would book again, 10/10.” — Maria 🇪🇸</div>
      </div>
    </div>
  </section>

  <!-- ====== MEMBERSHIP ====== -->
  <section>
    <div class="container card" style="text-align:center">
      <h2>StayWorld+ Membership</h2>
      <p>Earn points, enjoy perks, unlock exclusive deals.</p>
      <a href="/membership.html" class="btn btn-gold">Explore Membership</a>
    </div>
  </section>

  <!-- ====== APP DOWNLOAD ====== -->
  <section>
    <div class="container grid3">
      <div>
        <h2>📱 Download the app</h2>
        <p>Book stays, track rewards, chat with hosts — all in one place.</p>
        <div style="display:flex;gap:12px;margin-top:10px">
          <img src="/assets/img/appstore.png" alt="App Store" style="height:40px">
          <img src="/assets/img/playstore.png" alt="Google Play" style="height:40px">
        </div>
      </div>
      <img src="/assets/img/app-preview.png" alt="App preview" style="grid-column:span 2;max-height:300px;object-fit:contain">
    </div>
  </section>

  <!-- ====== FOOTER ====== -->
  <footer>
    <small data-i18n="footer_copy">© StayWorld — stayworldbooking.com</small>
  </footer>

  <!-- ====== INLINE SCRIPTS (i18n + 통화 + 인증 + 알림 + 드로어 + 챗봇 + 추천) ====== -->
  <script>
  /* ------------------ I18N & 통화 ------------------ */
  const I18N={EN:{nav_home:"Home",nav_membership:"Membership",nav_hotels:"Hotels",nav_login:"Log in",nav_signup:"Sign up",nav_logout:"Logout",nav_host_login:"Host login",language:"Language",
  hero_luxury:"Luxury stays.",hero_reach:"Global reach.",hero_sub:"Cards, bank transfer & crypto (BTC · ETH · USDT).",
  feat_verified:"Verified stays",feat_verified_sub:"Top picks near you.",feat_rewards:"StayWorld+ Rewards",feat_rewards_sub:"Earn points on every booking.",
  feat_payments:"Secure payments",feat_payments_sub:"Visa, Mastercard, Amex & Crypto.",filters:"Filters",placeholder_city:"Paris, Tokyo, Istanbul…",
  promo_title:"New members: 10% off your first stay",promo_sub:"Join to earn points & unlock perks.",promo_cta:"Join now",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"Featured stays",view_all:"View all",
  explore:{unique_title:"Stays you'll want to try once",unique_sub:"Find cabins, villas, chalets and more"}},

  KO:{nav_home:"홈",nav_membership:"멤버십",nav_hotels:"호텔",nav_login:"로그인",nav_signup:"가입하기",nav_logout:"로그아웃",nav_host_login:"호스트 로그인",language:"언어",
  hero_luxury:"럭셔리 스테이.",hero_reach:"글로벌 리치.",hero_sub:"카드, 계좌이체 & 크립토 (BTC · ETH · USDT).",
  feat_verified:"검증된 숙소",feat_verified_sub:"가까운 추천 숙소.",feat_rewards:"StayWorld+ 리워드",feat_rewards_sub:"예약마다 포인트 적립.",
  feat_payments:"안전한 결제",feat_payments_sub:"VISA, 마스터, 아멕스 & 크립토.",filters:"필터",placeholder_city:"파리, 도쿄, 이스탄불…",
  promo_title:"신규 회원 첫 예약 10% 할인",promo_sub:"가입하고 포인트 및 혜택을 받으세요.",promo_cta:"지금 가입",
  footer_copy:"© 스테이월드 — stayworldbooking.com",featured_title:"추천 숙소",view_all:"모두 보기",
  explore:{unique_title:"한 번쯤 묵어보고 싶은 숙소",unique_sub:"캐빈, 빌라, 샬레 등 특별한 숙소를 찾아보세요"}},

  FR:{nav_home:"Accueil",nav_membership:"Adhésion",nav_hotels:"Hôtels",nav_login:"Connexion",nav_signup:"S’inscrire",nav_logout:"Déconnexion",nav_host_login:"Connexion hôte",language:"Langue",
  hero_luxury:"Séjours de luxe.",hero_reach:"Portée mondiale.",hero_sub:"Carte, virement & crypto (BTC · ETH · USDT).",
  feat_verified:"Logements vérifiés",feat_verified_sub:"Meilleurs choix près de chez vous.",feat_rewards:"Récompenses StayWorld+",feat_rewards_sub:"Des points à chaque réservation.",
  feat_payments:"Paiements sécurisés",feat_payments_sub:"Visa, Mastercard, Amex & Crypto.",filters:"Filtres",placeholder_city:"Paris, Tokyo, Istanbul…",
  promo_title:"Nouveaux membres : -10% sur le 1er séjour",promo_sub:"Rejoignez pour des points & avantages.",promo_cta:"Adhérer",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"Séjours mis en avant",view_all:"Tout voir",
  explore:{unique_title:"Séjours à essayer au moins une fois",unique_sub:"Cabanes, villas, chalets et plus"}},

  JA:{nav_home:"ホーム",nav_membership:"メンバーシップ",nav_hotels:"ホテル",nav_login:"ログイン",nav_signup:"登録",nav_logout:"ログアウト",nav_host_login:"ホストログイン",language:"言語",
  hero_luxury:"贅沢な滞在。",hero_reach:"グローバルに。",hero_sub:"カード、振込、暗号資産（BTC・ETH・USDT）。",
  feat_verified:"検証済み",feat_verified_sub:"近くのおすすめ。",feat_rewards:"StayWorld+ リワード",feat_rewards_sub:"予約ごとにポイント。",
  feat_payments:"安全な支払い",feat_payments_sub:"VISA, Master, Amex & Crypto。",filters:"フィルター",placeholder_city:"パリ、東京、イスタンブール…",
  promo_title:"新規会員10%OFF",promo_sub:"参加して特典を獲得。",promo_cta:"今すぐ参加",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"おすすめの宿",view_all:"すべて見る",
  explore:{unique_title:"一度は泊まりたい宿",unique_sub:"キャビン、ヴィラ、シャレーなど"}},

  DE:{nav_home:"Start",nav_membership:"Mitgliedschaft",nav_hotels:"Hotels",nav_login:"Login",nav_signup:"Registrieren",nav_logout:"Abmelden",nav_host_login:"Gastgeber-Login",language:"Sprache",
  hero_luxury:"Luxuriöse Aufenthalte.",hero_reach:"Globale Reichweite.",hero_sub:"Karten, Überweisung & Krypto (BTC · ETH · USDT).",
  feat_verified:"Verifizierte Unterkünfte",feat_verified_sub:"Top-Auswahl in deiner Nähe.",feat_rewards:"StayWorld+ Prämien",feat_rewards_sub:"Punkte bei jeder Buchung.",
  feat_payments:"Sichere Zahlungen",feat_payments_sub:"Visa, Mastercard, Amex & Krypto.",filters:"Filter",placeholder_city:"Paris, Tokio, Istanbul…",
  promo_title:"Neu: 10% auf den 1. Aufenthalt",promo_sub:"Punkte & Vorteile sichern.",promo_cta:"Jetzt beitreten",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"Empfohlene Unterkünfte",view_all:"Alle anzeigen",
  explore:{unique_title:"Unterkünfte, die man probieren will",unique_sub:"Hütten, Villen, Chalets u. a."}},

  ES:{nav_home:"Inicio",nav_membership:"Membresía",nav_hotels:"Hoteles",nav_login:"Ingresar",nav_signup:"Regístrate",nav_logout:"Cerrar sesión",nav_host_login:"Acceso anfitrión",language:"Idioma",
  hero_luxury:"Estancias de lujo.",hero_reach:"Alcance global.",hero_sub:"Tarjetas, transferencia y cripto (BTC · ETH · USDT).",
  feat_verified:"Alojamientos verificados",feat_verified_sub:"Mejores cerca de ti.",feat_rewards:"Recompensas StayWorld+",feat_rewards_sub:"Puntos en cada reserva.",
  feat_payments:"Pagos seguros",feat_payments_sub:"Visa, Mastercard, Amex y Cripto.",filters:"Filtros",placeholder_city:"París, Tokio, Estambul…",
  promo_title:"-10% en tu primera reserva",promo_sub:"Únete para ganar puntos.",promo_cta:"Únete ahora",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"Alojamientos destacados",view_all:"Ver todo",
  explore:{unique_title:"Estancias para probar alguna vez",unique_sub:"Cabañas, villas, chalés"}},

  IT:{nav_home:"Home",nav_membership:"Abbonamento",nav_hotels:"Hotel",nav_login:"Accedi",nav_signup:"Registrati",nav_logout:"Esci",nav_host_login:"Accesso host",language:"Lingua",
  hero_luxury:"Soggiorni di lusso.",hero_reach:"Portata globale.",hero_sub:"Carte, bonifico & cripto (BTC · ETH · USDT).",
  feat_verified:"Alloggi verificati",feat_verified_sub:"Scelte top vicino a te.",feat_rewards:"StayWorld+ Ricompense",feat_rewards_sub:"Punti ad ogni prenotazione.",
  feat_payments:"Pagamenti sicuri",feat_payments_sub:"Visa, Mastercard, Amex & Cripto.",filters:"Filtri",placeholder_city:"Parigi, Tokyo, Istanbul…",
  promo_title:"-10% primo soggiorno",promo_sub:"Unisciti per vantaggi.",promo_cta:"Iscriviti ora",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"Strutture in evidenza",view_all:"Vedi tutto",
  explore:{unique_title:"Soggiorni da provare",unique_sub:"Cabine, ville, chalet"}},

  TR:{nav_home:"Ana Sayfa",nav_membership:"Üyelik",nav_hotels:"Oteller",nav_login:"Giriş",nav_signup:"Kaydol",nav_logout:"Çıkış",nav_host_login:"Ev Sahibi Girişi",language:"Dil",
  hero_luxury:"Lüks konaklamalar.",hero_reach:"Küresel erişim.",hero_sub:"Kart, havale ve kripto (BTC · ETH · USDT).",
  feat_verified:"Doğrulanmış konaklamalar",feat_verified_sub:"Yakınınızdaki en iyiler.",feat_rewards:"StayWorld+ Ödülleri",feat_rewards_sub:"Her rezervasyonda puan.",
  feat_payments:"Güvenli ödemeler",feat_payments_sub:"Visa, Mastercard, Amex & Kripto.",filters:"Filtreler",placeholder_city:"Paris, Tokyo, İstanbul…",
  promo_title:"İlk konaklamada %10",promo_sub:"Katıl, puan ve ayrıcalık kazan.",promo_cta:"Hemen katıl",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"Öne çıkan konaklamalar",view_all:"Tümünü gör",
  explore:{unique_title:"En az bir kez kalınacak yerler",unique_sub:"Kabin, villa, dağ evi"}},

  ZH:{nav_home:"首页",nav_membership:"会员",nav_hotels:"酒店",nav_login:"登录",nav_signup:"注册",nav_logout:"退出",nav_host_login:"房东登录",language:"语言",
  hero_luxury:"奢华住宿。",hero_reach:"全球覆盖。",hero_sub:"银行卡、转账与加密货币（BTC · ETH · USDT）。",
  feat_verified:"已验证房源",feat_verified_sub:"附近精选。",feat_rewards:"StayWorld+ 奖励",feat_rewards_sub:"每次预订赚积分。",
  feat_payments:"安全支付",feat_payments_sub:"Visa、Mastercard、Amex 与加密货币。",filters:"筛选",placeholder_city:"巴黎、东京、伊斯坦布尔…",
  promo_title:"新会员首住9折",promo_sub:"加入赚积分拿礼遇。",promo_cta:"立即加入",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"精选房源",view_all:"查看全部",
  explore:{unique_title:"值得一住的特色房源",unique_sub:"寻找木屋、别墅、山庄等"}},

  RU:{nav_home:"Главная",nav_membership:"Подписка",nav_hotels:"Отели",nav_login:"Войти",nav_signup:"Регистрация",nav_logout:"Выйти",nav_host_login:"Вход хоста",language:"Язык",
  hero_luxury:"Роскошное проживание.",hero_reach:"Глобальный охват.",hero_sub:"Карты, перевод и крипто (BTC · ETH · USDT).",
  feat_verified:"Проверенные варианты",feat_verified_sub:"Лучшие рядом с вами.",feat_rewards:"Бонусы StayWorld+",feat_rewards_sub:"Баллы за каждое бронирование.",
  feat_payments:"Безопасные платежи",feat_payments_sub:"Visa, Mastercard, Amex и крипто.",filters:"Фильтры",placeholder_city:"Париж, Токио, Стамбул…",
  promo_title:"-10% на первый заезд",promo_sub:"Копите баллы и привилегии.",promo_cta:"Присоединиться",
  footer_copy:"© StayWorld — stayworldbooking.com",featured_title:"Рекомендованные",view_all:"Показать все",
  explore:{unique_title:"Места, которые стоит попробовать",unique_sub:"Домики, виллы, шале"}}};

  const CURRENCIES={USD:{symbol:'$',rate:1,locale:'en-US',name:'USD'},
  KRW:{symbol:'₩',rate:1300,locale:'ko-KR',name:'KRW'},
  EUR:{symbol:'€',rate:0.92,locale:'fr-FR',name:'EUR'},
  TRY:{symbol:'₺',rate:33,locale:'tr-TR',name:'TRY'},
  JPY:{symbol:'¥',rate:155,locale:'ja-JP',name:'JPY'},
  CNY:{symbol:'¥',rate:7.2,locale:'zh-CN',name:'CNY'},
  RUB:{symbol:'₽',rate:90,locale:'ru-RU',name:'RUB'},
  GBP:{symbol:'£',rate:0.78,locale:'en-GB',name:'GBP'},
  CAD:{symbol:'$',rate:1.36,locale:'en-CA',name:'CAD'},
  AUD:{symbol:'$',rate:1.52,locale:'en-AU',name:'AUD'}};

  const LANG_TO_CUR={EN:'USD',KO:'KRW',FR:'EUR',JA:'JPY',DE:'EUR',ES:'EUR',IT:'EUR',TR:'TRY',ZH:'CNY',RU:'RUB'};

  function currentLang(){return localStorage.getItem('sw_lang')||'EN';}
  function setLang(v){localStorage.setItem('sw_lang',v);}
  function money(usd){const cur=document.getElementById('currency')?.value||'USD';const meta=CURRENCIES[cur]||CURRENCIES.USD;const val=usd*meta.rate;return new Intl.NumberFormat(meta.locale,{style:'currency',currency:meta.name,maximumFractionDigits:(meta.name==='JPY'||meta.name==='KRW')?0:0}).format(val);}

  function applyI18NPage(){
    const lang=currentLang();
    const d=I18N[lang]||I18N.EN;
    document.querySelectorAll('[data-i18n]').forEach(el=>{const k=el.getAttribute('data-i18n');const val=d[k]||d.explore?.[k?.split('.').slice(1).join('.')]||I18N.EN[k]||el.textContent;el.textContent=val;});
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el=>{const k=el.getAttribute('data-i18n-placeholder');const val=d[k]||I18N.EN[k]; if(val) el.setAttribute('placeholder',val);});
  }

  /* ------------------ 인증/권한 UI ------------------ */
  function getUser(){try{return JSON.parse(localStorage.getItem('sw_user')||'null');}catch(_){return null;}}
  function setUser(u){if(u)localStorage.setItem('sw_user',JSON.stringify(u)); else localStorage.removeItem('sw_user');}
  function show(el){el&&el.classList.remove('hide');}
  function hide(el){el&&el.classList.add('hide');}

  function applyAuthUI(){
    const user=getUser();
    const guest=document.getElementById('authGuest');
    const userArea=document.getElementById('authUser');
    const welcomeMini=document.getElementById('welcomeMini');
    const welcomeBar=document.getElementById('welcomeBar');
    const welcomeText=document.getElementById('welcomeText');
    const notifBtn=document.getElementById('notifBtn');
    const notifBadge=document.getElementById('notifBadge');

    if(user){
      hide(guest); show(userArea); show(notifBtn);
      welcomeMini.textContent=`Welcome, ${user.name||user.email||'Guest'} 🎉`;
      if(welcomeBar){ welcomeBar.style.display='block'; if(welcomeText) welcomeText.innerHTML=`Welcome, <strong>${user.name||'Guest'}</strong> 🎉`; }
      if(notifBadge){ notifBadge.textContent='3'; notifBadge.classList.remove('hide'); }
    }else{
      show(guest); hide(userArea); if(notifBtn) hide(notifBtn);
      if(welcomeBar) welcomeBar.style.display='none';
    }
  }

  /* ------------------ 언어/통화 초기화 ------------------ */
  function initLangCurrency(){
    const langSel=document.getElementById('lang');
    const curSel=document.getElementById('currency');

    if(langSel){
      const langs=Object.keys(I18N);
      langSel.innerHTML = langs.map(l=>`<option value="${l}">${l}</option>`).join('');
      langSel.value=currentLang();
      langSel.addEventListener('change',e=>{
        setLang(e.target.value);
        if(curSel){ curSel.value=LANG_TO_CUR[e.target.value]||'USD'; }
        applyI18NPage();
      });
    }
    if(curSel){
      const curList=Object.keys(CURRENCIES);
      curSel.innerHTML = curList.map(c=>`<option value="${c}">${c}</option>`).join('');
      if(!curSel.value) curSel.value=LANG_TO_CUR[currentLang()]||'USD';
      curSel.addEventListener('change',()=>document.dispatchEvent(new CustomEvent('sw_currency_change')));
    }
  }

  /* ------------------ 알림 패널 ------------------ */
  (function(){
    const btn=document.getElementById('notifBtn');
    const panel=document.getElementById('notifPanel');
    const badge=document.getElementById('notifBadge');
    const list=document.getElementById('notifList');
    const markAllBtn=document.getElementById('markAllReadBtn');

    if(!btn||!panel) return;

    btn.addEventListener('click',(e)=>{
      e.stopPropagation();
      const opened=panel.style.display==='block';
      document.querySelectorAll('.notif-panel').forEach(p=>p.style.display='none');
      panel.style.display=opened?'none':'block';
    });
    document.addEventListener('click',(e)=>{ if(!panel.contains(e.target) && e.target!==btn){ panel.style.display='none'; }});
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') panel.style.display='none'; });

    function render(items){
      const unread=items.filter(x=>!x.read).length;
      if(badge){badge.textContent=unread?String(unread):'0'; badge.classList.toggle('hide', unread===0);}
      list.innerHTML = items.map(it=>`
        <li class="notif-item" data-id="${it.id}">
          <div style="width:10px;height:10px;border-radius:999px;background:${it.read?'#666':'#ffd36e'};margin-top:6px"></div>
          <div style="flex:1">
            <div style="font-weight:600">${it.title}</div>
            <div style="opacity:.8">${it.desc||''}</div>
          </div>
          <div style="opacity:.7;font-size:12px">${it.time||''}</div>
        </li>
      `).join('') || `<li class="notif-item"><div>No notifications</div></li>`;
    }

    function fetchNotifications(){
      // 실제 API가 없으면 데모 데이터 사용
      const demo = [
        { id:1, title:'Booking confirmed', desc:'Istanbul • 2–5 Sep', time:'2m ago', read:false },
        { id:2, title:'Level progress', desc:'GOLD → 78% reached', time:'1h ago', read:false },
        { id:3, title:'Promo', desc:'Autumn deal unlocked', time:'Yesterday', read:true }
      ];
      render(demo);
    }

    markAllBtn?.addEventListener('click', ()=>{
      // 실제 API 연동 시 여기서 서버에 읽음 반영
      badge && badge.classList.add('hide');
      list.querySelectorAll('.notif-item').forEach(li=>{
        li.querySelector('div[style*="border-radius:999px"]')?.style && (li.querySelector('div[style*="border-radius:999px"]').style.background='#666');
      });
    });

    fetchNotifications();
    setInterval(fetchNotifications, 30000);
  })();

  /* ------------------ 필터 드로어 ------------------ */
  const GROUPS=[
    {t:'Price', kind:'price'},
    {t:'Stay type', checks:['Hotel','Motel','Hostel','Apartment','Villa','Ryokan','Guesthouse','B&B']},
    {t:'Review score', radios:['4.5+','4.0+','Any']},
    {t:'Beds & Baths', inputs:[['number','beds',{min:1,value:1}],['number','baths',{min:1,value:1}]]},
    {t:'Amenities', checks:['Wi-Fi','Kitchen','Parking','Pool','Air conditioning','Gym','Workspace','Washer','Dryer','Breakfast']},
    {t:'Booking', checks:['Instant book','Request to book']},
    {t:'Verification', checks:['Verified listings only','Verified reviews']},
    {t:'Long-stay', checks:['Show long-stay deals']},
    {t:'Business', checks:['B2B-ready','Invoice available']},
    {t:'Location', checks:['Near airport','Near station','Near beach','City center']},
  ];

  function ensureDrawer(){
    let d=document.getElementById('filterDrawer');
    if(!d){
      d=document.createElement('div'); d.id='filterDrawer'; d.setAttribute('aria-hidden','true');
      d.innerHTML=`
        <div class="back"></div>
        <div class="panel">
          <div class="head">
            <strong>Filters</strong>
            <div style="display:flex;gap:8px;align-items:center">
              <label style="font-size:12px;opacity:.8">Currency</label>
              <select id="currencySelectDrawer" class="btn-chip" style="padding:6px 10px">
                ${Object.keys(CURRENCIES).map(k=>`<option value="${k}">${k}</option>`).join('')}
              </select>
              <button id="swClose" class="btn btn-ghost">✕</button>
            </div>
          </div>
          <div id="filterGrid"></div>
          <div class="foot">
            <button id="swReset" class="btn btn-ghost">Reset</button>
            <button id="swApply" class="btn btn-gold">Apply</button>
          </div>
        </div>`;
      document.body.appendChild(d);

      const grid=d.querySelector('#filterGrid');
      GROUPS.forEach((g,gi)=>{
        const box=document.createElement('div'); box.className='box';
        box.innerHTML=`<h4>${g.t}</h4>`;
        if(g.kind==='price'){
          box.innerHTML+=`
            <div style="display:grid;gap:10px">
              <div style="display:flex;justify-content:space-between;font-size:13px">
                <span>Price per night</span>
                <span><span id="priceMinVal">–</span> ~ <span id="priceMaxVal">–</span></span>
              </div>
              <label style="font-size:12px;opacity:.8">Min</label>
              <input type="range" id="priceMin" min="0" max="1000" step="10" value="100">
              <label style="font-size:12px;opacity:.8">Max</label>
              <input type="range" id="priceMax" min="0" max="5000" step="50" value="800">
            </div>`;
        }
        (g.inputs||[]).forEach(([type,id,attrs])=>{
          const wrap=document.createElement('div'); wrap.style.margin='6px 0';
          wrap.innerHTML=`<label style="font-size:12px">${id}</label><input type="${type}" id="${id}" style="width:100%">`;
          Object.entries(attrs||{}).forEach(([k,v])=>wrap.querySelector('input').setAttribute(k,v));
          box.appendChild(wrap);
        });
        (g.radios||[]).forEach((name,ri)=>{
          const id=`rg_${gi}_${ri}`;
          const lab=document.createElement('label'); lab.style.cssText='display:inline-flex;align-items:center;gap:6px;margin:6px 10px 0 0';
          lab.innerHTML=`<input type="radio" name="rg_${gi}" id="${id}" ${/Any/i.test(name)?'checked':''}> <span>${name}</span>`;
          box.appendChild(lab);
        });
        (g.checks||[]).forEach((name,ci)=>{
          const id=`ck_${gi}_${ci}`;
          const lab=document.createElement('label'); lab.style.cssText='display:inline-flex;align-items:center;gap:6px;margin:6px 10px 0 0';
          lab.innerHTML=`<input type="checkbox" id="${id}"> <span>${name}</span>`;
          box.appendChild(lab);
        });
        grid.appendChild(box);
      });

      const back=d.querySelector('.back');
      const close=()=>{d.setAttribute('aria-hidden','true');};
      back.addEventListener('click',close);
      d.querySelector('#swClose').addEventListener('click',close);
      d.querySelector('.panel').addEventListener('click',e=>e.stopPropagation());

      function updatePriceLabels(){
        const min=+d.querySelector('#priceMin').value||0;
        const max=+d.querySelector('#priceMax').value||0;
        const cur=document.getElementById('currency')?.value||'USD';
        const to=val=>{const m=CURRENCIES[cur]||CURRENCIES.USD;const v=val*m.rate;return new Intl.NumberFormat(m.locale,{style:'currency',currency:m.name,maximumFractionDigits:(m.name==='JPY'||m.name==='KRW')?0:0}).format(v);};
        d.querySelector('#priceMinVal').textContent=to(min);
        d.querySelector('#priceMaxVal').textContent=to(max);
      }
      ['#priceMin','#priceMax'].forEach(sel=>d.querySelector(sel)?.addEventListener('input',updatePriceLabels));
      document.getElementById('currencySelectDrawer').addEventListener('change',updatePriceLabels);
      updatePriceLabels();

      d.querySelector('#swReset').addEventListener('click',()=>{
        d.querySelectorAll('input[type=checkbox]').forEach(i=>i.checked=false);
        d.querySelectorAll('input[type=radio]').forEach(i=>i.checked=/Any/i.test(i.nextSibling?.textContent||'Any'));
        d.querySelector('#priceMin').value=100;
        d.querySelector('#priceMax').value=800;
        updatePriceLabels();
      });
      d.querySelector('#swApply').addEventListener('click',close);
    }
    return d;
  }

  document.getElementById('btnFilters')?.addEventListener('click',()=>{
    ensureDrawer().setAttribute('aria-hidden','false');
  });

  /* ------------------ 챗봇 ------------------ */
  (function ensureChat(){
    let fab=document.getElementById('chatFab');
    if(!fab){ fab=document.createElement('button'); fab.id='chatFab'; fab.textContent='💬'; document.body.appendChild(fab); }
    let panel=document.getElementById('botPanel');
    if(!panel){
      panel=document.createElement('div'); panel.id='botPanel';
      panel.innerHTML=`<div class="hdr"><strong>AI Concierge</strong><button id="botClose" class="btn btn-ghost">✕</button></div>
        <div id="botBody" class="body"><div class="msg ai">Hello! Ask in any language.</div></div>
        <div class="row"><input id="botInput" placeholder="Type a message…" class="ipt" style="flex:1"><button id="botSend" class="btn btn-gold">Send</button></div>`;
      document.body.appendChild(panel);
    }
    const open=()=>{panel.style.display='block';};
    const close=()=>{panel.style.display='none';};
    fab.addEventListener('click',e=>{e.stopPropagation(); open();},{capture:true});
    panel.querySelector('#botClose').addEventListener('click',e=>{e.stopPropagation(); close();});
    document.addEventListener('click',e=>{
      if(panel.style.display!=='block')return;
      const r=panel.getBoundingClientRect(); const inside=e.clientX>=r.left&&e.clientX<=r.right&&e.clientY>=r.top&&e.clientY<=r.bottom;
      if(!inside) close();
    },{capture:true});

    const body=panel.querySelector('#botBody'), input=panel.querySelector('#botInput'), send=panel.querySelector('#botSend');
    const msgs=[];
    const add=(t,me)=>{const d=document.createElement('div'); d.className=`msg ${me?'me':'ai'}`; d.textContent=t; body.appendChild(d); body.scrollTop=body.scrollHeight;};
    async function askAI(message){
      // 백엔드 미연결 시 데모 응답
      return "I'm your StayWorld Concierge. How can I help?";
    }
    async function sendIt(){
      const v=(input.value||'').trim(); if(!v) return; input.value='';
      add(v,true); add('…',false); const dots=body.lastChild;
      try{ const reply=await askAI(v); dots.remove(); add(reply,false);}
      catch(_){ dots.remove(); add('Assistant is unavailable.',false); }
    }
    send.addEventListener('click',sendIt); input.addEventListener('keydown',e=>{if(e.key==='Enter') sendIt();});
  })();

  /* ------------------ 추천 리스트 로드 (데모/Firebase 옵션) ------------------ */
  (async function loadFeatured(){
    const grid=document.getElementById('recosGrid');
    const skel=document.getElementById('recosSkeleton');
    try{
      // (옵션) Firebase 연결하려면, 아래 주석 해제하고 본인 config로 교체
      // import('/scripts/firebase.js') ... 후 listings 불러오기
      // 여기선 데모 데이터 사용
      const fallbackImg='https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1200&auto=format&fit=crop';
      const items=[
        {id:'a1',title:'The Parisian',address:'Paris, France',price:120,photos:[fallbackImg]},
        {id:'b2',title:'Tokyo View',address:'Tokyo, Japan',price:210,photos:[fallbackImg]},
        {id:'c3',title:'Istanbul Sky',address:'Istanbul, Türkiye',price:320,photos:[fallbackImg]},
      ];
      const cardTemplate=(it)=>`
        <a href="/results.html?listing=${it.id}" class="card" style="display:block;overflow:hidden">
          <div class="card-media"><img src="${(it.photos&&it.photos[0])||fallbackImg}" alt="${it.title}"></div>
          <div style="display:flex;align-items:flex-start;justify-content:space-between;gap:12px">
            <h3 style="margin:0" class="line-clamp-1">${it.title}</h3>
            <div style="text-align:right;white-space:nowrap">
              <div class="font-bold">${money(it.price)}</div>
              <div style="opacity:.7;font-size:12px">/ night</div>
            </div>
          </div>
          <div style="opacity:.8;margin-top:6px" class="line-clamp-1">${it.address||''}</div>
          <div style="margin-top:10px"><span class="btn btn-gold">Book</span></div>
        </a>`;
      grid.innerHTML = items.map(cardTemplate).join('');
      skel.style.display='none'; grid.style.display='grid';
    }catch(err){
      console.error('featured error',err);
      skel.innerHTML='<div class="card">Failed to load featured.</div>';
    }
  })();

  /* ------------------ 초기화 ------------------ */
  document.addEventListener('DOMContentLoaded',()=>{
    // 언어/통화
    initLangCurrency();
    applyI18NPage();

    // 인증 상태 적용 (테스트: 콘솔에서 로그인)
    // localStorage.setItem('sw_user', JSON.stringify({name:'GIJUN YOON', email:'you@example.com'}))
    applyAuthUI();

    // 로그아웃
    document.getElementById('logoutBtn')?.addEventListener('click',(e)=>{
      e.preventDefault();
      localStorage.removeItem('sw_user');
      applyAuthUI();
      location.href='/';
    });
  });
  </script>
</body>
</html>

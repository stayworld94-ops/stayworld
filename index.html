<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>STAYWORLD â€” Luxury Global Booking</title>

  <!-- ê°€ìž¥ í™•ì‹¤í•œ ë°©ì‹ìœ¼ë¡œ CSS ì—°ê²° -->
  <link rel="stylesheet" href="/style.css?v=2025-08-15b"/>

  <!-- ìµœì†Œ í´ë°± ìŠ¤íƒ€ì¼(ì™¸ë¶€ CSS ëª» ë¶ˆëŸ¬ì™€ë„ ë²„íŠ¼/ë¼ë²¨ ì•ˆê¹¨ì§€ê²Œ) -->
  <style>
    .visually-hidden{position:absolute;clip:rect(0 0 0 0);clip-path:inset(50%);width:1px;height:1px;overflow:hidden;white-space:nowrap}
  </style>
</head>
<body>
  <!-- í—¤ë” -->
  <header class="site-header">
    <div class="container header-inner">
      <a href="/" class="brand" aria-label="StayWorld">
        <img src="/stayworld-logo.png" class="logo" alt="StayWorld" />
        <span class="brand-text">STAYWORLD</span>
      </a>

      <nav class="main-nav" aria-label="Primary">
        <a href="/index.html" data-i18n="nav.home">Home</a>
        <a href="/membership.html" data-i18n="nav.membership">Membership</a>
        <a href="/login.html" data-i18n="nav.login">Login</a>
      </nav>

      <div class="header-right">
        <label for="lang" class="visually-hidden" id="langLabel">Language</label>
        <div class="lang-select" aria-labelledby="langLabel">
          <select id="lang">
            <option>EN</option><option>KO</option><option>JA</option><option>ZH</option>
            <option>FR</option><option>ES</option><option>DE</option><option>TR</option>
            <option>AR</option><option>PT</option>
          </select>
        </div>
        <a class="btn primary" href="/signup.html" data-i18n="nav.signup">Sign Up</a>
      </div>
    </div>
  </header>

  <!-- ížˆì–´ë¡œ + ê²€ìƒ‰ë°” -->
  <section class="hero">
    <div class="container">
      <h1 class="hero-title">
        <span data-i18n="hero.line1">Luxury stays.</span><br/>
        <span class="gold" data-i18n="hero.line2">Global reach.</span>
      </h1>
      <p class="tagline" data-i18n="hero.tagline">
        Cards, bank transfer & crypto (BTC Â· ETH Â· USDT).
      </p>

      <form id="search-form" class="search-bar" onsubmit="return false;">
        <input id="destination" class="i-text"
               data-i18n-placeholder="search.placeholder"
               placeholder="Paris, Tokyo, Istanbul..." />
        <input id="checkin" class="i-date" type="date" aria-label="Check-in"/>
        <input id="checkout" class="i-date" type="date" aria-label="Check-out"/>
        <button id="filterBtn" type="button" class="btn secondary" data-i18n="search.filters">Filters</button>
        <button id="searchBtn" type="button" class="btn primary" data-i18n="search.search">Search</button>
      </form>
    </div>
  </section>

  <!-- ì •ë³´ ì¹´ë“œ 3ê°œ(ì˜ˆì‹œ) -->
  <section class="usp container">
    <div class="card">
      <h3 data-i18n="usp.verifiedTitle">Verified stays</h3>
      <p data-i18n="usp.verifiedText">Top picks near you.</p>
    </div>
    <div class="card">
      <h3 data-i18n="usp.rewardsTitle">StayWorld+ Rewards</h3>
      <p data-i18n="usp.rewardsText">Earn points on every booking.</p>
    </div>
    <div class="card">
      <h3 data-i18n="usp.paymentsTitle">Secure payments</h3>
      <p data-i18n="usp.paymentsText">Visa, Mastercard, Amex & Crypto.</p>
    </div>
  </section>

  <!-- í•„í„° ëª¨ë‹¬ -->
  <div id="filtersModal" class="modal" aria-hidden="true" role="dialog">
    <div class="modal-card" role="document">
      <header class="modal-head">
        <h3 data-i18n="filter.title">Filters</h3>
        <button class="icon-btn" data-close aria-label="Close">&times;</button>
      </header>
      <div class="modal-body">
        <!-- 20ê°œ+ ì²´í¬ì˜µì…˜ -->
        <div class="filter-grid">
          <!-- Amenities -->
          <label><input type="checkbox" value="wifi"/> Wi-Fi</label>
          <label><input type="checkbox" value="pool"/> Pool</label>
          <label><input type="checkbox" value="spa"/> Spa</label>
          <label><input type="checkbox" value="gym"/> Gym</label>
          <label><input type="checkbox" value="parking"/> Parking</label>
          <label><input type="checkbox" value="pet"/> Pet-friendly</label>
          <label><input type="checkbox" value="kitchen"/> Kitchen</label>
          <label><input type="checkbox" value="balcony"/> Balcony</label>
          <label><input type="checkbox" value="sea"/> Sea view</label>
          <label><input type="checkbox" value="city"/> City view</label>
          <!-- Property types -->
          <label><input type="checkbox" value="hotel"/> Hotel</label>
          <label><input type="checkbox" value="apartment"/> Apartment</label>
          <label><input type="checkbox" value="villa"/> Villa</label>
          <label><input type="checkbox" value="hostel"/> Hostel</label>
          <label><input type="checkbox" value="bnb"/> B&B</label>
          <!-- Payment -->
          <label><input type="checkbox" value="crypto"/> Crypto</label>
          <label><input type="checkbox" value="bank"/> Bank transfer</label>
          <label><input type="checkbox" value="card"/> Cards</label>
          <!-- Extras -->
          <label><input type="checkbox" value="breakfast"/> Breakfast</label>
          <label><input type="checkbox" value="airport"/> Airport shuttle</label>
          <label><input type="checkbox" value="accessible"/> Accessible</label>
          <label><input type="checkbox" value="24h"/> 24h check-in</label>
        </div>
      </div>
      <footer class="modal-foot">
        <button class="btn secondary" data-clear data-i18n="filter.clear">Clear</button>
        <button class="btn primary" data-apply data-i18n="filter.apply">Apply</button>
      </footer>
    </div>
  </div>

  <!-- ì±—ë´‡ í”Œë¡œíŒ… ë²„íŠ¼ & íŒ¨ë„ -->
  <button id="chat-toggle" class="chat-fab" aria-controls="chat-panel" aria-expanded="false" title="AI Concierge">ðŸ’¬</button>

  <aside id="chat-panel" class="chat-panel" aria-hidden="true">
    <header class="chat-head">
      <h3>StayWorld AI</h3>
      <button class="icon-btn" data-close-chat aria-label="Close">&times;</button>
    </header>
    <div id="chatLog" class="chat-log" aria-live="polite"></div>
    <form id="chatForm" class="chat-input">
      <input id="chatInput" autocomplete="off" data-i18n-placeholder="chat.placeholder" placeholder="Type a messageâ€¦"/>
      <button id="chatSend" class="btn primary" type="submit" data-i18n="chat.send">Send</button>
    </form>
  </aside>
  <div id="chatMask" class="mask" hidden></div>

  <!-- ì•± ìŠ¤í¬ë¦½íŠ¸ (i18n + ëª¨ë‹¬ + ì±—ë´‡) -->
  <script>
    /**************  I18N (10ê°œ ì–¸ì–´)  **************/
    const DICT = {
      EN:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Luxury stays.",line2:"Global reach.",tagline:"Cards, bank transfer & crypto (BTC Â· ETH Â· USDT)."},
          search:{placeholder:"Paris, Tokyo, Istanbulâ€¦",filters:"Filters",search:"Search"},
          usp:{verifiedTitle:"Verified stays",verifiedText:"Top picks near you.",
               rewardsTitle:"StayWorld+ Rewards",rewardsText:"Earn points on every booking.",
               paymentsTitle:"Secure payments",paymentsText:"Visa, Mastercard, Amex & Crypto."},
          filter:{title:"Filters",clear:"Clear",apply:"Apply"},
          chat:{placeholder:"Ask about stays, dates, or paymentsâ€¦",send:"Send"}},
      KO:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"ëŸ­ì…”ë¦¬ ìŠ¤í…Œì´.",line2:"ê¸€ë¡œë²Œ ë¦¬ì¹˜.",tagline:"ì¹´ë“œÂ·ê³„ì¢Œì´ì²´Â·ì•”í˜¸í™”í(BTCÂ·ETHÂ·USDT) ì§€ì›."},
          search:{placeholder:"íŒŒë¦¬, ë„ì¿„, ì´ìŠ¤íƒ„ë¶ˆâ€¦",filters:"í•„í„°",search:"ê²€ìƒ‰"},
          usp:{verifiedTitle:"ê²€ì¦ëœ ìˆ™ì†Œ",verifiedText:"ë‚´ ì£¼ë³€ ì¶”ì²œ ìˆ™ì†Œ.",
               rewardsTitle:"StayWorld+ ë¦¬ì›Œë“œ",rewardsText:"ì˜ˆì•½ë§ˆë‹¤ í¬ì¸íŠ¸ ì ë¦½.",
               paymentsTitle:"ì•ˆì „í•œ ê²°ì œ",paymentsText:"ë¹„ìž, ë§ˆìŠ¤í„°ì¹´ë“œ, ì•„ë©•ìŠ¤ & í¬ë¦½í† ."},
          filter:{title:"í•„í„°",clear:"ì´ˆê¸°í™”",apply:"ì ìš©"},
          chat:{placeholder:"ìˆ™ì†Œ/ë‚ ì§œ/ê²°ì œ ë¬¸ì˜ë¥¼ ìž…ë ¥í•˜ì„¸ìš”â€¦",send:"ì „ì†¡"}},
      JA:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"ãƒ©ã‚°ã‚¸ãƒ¥ã‚¢ãƒªãƒ¼æ»žåœ¨ã€‚",line2:"ä¸–ç•Œã«åºƒãŒã‚‹ã‚¢ã‚¯ã‚»ã‚¹ã€‚",tagline:"ã‚«ãƒ¼ãƒ‰ãƒ»æŒ¯è¾¼ãƒ»æš—å·è³‡ç”£ï¼ˆBTCãƒ»ETHãƒ»USDTï¼‰ã€‚"},
          search:{placeholder:"ãƒ‘ãƒªã€æ±äº¬ã€ã‚¤ã‚¹ã‚¿ãƒ³ãƒ–ãƒ¼ãƒ«â€¦",filters:"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼",search:"æ¤œç´¢"},
          usp:{verifiedTitle:"åŽ³é¸ã‚¹ãƒ†ã‚¤",verifiedText:"è¿‘å ´ã®ãŠã™ã™ã‚ã€‚",
               rewardsTitle:"StayWorld+ ãƒªãƒ¯ãƒ¼ãƒ‰",rewardsText:"äºˆç´„ã”ã¨ã«ãƒã‚¤ãƒ³ãƒˆã€‚",
               paymentsTitle:"å®‰å…¨ãªæ±ºæ¸ˆ",paymentsText:"Visa, Mastercard, Amex & Crypto."},
          filter:{title:"ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼",clear:"ã‚¯ãƒªã‚¢",apply:"é©ç”¨"},
          chat:{placeholder:"å®¿ãƒ»æ—¥ä»˜ãƒ»æ”¯æ‰•ã„ã‚’è³ªå•â€¦",send:"é€ä¿¡"}},
      ZH:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"å¥¢åŽä½å®¿ã€‚",line2:"å…¨çƒè§¦è¾¾ã€‚",tagline:"æ”¯æŒé“¶è¡Œå¡ã€è½¬è´¦å’ŒåŠ å¯†è´§å¸ï¼ˆBTCÂ·ETHÂ·USDTï¼‰ã€‚"},
          search:{placeholder:"å·´é»Žã€ä¸œäº¬ã€ä¼Šæ–¯å¦å¸ƒå°”â€¦",filters:"ç­›é€‰",search:"æœç´¢"},
          usp:{verifiedTitle:"ä¼˜é€‰ä½å®¿",verifiedText:"ç¦»ä½ æœ€è¿‘çš„ç²¾é€‰ã€‚",
               rewardsTitle:"StayWorld+ ç§¯åˆ†",rewardsText:"æ¯æ¬¡é¢„è®¢éƒ½èƒ½èµšç§¯åˆ†ã€‚",
               paymentsTitle:"å®‰å…¨æ”¯ä»˜",paymentsText:"Visaã€ä¸‡äº‹è¾¾ã€Amex ä¸ŽåŠ å¯†è´§å¸ã€‚"},
          filter:{title:"ç­›é€‰",clear:"æ¸…é™¤",apply:"åº”ç”¨"},
          chat:{placeholder:"è¯¢é—®ä½å®¿ã€æ—¥æœŸæˆ–æ”¯ä»˜â€¦",send:"å‘é€"}},
      FR:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"SÃ©jours de luxe.",line2:"PortÃ©e mondiale.",tagline:"Carte, virement & crypto (BTC Â· ETH Â· USDT)."},
          search:{placeholder:"Paris, Tokyo, Istanbulâ€¦",filters:"Filtres",search:"Rechercher"},
          usp:{verifiedTitle:"Logements vÃ©rifiÃ©s",verifiedText:"Meilleurs choix prÃ¨s de vous.",
               rewardsTitle:"RÃ©compenses StayWorld+",rewardsText:"Des points Ã  chaque rÃ©servation.",
               paymentsTitle:"Paiements sÃ©curisÃ©s",paymentsText:"Visa, Mastercard, Amex & Crypto."},
          filter:{title:"Filtres",clear:"RÃ©initialiser",apply:"Appliquer"},
          chat:{placeholder:"Demandez sur les sÃ©jours, dates ou paiementsâ€¦",send:"Envoyer"}},
      ES:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Estancias de lujo.",line2:"Alcance global.",tagline:"Tarjeta, transferencia y cripto (BTC Â· ETH Â· USDT)."},
          search:{placeholder:"ParÃ­s, Tokio, Estambulâ€¦",filters:"Filtros",search:"Buscar"},
          usp:{verifiedTitle:"Alojamientos verificados",verifiedText:"Las mejores opciones cerca.",
               rewardsTitle:"Recompensas StayWorld+",rewardsText:"Gana puntos en cada reserva.",
               paymentsTitle:"Pagos seguros",paymentsText:"Visa, Mastercard, Amex y Cripto."},
          filter:{title:"Filtros",clear:"Limpiar",apply:"Aplicar"},
          chat:{placeholder:"Pregunta sobre estancias, fechas o pagosâ€¦",send:"Enviar"}},
      DE:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"LuxuriÃ¶se Aufenthalte.",line2:"Globale Reichweite.",tagline:"Karten, Ãœberweisung & Krypto (BTC Â· ETH Â· USDT)."},
          search:{placeholder:"Paris, Tokio, Istanbulâ€¦",filters:"Filter",search:"Suchen"},
          usp:{verifiedTitle:"GeprÃ¼fte UnterkÃ¼nfte",verifiedText:"Top-Tipps in deiner NÃ¤he.",
               rewardsTitle:"StayWorld+ PrÃ¤mien",rewardsText:"Punkte bei jeder Buchung.",
               paymentsTitle:"Sichere Zahlungen",paymentsText:"Visa, Mastercard, Amex & Krypto."},
          filter:{title:"Filter",clear:"ZurÃ¼cksetzen",apply:"Ãœbernehmen"},
          chat:{placeholder:"Fragen zu Aufenthalt, Datum oder Zahlungâ€¦",send:"Senden"}},
      TR:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"LÃ¼ks konaklamalar.",line2:"KÃ¼resel eriÅŸim.",tagline:"Kart, havale ve kripto (BTC Â· ETH Â· USDT)."},
          search:{placeholder:"Paris, Tokyo, Ä°stanbulâ€¦",filters:"Filtreler",search:"Ara"},
          usp:{verifiedTitle:"DoÄŸrulanmÄ±ÅŸ konaklamalar",verifiedText:"YakÄ±nÄ±nÄ±zdaki en iyi seÃ§enekler.",
               rewardsTitle:"StayWorld+ Ã–dÃ¼ller",rewardsText:"Her rezervasyonda puan kazanÄ±n.",
               paymentsTitle:"GÃ¼venli Ã¶demeler",paymentsText:"Visa, Mastercard, Amex & Kripto."},
          filter:{title:"Filtreler",clear:"Temizle",apply:"Uygula"},
          chat:{placeholder:"Konaklama, tarih veya Ã¶deme sorâ€¦",send:"GÃ¶nder"}},
      AR:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Ø¥Ù‚Ø§Ù…Ø§Øª ÙØ§Ø®Ø±Ø©.",line2:"Ø§Ù†ØªØ´Ø§Ø± Ø¹Ø§Ù„Ù…ÙŠ.",tagline:"Ø¨Ø·Ø§Ù‚Ø©ØŒ ØªØ­ÙˆÙŠÙ„ Ø¨Ù†ÙƒÙŠ ÙˆØ¹ÙÙ…Ù„Ø§Øª Ø±Ù‚Ù…ÙŠØ© (BTC Â· ETH Â· USDT)."},
          search:{placeholder:"Ø¨Ø§Ø±ÙŠØ³ØŒ Ø·ÙˆÙƒÙŠÙˆØŒ Ø¥Ø³Ø·Ù†Ø¨ÙˆÙ„â€¦",filters:"Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„ØªØµÙÙŠØ©",search:"Ø¨Ø­Ø«"},
          usp:{verifiedTitle:"Ø¥Ù‚Ø§Ù…Ø§Øª Ù…ÙˆØ«ÙˆÙ‚Ø©",verifiedText:"Ø£ÙØ¶Ù„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø¨Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù†Ùƒ.",
               rewardsTitle:"Ù…ÙƒØ§ÙØ¢Øª StayWorld+",rewardsText:"Ø§ÙƒØ³Ø¨ Ù†Ù‚Ø§Ø·Ù‹Ø§ Ù…Ø¹ ÙƒÙ„ Ø­Ø¬Ø².",
               paymentsTitle:"Ù…Ø¯ÙÙˆØ¹Ø§Øª Ø¢Ù…Ù†Ø©",paymentsText:"Visa ÙˆMastercard ÙˆAmex ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø±Ù‚Ù…ÙŠØ©."},
          filter:{title:"Ø¹ÙˆØ§Ù…Ù„ Ø§Ù„ØªØµÙÙŠØ©",clear:"Ù…Ø³Ø­",apply:"ØªØ·Ø¨ÙŠÙ‚"},
          chat:{placeholder:"Ø§Ø³Ø£Ù„ Ø¹Ù† Ø§Ù„Ø¥Ù‚Ø§Ù…Ø© Ø£Ùˆ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ® Ø£Ùˆ Ø§Ù„Ø¯ÙØ¹â€¦",send:"Ø¥Ø±Ø³Ø§Ù„"}},
      PT:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Estadias de luxo.",line2:"Alcance global.",tagline:"CartÃ£o, transferÃªncia e cripto (BTC Â· ETH Â· USDT)."},
          search:{placeholder:"Paris, TÃ³quio, Istambulâ€¦",filters:"Filtros",search:"Buscar"},
          usp:{verifiedTitle:"Estadias verificadas",verifiedText:"Melhores opÃ§Ãµes perto de vocÃª.",
               rewardsTitle:"Recompensas StayWorld+",rewardsText:"Ganhe pontos em cada reserva.",
               paymentsTitle:"Pagamentos seguros",paymentsText:"Visa, Mastercard, Amex e Cripto."},
          filter:{title:"Filtros",clear:"Limpar",apply:"Aplicar"},
          chat:{placeholder:"Pergunte sobre estadias, datas ou pagamentosâ€¦",send:"Enviar"}},
    };

    function applyI18n(lang){
      const L = DICT[lang] || DICT.EN;
      document.documentElement.lang = (lang||'EN').toLowerCase();

      // text
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const path = el.getAttribute("data-i18n").split(".");
        let cur = L; for (const k of path) cur = (cur||{})[k];
        if (typeof cur === "string") el.textContent = cur;
      });
      // placeholders
      document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
        const path = el.getAttribute("data-i18n-placeholder").split(".");
        let cur = L; for (const k of path) cur = (cur||{})[k];
        if (typeof cur === "string") el.placeholder = cur;
      });
    }

    /**************  í•„í„° ëª¨ë‹¬  **************/
    const modal = document.getElementById("filtersModal");
    const filterBtn = document.getElementById("filterBtn");
    filterBtn.addEventListener("click", (e)=>{ e.stopPropagation(); openModal();});
    modal.addEventListener("click", ()=> closeModal());
    modal.querySelector(".modal-card").addEventListener("click", (e)=> e.stopPropagation());
    modal.querySelector("[data-close]").addEventListener("click", closeModal);
    modal.querySelector("[data-clear]").addEventListener("click", ()=>{
      modal.querySelectorAll("input[type=checkbox]").forEach(c=> c.checked=false);
    });
    modal.querySelector("[data-apply]").addEventListener("click", ()=>{
      const selected = [...modal.querySelectorAll("input[type=checkbox]:checked")].map(x=>x.value);
      console.log("APPLIED FILTERS:", selected);
      closeModal();
    });
    function openModal(){ modal.setAttribute("aria-hidden","false"); document.body.classList.add("no-scroll"); }
    function closeModal(){ modal.setAttribute("aria-hidden","true"); document.body.classList.remove("no-scroll"); }

    /**************  ì±—ë´‡  **************/
    const chatToggle = document.getElementById("chat-toggle");
    const chatPanel  = document.getElementById("chat-panel");
    const chatMask   = document.getElementById("chatMask");
    const chatLog    = document.getElementById("chatLog");
    const chatForm   = document.getElementById("chatForm");
    const chatInput  = document.getElementById("chatInput");
    const chatSend   = document.getElementById("chatSend");

    function openChat(){
      chatPanel.setAttribute("aria-hidden","false");
      chatMask.hidden = false;
      chatToggle.setAttribute("aria-expanded","true");
      chatInput.focus();
    }
    function closeChat(){
      chatPanel.setAttribute("aria-hidden","true");
      chatMask.hidden = true;
      chatToggle.setAttribute("aria-expanded","false");
    }

    chatToggle.addEventListener("click",(e)=>{ e.stopPropagation(); openChat(); });
    chatMask.addEventListener("click", closeChat);
    chatPanel.querySelector("[data-close-chat]").addEventListener("click", closeChat);
    chatPanel.addEventListener("click",(e)=> e.stopPropagation());

    function addMsg(role, text){
      const row = document.createElement("div");
      row.className = "msg " + role;
      row.textContent = text;
      chatLog.appendChild(row);
      chatLog.scrollTop = chatLog.scrollHeight;
    }

    chatForm.addEventListener("submit", async (e)=>{
      e.preventDefault();
      const content = chatInput.value.trim();
      if (!content) return;
      const lang = document.getElementById("lang").value || "EN";
      addMsg("user", content);
      chatInput.value = "";
      chatSend.disabled = true;

      try{
        const res = await fetch("/.netlify/functions/chat",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify({message: content, lang})
        });
        if(!res.ok){
          const t = await res.text();
          console.error("Chat error:", t);
          addMsg("bot", "Sorry, the assistant is temporarily unavailable.");
        }else{
          const data = await res.json();
          addMsg("bot", data.reply || "â€¦");
        }
      }catch(err){
        console.error(err);
        addMsg("bot", "Network error. Please try again.");
      }finally{
        chatSend.disabled = false;
      }
    });

    /**************  ì´ˆê¸° ì„¤ì •  **************/
    const langSel = document.getElementById("lang");
    langSel.addEventListener("change",()=> applyI18n(langSel.value));
    applyI18n(langSel.value);
  </script>
</body>
</html>

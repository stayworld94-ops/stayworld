<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>STAYWORLD ‚Äî Luxury Global Reach</title>
  
  <!-- Leaflet (Map) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="anonymous">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin="anonymous"></script>

  <style>
    :root{--bg:#0b0f16;--panel:#101018;--text:#e7e9ee;--muted:#cfd6e6;--line:rgba(255,255,255,.08);--chip:#121a26;--gold1:#f4d78c;--gold2:#c9a35b}
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif;line-height:1.5}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{max-width:1120px;margin:0 auto;padding:0 16px}

    /* Header */
    .site-header{position:sticky;top:0;z-index:1000;background:rgba(11,15,22,.85);backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
    .header-row{display:flex;align-items:center;justify-content:space-between;gap:20px;height:72px}
    .logo img{width:36px;height:36px;border-radius:8px;box-shadow:0 4px 18px rgba(0,0,0,.3)}
    .main-nav{display:flex;gap:20px;align-items:center}
    .main-nav a{padding:8px 10px;border-radius:10px}
    .main-nav a:hover{background:rgba(255,255,255,.06)}
    .btn{border:0;padding:10px 14px;border-radius:12px;cursor:pointer}
    .btn-ghost{background:transparent;color:#cfcfcf;border:1px solid var(--line)}
    .btn-gold{background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#170f04;font-weight:700;border-radius:14px;padding:12px 18px;box-shadow:0 8px 26px rgba(201,163,91,.35)}
    .lang-select{appearance:none;background:#101826;border:1px solid var(--line);color:var(--text);border-radius:12px;padding:8px 32px 8px 10px}

    /* Welcome bar */
    .welcome-bar{position:sticky;top:72px;z-index:900;background:#121724;border-bottom:1px solid var(--line)}
    .welcome-wrap{max-width:1120px;margin:0 auto;padding:8px 16px;display:flex;align-items:center;gap:10px}
    .notif-btn{position:relative;border:1px solid var(--line);background:#0e141e;color:#e5edff;width:36px;height:36px;border-radius:999px;cursor:pointer}
    .notif-badge{position:absolute;right:-4px;top:-4px;background:#f44;color:#fff;border-radius:999px;font-size:11px;padding:1px 5px}
    .notif-panel{position:absolute;left:16px;top:64px;width:min(380px,92vw);background:#0f1520;border:1px solid var(--line);border-radius:12px;padding:8px;box-shadow:0 16px 40px rgba(0,0,0,.45)}
    .notif-header,.notif-footer{display:flex;align-items:center;justify-content:space-between;padding:6px 8px;border-bottom:1px solid var(--line)}
    .notif-footer{border:0;border-top:1px solid var(--line)}
    .notif-list{list-style:none;margin:0;padding:0;max-height:320px;overflow:auto}
    .notif-item{display:grid;grid-template-columns:auto 1fr auto;gap:10px;padding:8px;border-radius:10px}
    .notif-item:hover{background:#111928}
    .notif-dot{width:8px;height:8px;border-radius:999px;background:#ffd36e;margin-top:8px}

    /* Host dropdown */
    .nav-item.dropdown{position:relative}
    .nav-link.dropdown-toggle{display:inline-flex;align-items:center;gap:6px;cursor:pointer;padding:6px 0;font-weight:600;opacity:.95}
    .dropdown-panel{position:absolute;top:100%;left:50%;transform:translate(-50%,8px);min-width:230px;background:#0f1520;border:1px solid var(--line);border-radius:12px;padding:8px;z-index:30;box-shadow:0 16px 40px rgba(0,0,0,.45);visibility:hidden;opacity:0;pointer-events:none;transition:opacity .12s ease,transform .12s ease,visibility .12s}
    .nav-item.dropdown:hover .dropdown-panel,.nav-item.dropdown.open .dropdown-panel{visibility:visible;opacity:1;pointer-events:auto;transform:translate(-50%,0)}
    .dropdown-item{display:block;padding:10px 12px;border-radius:8px;color:#e7e9ee}
    .dropdown-item:hover{background:#121a26}
    .dropdown-divider{height:1px;background:var(--line);margin:6px 0}

    /* Hero */
    .hero{padding:48px 0 24px;background:radial-gradient(1200px 500px at 20% -10%,rgba(244,215,140,.12),transparent),radial-gradient(1200px 600px at 100% 0,rgba(78,94,130,.18),transparent)}
    .hero-title{font-size:48px;letter-spacing:.2px;margin:10px 0 8px}
    .accent{color:#f1cf84}
    .hero-sub{opacity:.85;margin:8px 0 28px}
    .search-bar{display:grid;grid-template-columns:1.2fr .7fr .7fr auto auto;gap:10px;align-items:center}
    .input{background:#0f1621;border:1px solid var(--line);color:var(--text);padding:12px 14px;border-radius:12px}
    .input::placeholder{color:#a7b0bf}
    .search-status{margin-top:8px;color:var(--muted);opacity:0;transition:opacity .3s}
    .btn.loading{opacity:.65;pointer-events:none}

    /* Cards */
    .features{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:28px}
    .card{background:#0f1420;border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 8px 30px rgba(0,0,0,.25)}

    /* Map */
    .map-section{padding:36px 0 60px}
    #map{height:420px;border-radius:16px;border:1px solid var(--line);box-shadow:0 8px 30px rgba(0,0,0,.25);overflow:hidden}
    .leaflet-container,.leaflet-pane,.leaflet-top,.leaflet-bottom{z-index:10 !important}

    /* Filters Drawer */
    #filterDrawer{position:fixed;inset:0;display:none;z-index:2147483637;align-items:stretch;justify-content:flex-end}
    #filterDrawer[aria-hidden="false"]{display:flex}
    #filterDrawer .back{position:absolute;inset:0;background:rgba(0,0,0,.45)}
    #filterDrawer .panel{position:relative;margin-left:auto;width:min(780px,92vw);max-height:92vh;overflow:auto;background:var(--panel);border-left:1px solid var(--line);border-top-left-radius:16px;border-bottom-left-radius:16px;display:flex;flex-direction:column}
    #filterDrawer .head,#filterDrawer .foot{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--line)}
    #filterDrawer .foot{border-bottom:0;border-top:1px solid var(--line)}
    #filterGrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px;padding:14px}
    #filterDrawer .box{background:#0f1420;border:1px solid var(--line);border-radius:12px;padding:12px}
    #filterDrawer h4{margin:0 0 8px;font-size:14px}
    .sw-badge{position:absolute;top:-8px;right:-8px;background:#ffd36e;color:#1a1205;border-radius:999px;font-size:11px;padding:2px 6px}

    /* Chatbot */
    #chatFab{position:fixed;right:20px;bottom:20px;width:56px;height:56px;border-radius:50%;border:0;cursor:pointer;z-index:2147483639;background:linear-gradient(180deg,var(--gold1),var(--gold2));box-shadow:0 14px 30px rgba(201,163,91,.35);font-size:22px}
    #botPanel{position:fixed;right:20px;bottom:86px;width:min(360px,88vw);height:480px;background:#101018;border:1px solid #23232b;border-radius:16px;z-index:2147483638;display:none;box-shadow:0 20px 60px rgba(0,0,0,.5);color:var(--text)}
    #botPanel .hdr{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-bottom:1px solid var(--line)}
    #botPanel .body{height:360px;overflow:auto;padding:10px;display:flex;flex-direction:column;gap:8px}
    #botPanel .row{display:flex;gap:8px;padding:10px;border-top:1px solid var(--line)}
    #botInput{flex:1;background:#0f1621;border:1px solid var(--line);color:var(--text);border-radius:12px;padding:10px 12px}
    #botSend{border:0;border-radius:12px;padding:10px 14px;background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#1a1205;font-weight:700}
    .msg{max-width:80%;padding:10px 12px;border-radius:12px}.me{align-self:flex-end;background:#132132}.ai{align-self:flex-start;background:#121820}

    /* Explore */
    .sw-explore{background:linear-gradient(180deg,rgba(8,10,14,.0),rgba(8,10,14,.6));padding:40px 0;border-top:1px solid var(--line)}
    .sw-wrap{max-width:1120px;margin:0 auto;padding:0 16px}
    .sw-explore-head h2{margin:0 0 6px;font-size:26px;font-weight:800}
    .sw-explore-head p{margin:0 0 18px;opacity:.8}
    .sw-row{position:relative;display:flex;align-items:center;gap:12px}
    .sw-track{display:flex;gap:16px;overflow:hidden;scroll-behavior:smooth;padding:6px}
    .sw-card{min-width:260px;background:#0f1420;border:1px solid var(--line);border-radius:16px;box-shadow:0 8px 26px rgba(0,0,0,.25);transition:transform .18s}
    .sw-card:hover{transform:translateY(-2px)}
    .sw-card-media{position:relative;aspect-ratio:16/10;border-radius:16px 16px 0 0;background-size:cover;background-position:center}
    .sw-like{position:absolute;right:10px;top:10px;border:0;background:rgba(0,0,0,.45);color:#fff;border-radius:999px;width:34px;height:34px;cursor:pointer}
    .sw-like.active{background:linear-gradient(180deg,var(--gold1),var(--gold2));color:#121212}
    .sw-badge{position:absolute;left:10px;bottom:10px;background:rgba(0,0,0,.65);color:#fff;padding:4px 8px;border-radius:10px;font-weight:700;font-size:12px}
    .sw-card-body{padding:12px 14px 14px}
    .sw-card h3{margin:0 0 6px;font-size:16px}
    .sw-meta{margin:0;opacity:.75;font-size:13px}
    .sw-nav{border:1px solid var(--line);background:#0c121b;color:#e5edff;width:34px;height:34px;border-radius:999px;cursor:pointer}
    .sw-nav:active{transform:scale(.98)}
    .sw-tabs{display:flex;gap:8px;margin:20px 0 14px}
    .sw-tabs button{background:#0e141e;border:1px solid var(--line);border-radius:999px;padding:8px 14px;color:#cbd6e6;cursor:pointer;font-size:13px}
    .sw-tabs button.is-active,.sw-tabs button:hover{border-color:var(--gold2);color:#fff}
    .sw-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
    .sw-spot{grid-column:span 4;position:relative;display:block;aspect-ratio:16/10;border-radius:16px;background-size:cover;background-position:center;overflow:hidden;border:1px solid var(--line);box-shadow:0 6px 24px rgba(0,0,0,.25)}
    .sw-spot-title{position:absolute;left:12px;bottom:12px;background:rgba(0,0,0,.45);backdrop-filter:blur(6px);padding:8px 10px;border-radius:12px;color:#fff;font-weight:700;border:1px solid rgba(255,255,255,.2)}

    /* Footer */
    .site-footer{padding:28px 0;border-top:1px solid var(--line);opacity:.85}

    /* Responsive */
    @media (max-width:920px){.main-nav{display:none}.hero-title{font-size:40px}.search-bar{grid-template-columns:1fr 1fr 1fr auto}}
    @media (max-width:640px){.hero-title{font-size:34px}.features{grid-template-columns:1fr}.sw-card{min-width:220px}.sw-spot{grid-column:span 12}}
  </style>
</head>

<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="container header-row">
      <div class="logo"><a href="/"><img src="/assets/img/logo-stayworld.png" alt="StayWorld Logo"></a></div>

      <nav class="main-nav">
        <a href="/" data-i18n="nav_home">Home</a>
        <a href="/membership.html" data-i18n="nav_membership">Membership</a>
        <div id="hostMenu" class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-i18n="nav_host">Host ‚ñæ</a>
          <div class="dropdown-panel">
            <a class="dropdown-item" href="/host-login.html" data-host-visible="signedOut" data-i18n="host_login">Host Login</a>
            <a class="dropdown-item" href="/host-signup.html" data-host-visible="signedOut" data-i18n="host_signup">Host Sign Up</a>
            <div class="dropdown-divider" data-host-visible="signedOut"></div>
            <a class="dropdown-item" href="/host-register.html" data-host-visible="signedIn" data-i18n="host_register_property">Register Property</a>
            <a class="dropdown-item" href="/host-my-listings.html" data-host-visible="signedIn" data-i18n="host_my_listings">My Listings</a>
            <a class="dropdown-item" href="#" id="hostLogoutBtn" data-host-visible="signedIn" data-i18n="host_logout">Logout</a>
          </div>
        </div>
      </nav>

      <div style="display:flex;align-items:center;gap:10px">
        <label for="langSel" style="font-size:12px;opacity:.7" data-i18n="language">Language</label>
        <select id="langSel" class="lang-select">
          <option value="EN">EN</option><option value="KO">KO</option><option value="JA">JA</option><option value="ZH">ZH</option>
          <option value="FR">FR</option><option value="ES">ES</option><option value="DE">DE</option><option value="TR">TR</option>
          <option value="AR">AR</option><option value="RU">RU</option>
        </select>
        <a href="/login.html" id="loginBtn" class="btn btn-ghost" data-i18n="nav_login">Login</a>
        <button id="logoutBtn" class="btn btn-ghost" style="display:none" data-i18n="nav_logout">Logout</button>
      </div>
    </div>
  </header>

  <!-- WELCOME BAR + NOTIFS -->
  <div class="welcome-bar">
    <div class="welcome-wrap">
      <div class="welcome-text" id="welcomeUser">Welcome, Guest üéâ</div>
      <button class="notif-btn" id="notifBtn" aria-label="Notifications">üîî<span class="notif-badge" id="notifBadge" hidden>0</span></button>
      <div class="notif-panel" id="notifPanel" hidden>
        <div class="notif-header"><span>Notifications</span><button id="markAllReadBtn" class="btn btn-ghost" style="padding:6px 10px">Mark all read</button></div>
        <ul id="notifList" class="notif-list"></ul>
        <div class="notif-footer"><a href="/notifications.html">View all</a></div>
      </div>
    </div>
  </div>

  <!-- HERO -->
  <section class="hero">
    <div class="container">
      <h1 class="hero-title"><span data-i18n="hero_luxury">Luxury stays.</span><br><span class="accent" data-i18n="hero_reach">Global reach.</span></h1>
      <p class="hero-sub" data-i18n="hero_sub">Cards, bank transfer & crypto (BTC ¬∑ ETH ¬∑ USDT).</p>

      <div class="search-bar">
        <input class="input" id="searchDestination" type="text" placeholder="Paris, Tokyo, Istanbul‚Ä¶" data-i18n-placeholder="placeholder_city">
        <input class="input" id="checkIn" type="date">
        <input class="input" id="checkOut" type="date">
        <button class="btn btn-ghost" id="btnFilters" type="button" data-i18n="filters">Filters</button>
        <button class="btn btn-gold" id="btnSearch" type="button" data-i18n="search">Search</button>
      </div>
      <div id="searchStatus" class="search-status"></div>

      <div class="features">
        <div class="card"><h3 data-i18n="feat_verified">Verified stays</h3><p data-i18n="feat_verified_sub">Top picks near you.</p></div>
        <div class="card"><h3 data-i18n="feat_rewards">StayWorld+ Rewards</h3><p data-i18n="feat_rewards_sub">Earn points on every booking.</p></div>
        <div class="card"><h3 data-i18n="feat_payments">Secure payments</h3><p data-i18n="feat_payments_sub">Visa, Mastercard, Amex & Crypto.</p></div>
      </div>
    </div>
  </section>

  <!-- MAP -->
  <section class="map-section">
    <div class="container"><div id="map"></div></div>
  </section>

  <!-- PROMO -->
  <section class="container" style="margin-top:-24px; margin-bottom:12px">
    <div style="border:1px solid var(--line);border-radius:16px;padding:16px;background:linear-gradient(90deg,#ffd36e22,#ffd36e11)">
      <strong>üéâ <span data-i18n="promo_title">Ïã†Í∑ú ÌöåÏõê Ï≤´ ÏòàÏïΩ 10% Ìï†Ïù∏</span></strong>
      <div style="opacity:.85" data-i18n="promo_sub">Î©§Î≤ÑÏã≠ Í∞ÄÏûÖÌïòÎ©¥ Ìè¨Ïù∏Ìä∏ Ï†ÅÎ¶Ω + ÎèÖÏ†ê ÌòúÌÉù</div>
    </div>
  </section>

  <!-- EXPLORE (Ìë∏ÌÑ∞ ÏúÑ) -->
  <section class="sw-explore">
    <div class="sw-wrap">
      <header class="sw-explore-head">
        <h2 data-i18n="explore_unique_title">Ìïú Î≤àÏØ§ Î¨µÏñ¥Î≥¥Í≥† Ïã∂ÏùÄ ÏàôÏÜå</h2>
        <p data-i18n="explore_unique_sub">Ï∫êÎπà, ÎπåÎùº, ÏÉ¨Î†à Îì± ÌäπÎ≥ÑÌïú ÏàôÏÜåÎ•º Ï∞æÏïÑÎ≥¥ÏÑ∏Ïöî</p>
      </header>

      <div class="sw-row">
        <button class="sw-nav prev" aria-label="prev">‚Äπ</button>
        <div class="sw-track" data-track="unique">
          <article class="sw-card">
            <div class="sw-card-media" style="background-image:url('/assets/unique/cabin.jpg')">
              <button class="sw-like" aria-label="favorite">‚ô°</button>
              <span class="sw-badge">9.6</span>
            </div>
            <div class="sw-card-body">
              <h3>Forest Cabin</h3>
              <p class="sw-meta">Poland ‚Ä¢ <span data-i18n="explore_exceptional">Exceptional</span></p>
            </div>
          </article>
          <article class="sw-card">
            <div class="sw-card-media" style="background-image:url('/assets/unique/chalet.jpg')">
              <button class="sw-like" aria-label="favorite">‚ô°</button>
              <span class="sw-badge">9.5</span>
            </div>
            <div class="sw-card-body">
              <h3>Alpine Chalet</h3>
              <p class="sw-meta">Germany ‚Ä¢ <span data-i18n="explore_exceptional">Exceptional</span></p>
            </div>
          </article>
          <article class="sw-card">
            <div class="sw-card-media" style="background-image:url('/assets/unique/tinyhouse.jpg')">
              <button class="sw-like" aria-label="favorite">‚ô°</button>
              <span class="sw-badge">9.4</span>
            </div>
            <div class="sw-card-body">
              <h3>Tiny House</h3>
              <p class="sw-meta">Poland ‚Ä¢ <span data-i18n="explore_exceptional">Exceptional</span></p>
            </div>
          </article>
        </div>
        <button class="sw-nav next" aria-label="next">‚Ä∫</button>
      </div>

      <div class="sw-tabs">
        <button class="is-active" data-filter="city" data-i18n="explore_tab_city">City</button>
        <button data-filter="beach" data-i18n="explore_tab_beach">Beach</button>
        <button data-filter="outdoor" data-i18n="explore_tab_outdoor">Outdoor</button>
        <button data-filter="romance" data-i18n="explore_tab_romance">Romance</button>
        <button data-filter="food" data-i18n="explore_tab_food">Food</button>
      </div>

      <div class="sw-grid" data-grid="destinations">
        <a class="sw-spot" data-type="city" style="background-image:url('/assets/dest/athens.jpg')"><span class="sw-spot-title">Athens üá¨üá∑</span></a>
        <a class="sw-spot" data-type="city" style="background-image:url('/assets/dest/dubai.jpg')"><span class="sw-spot-title">Dubai üá¶üá™</span></a>
        <a class="sw-spot" data-type="city" style="background-image:url('/assets/dest/amsterdam.jpg')"><span class="sw-spot-title">Amsterdam üá≥üá±</span></a>
        <a class="sw-spot" data-type="beach" style="background-image:url('/assets/dest/antalya.jpg')"><span class="sw-spot-title">Antalya üèñÔ∏è</span></a>
        <a class="sw-spot" data-type="outdoor" style="background-image:url('/assets/dest/cappadocia.jpg')"><span class="sw-spot-title">Cappadocia ‚õ∞Ô∏è</span></a>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="site-footer">
    <div class="container"><small data-i18n="footer_copy">¬© StayWorld ‚Äî stayworldbooking.com</small></div>
  </footer>

  <script>
  // ===== Build marker to verify latest deploy =====
  window.SW_BUILD = 'index-full-2025-09-02b';

  /* ========================= I18N (10 languages) ========================= */
  const I18N = {
    EN:{nav_home:"Home",nav_membership:"Membership",nav_login:"Login",nav_logout:"Logout",language:"Language",nav_host:"Host",
        host_login:"Host Login",host_signup:"Host Sign Up",host_register_property:"Register Property",host_my_listings:"My Listings",host_logout:"Logout",
        hero_luxury:"Luxury stays.",hero_reach:"Global reach.",hero_sub:"Cards, bank transfer & crypto (BTC ¬∑ ETH ¬∑ USDT).",
        placeholder_city:"Paris, Tokyo, Istanbul‚Ä¶",filters:"Filters",search:"Search",
        feat_verified:"Verified stays",feat_verified_sub:"Top picks near you.",
        feat_rewards:"StayWorld+ Rewards",feat_rewards_sub:"Earn points on every booking.",
        feat_payments:"Secure payments",feat_payments_sub:"Visa, Mastercard, Amex & Crypto.",
        explore_unique_title:"Stays you'll love",explore_unique_sub:"Cabins, villas, chalets and more",
        explore_exceptional:"Exceptional",
        explore_tab_city:"City",explore_tab_beach:"Beach",explore_tab_outdoor:"Outdoor",explore_tab_romance:"Romance",explore_tab_food:"Food",
        promo_title:"New members get 10% off",promo_sub:"Join to earn points and unlock perks.",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"},
    KO:{nav_home:"Ìôà",nav_membership:"Î©§Î≤ÑÏã≠",nav_login:"Î°úÍ∑∏Ïù∏",nav_logout:"Î°úÍ∑∏ÏïÑÏõÉ",language:"Ïñ∏Ïñ¥",nav_host:"Ìò∏Ïä§Ìä∏",
        host_login:"Ìò∏Ïä§Ìä∏ Î°úÍ∑∏Ïù∏",host_signup:"Ìò∏Ïä§Ìä∏ Í∞ÄÏûÖ",host_register_property:"ÏàôÏÜå Îì±Î°ù",host_my_listings:"Ìò∏Ïä§Ìä∏ Îì±Î°ùÎ™©Î°ù",host_logout:"Î°úÍ∑∏ÏïÑÏõÉ",
        hero_luxury:"Îü≠ÏÖîÎ¶¨ Ïä§ÌÖåÏù¥.",hero_reach:"Í∏ÄÎ°úÎ≤å Î¶¨Ïπò.",hero_sub:"Ïπ¥Îìú, Í≥ÑÏ¢åÏù¥Ï≤¥ & ÌÅ¨Î¶ΩÌÜ† (BTC ¬∑ ETH ¬∑ USDT).",
        placeholder_city:"ÌååÎ¶¨, ÎèÑÏøÑ, Ïù¥Ïä§ÌÉÑÎ∂à‚Ä¶",filters:"ÌïÑÌÑ∞",search:"Í≤ÄÏÉâ",
        feat_verified:"Í≤ÄÏ¶ùÎêú Ïä§ÌÖåÏù¥",feat_verified_sub:"Í∞ÄÍπåÏö¥ Ï∂îÏ≤ú ÏàôÏÜå.",
        feat_rewards:"StayWorld+ Î¶¨ÏõåÎìú",feat_rewards_sub:"ÏòàÏïΩÎßàÎã§ Ìè¨Ïù∏Ìä∏ Ï†ÅÎ¶Ω.",
        feat_payments:"ÏïàÏ†ÑÌïú Í≤∞Ï†ú",feat_payments_sub:"VISA, ÎßàÏä§ÌÑ∞, ÏïÑÎ©ïÏä§ & ÌÅ¨Î¶ΩÌÜ†.",
        explore_unique_title:"Ìïú Î≤àÏØ§ Î¨µÏñ¥Î≥¥Í≥† Ïã∂ÏùÄ ÏàôÏÜå",explore_unique_sub:"Ï∫êÎπà, ÎπåÎùº, ÏÉ¨Î†à Îì± ÌäπÎ≥ÑÌïú ÏàôÏÜå",
        explore_exceptional:"ÌèâÏ†ê ÌõåÎ•≠Ìï®",
        explore_tab_city:"ÎèÑÏãú",explore_tab_beach:"Î∞îÎã§",explore_tab_outdoor:"ÏûêÏó∞",explore_tab_romance:"Î°úÎß®Ïä§",explore_tab_food:"ÎßõÏßë",
        promo_title:"Ïã†Í∑ú ÌöåÏõê Ï≤´ ÏòàÏïΩ 10% Ìï†Ïù∏",promo_sub:"Î©§Î≤ÑÏã≠ Í∞ÄÏûÖÌïòÎ©¥ Ìè¨Ïù∏Ìä∏ Ï†ÅÎ¶Ω + ÎèÖÏ†ê ÌòúÌÉù",
        footer_copy:"¬© Ïä§ÌÖåÏù¥ÏõîÎìú ‚Äî stayworldbooking.com"},
    JA:{nav_home:"„Éõ„Éº„É†",nav_membership:"„É°„É≥„Éê„Éº„Ç∑„ÉÉ„Éó",nav_login:"„É≠„Ç∞„Ç§„É≥",nav_logout:"„É≠„Ç∞„Ç¢„Ç¶„Éà",language:"Ë®ÄË™û",nav_host:"„Éõ„Çπ„Éà",
        host_login:"„Éõ„Çπ„Éà„É≠„Ç∞„Ç§„É≥",host_signup:"„Éõ„Çπ„ÉàÁôªÈå≤",host_register_property:"Áâ©‰ª∂„ÇíÁôªÈå≤",host_my_listings:"„Éû„Ç§„É™„Çπ„ÉÜ„Ç£„É≥„Ç∞",host_logout:"„É≠„Ç∞„Ç¢„Ç¶„Éà",
        hero_luxury:"Ë¥ÖÊ≤¢„Å™ÊªûÂú®„ÄÇ",hero_reach:"„Ç∞„É≠„Éº„Éê„É´„Å´„ÄÇ",hero_sub:"„Ç´„Éº„Éâ„ÄÅÈäÄË°åÊåØËæº„ÄÅÊöóÂè∑Ë≥áÁî£ÔºàBTC„ÉªETH„ÉªUSDTÔºâ„ÄÇ",
        placeholder_city:"„Éë„É™„ÄÅÊù±‰∫¨„ÄÅ„Ç§„Çπ„Çø„É≥„Éñ„Éº„É´‚Ä¶",filters:"„Éï„Ç£„É´„Çø„Éº",search:"Ê§úÁ¥¢",
        feat_verified:"Ê§úË®ºÊ∏à„Åø„ÅÆÂÆø",feat_verified_sub:"Ëøë„Åè„ÅÆ„Åä„Åô„Åô„ÇÅ„ÄÇ",
        feat_rewards:"StayWorld+ „É™„ÉØ„Éº„Éâ",feat_rewards_sub:"‰∫àÁ¥ÑÊØé„Å´„Éù„Ç§„É≥„Éà„ÄÇ",
        feat_payments:"ÂÆâÂÖ®„Å™ÊîØÊâï„ÅÑ",feat_payments_sub:"VISA, Master, Amex & Crypto„ÄÇ",
        explore_unique_title:"Ê∞ó„Å´ÂÖ•„ÇãÂÆø",explore_unique_sub:"„Ç≠„É£„Éì„É≥„ÄÅ„É¥„Ç£„É©„ÄÅ„Ç∑„É£„É¨„Éº„Å™„Å©",
        explore_exceptional:"Á¥†Êô¥„Çâ„Åó„ÅÑ",
        explore_tab_city:"ÈÉΩÂ∏Ç",explore_tab_beach:"„Éì„Éº„ÉÅ",explore_tab_outdoor:"„Ç¢„Ç¶„Éà„Éâ„Ç¢",explore_tab_romance:"„É≠„Éû„É≥„Çπ",explore_tab_food:"„Ç∞„É´„É°",
        promo_title:"Êñ∞Ë¶è‰ºöÂì°10%OFF",promo_sub:"ÂÖ•‰ºö„Åß„Éù„Ç§„É≥„Éà&ÁâπÂÖ∏",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"},
    ZH:{nav_home:"È¶ñÈ°µ",nav_membership:"‰ºöÂëò",nav_login:"ÁôªÂΩï",nav_logout:"ÈÄÄÂá∫ÁôªÂΩï",language:"ËØ≠Ë®Ä",nav_host:"Êàø‰∏ú",
        host_login:"Êàø‰∏úÁôªÂΩï",host_signup:"Êàø‰∏úÊ≥®ÂÜå",host_register_property:"ÁôªËÆ∞ÊàøÊ∫ê",host_my_listings:"ÊàëÁöÑÊàøÊ∫ê",host_logout:"ÈÄÄÂá∫ÁôªÂΩï",
        hero_luxury:"Â•¢Âçé‰ΩèÂÆø„ÄÇ",hero_reach:"ÂÖ®ÁêÉË¶ÜÁõñ„ÄÇ",hero_sub:"Èì∂Ë°åÂç°„ÄÅËΩ¨Ë¥¶‰∏éÂä†ÂØÜË¥ßÂ∏ÅÔºàBTC ¬∑ ETH ¬∑ USDTÔºâ„ÄÇ",
        placeholder_city:"Â∑¥Èªé„ÄÅ‰∏ú‰∫¨„ÄÅ‰ºäÊñØÂù¶Â∏ÉÂ∞î‚Ä¶",filters:"Á≠õÈÄâ",search:"ÊêúÁ¥¢",
        feat_verified:"Â∑≤È™åËØÅ‰ΩèÂÆø",feat_verified_sub:"ÈôÑËøëÁ≤æÈÄâ„ÄÇ",
        feat_rewards:"StayWorld+ Â•ñÂä±",feat_rewards_sub:"ÊØèÊ¨°È¢ÑËÆ¢ËµöÁßØÂàÜ„ÄÇ",
        feat_payments:"ÂÆâÂÖ®ÊîØ‰ªò",feat_payments_sub:"Visa„ÄÅMastercard„ÄÅAmex ‰∏éÂä†ÂØÜË¥ßÂ∏Å„ÄÇ",
        explore_unique_title:"‰Ω†‰ºöÂñúÊ¨¢ÁöÑ‰ΩèÂÆø",explore_unique_sub:"Â∞èÊú®Â±ã„ÄÅÂà´Â¢Ö„ÄÅÊú®Â±ãÁ≠â",
        explore_exceptional:"ÊûÅÂ•Ω",
        explore_tab_city:"ÂüéÂ∏Ç",explore_tab_beach:"Êµ∑Êª©",explore_tab_outdoor:"Êà∑Â§ñ",explore_tab_romance:"Êµ™Êº´",explore_tab_food:"ÁæéÈ£ü",
        promo_title:"Êñ∞‰ºöÂëòÈ¶ñÂçï9Êäò",promo_sub:"Âä†ÂÖ•‰ºöÂëòËµöÁßØÂàÜ‰∫´ÁâπÊùÉ",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"},
    FR:{nav_home:"Accueil",nav_membership:"Adh√©sion",nav_login:"Connexion",nav_logout:"D√©connexion",language:"Langue",nav_host:"H√¥te",
        host_login:"Connexion h√¥te",host_signup:"Inscription h√¥te",host_register_property:"Enregistrer un logement",host_my_listings:"Mes annonces",host_logout:"D√©connexion",
        hero_luxury:"S√©jours de luxe.",hero_reach:"Port√©e mondiale.",hero_sub:"Carte, virement & crypto (BTC ¬∑ ETH ¬∑ USDT).",
        placeholder_city:"Paris, Tokyo, Istanbul‚Ä¶",filters:"Filtres",search:"Rechercher",
        feat_verified:"Logements v√©rifi√©s",feat_verified_sub:"Meilleurs choix pr√®s de chez vous.",
        feat_rewards:"R√©compenses StayWorld+",feat_rewards_sub:"Des points √† chaque r√©servation.",
        feat_payments:"Paiements s√©curis√©s",feat_payments_sub:"Visa, Mastercard, Amex & Crypto.",
        explore_unique_title:"S√©jours √† d√©couvrir",explore_unique_sub:"Cabanes, villas, chalets et plus",
        explore_exceptional:"Exceptionnel",
        explore_tab_city:"Ville",explore_tab_beach:"Plage",explore_tab_outdoor:"Plein air",explore_tab_romance:"Romance",explore_tab_food:"Gastronomie",
        promo_title:"-10% pour les nouveaux membres",promo_sub:"Rejoignez-nous pour des points & avantages",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"},
    ES:{nav_home:"Inicio",nav_membership:"Membres√≠a",nav_login:"Ingresar",nav_logout:"Cerrar sesi√≥n",language:"Idioma",nav_host:"Anfitri√≥n",
        host_login:"Inicio de sesi√≥n de anfitri√≥n",host_signup:"Registro de anfitri√≥n",host_register_property:"Registrar propiedad",host_my_listings:"Mis anuncios",host_logout:"Cerrar sesi√≥n",
        hero_luxury:"Estancias de lujo.",hero_reach:"Alcance global.",hero_sub:"Tarjetas, transferencia bancaria y cripto (BTC ¬∑ ETH ¬∑ USDT).",
        placeholder_city:"Par√≠s, Tokio, Estambul‚Ä¶",filters:"Filtros",search:"Buscar",
        feat_verified:"Alojamientos verificados",feat_verified_sub:"Mejores opciones cerca de ti.",
        feat_rewards:"Recompensas StayWorld+",feat_rewards_sub:"Puntos en cada reserva.",
        feat_payments:"Pagos seguros",feat_payments_sub:"Visa, Mastercard, Amex y Cripto.",
        explore_unique_title:"Alojamientos que te encantar√°n",explore_unique_sub:"Caba√±as, villas, chalets y m√°s",
        explore_exceptional:"Fant√°stico",
        explore_tab_city:"Ciudad",explore_tab_beach:"Playa",explore_tab_outdoor:"Aire libre",explore_tab_romance:"Romance",explore_tab_food:"Comida",
        promo_title:"10% de descuento para nuevos miembros",promo_sub:"√önete para ganar puntos y beneficios",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"},
    DE:{nav_home:"Start",nav_membership:"Mitgliedschaft",nav_login:"Login",nav_logout:"Abmelden",language:"Sprache",nav_host:"Gastgeber",
        host_login:"Gastgeber-Login",host_signup:"Gastgeber-Registrierung",host_register_property:"Unterkunft registrieren",host_my_listings:"Meine Inserate",host_logout:"Abmelden",
        hero_luxury:"Luxuri√∂se Aufenthalte.",hero_reach:"Globale Reichweite.",hero_sub:"Karten, √úberweisung & Krypto (BTC ¬∑ ETH ¬∑ USDT).",
        placeholder_city:"Paris, Tokio, Istanbul‚Ä¶",filters:"Filter",search:"Suchen",
        feat_verified:"Verifizierte Unterk√ºnfte",feat_verified_sub:"Top-Auswahl in deiner N√§he.",
        feat_rewards:"StayWorld+ Pr√§mien",feat_rewards_sub:"Punkte bei jeder Buchung.",
        feat_payments:"Sichere Zahlungen",feat_payments_sub:"Visa, Mastercard, Amex & Krypto.",
        explore_unique_title:"Unterk√ºnfte, die begeistern",explore_unique_sub:"H√ºtten, Villen, Chalets u.v.m.",
        explore_exceptional:"Hervorragend",
        explore_tab_city:"Stadt",explore_tab_beach:"Strand",explore_tab_outdoor:"Drau√üen",explore_tab_romance:"Romantik",explore_tab_food:"Essen",
        promo_title:"10% f√ºr neue Mitglieder",promo_sub:"Mitglied werden, Punkte sammeln",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"},
    TR:{nav_home:"Ana Sayfa",nav_membership:"√úyelik",nav_login:"Giri≈ü",nav_logout:"√áƒ±kƒ±≈ü",language:"Dil",nav_host:"Ev Sahibi",
        host_login:"Ev Sahibi Giri≈üi",host_signup:"Ev Sahibi Kaydƒ±",host_register_property:"ƒ∞lan Olu≈ütur",host_my_listings:"ƒ∞lanlarƒ±m",host_logout:"√áƒ±kƒ±≈ü",
        hero_luxury:"L√ºks konaklamalar.",hero_reach:"K√ºresel eri≈üim.",hero_sub:"Kart, havale ve kripto (BTC ¬∑ ETH ¬∑ USDT).",
        placeholder_city:"Paris, Tokyo, ƒ∞stanbul‚Ä¶",filters:"Filtreler",search:"Ara",
        feat_verified:"Doƒürulanmƒ±≈ü konaklamalar",feat_verified_sub:"Yakƒ±nƒ±nƒ±zdaki en iyi se√ßenekler.",
        feat_rewards:"StayWorld+ √ñd√ºlleri",feat_rewards_sub:"Her rezervasyonda puan kazanƒ±n.",
        feat_payments:"G√ºvenli √∂demeler",feat_payments_sub:"Visa, Mastercard, Amex & Kripto.",
        explore_unique_title:"Bayƒ±lacaƒüƒ±nƒ±z konaklamalar",explore_unique_sub:"Kul√ºbeler, villalar, daƒü evleri ve daha fazlasƒ±",
        explore_exceptional:"Harika",
        explore_tab_city:"≈ûehir",explore_tab_beach:"Plaj",explore_tab_outdoor:"A√ßƒ±k hava",explore_tab_romance:"Romantik",explore_tab_food:"Yemek",
        promo_title:"Yeni √ºyelere %10 indirim",promo_sub:"Puan ve ayrƒ±calƒ±klar i√ßin katƒ±lƒ±n",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"},
    AR:{nav_home:"ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",nav_membership:"ÿßŸÑÿπÿ∂ŸàŸäÿ©",nav_login:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",nav_logout:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",language:"ÿßŸÑŸÑÿ∫ÿ©",nav_host:"ÿßŸÑŸÖÿ∂ŸäŸÅ",
        host_login:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿØÿÆŸàŸÑ ÿßŸÑŸÖÿ∂ŸäŸÅ",host_signup:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑŸÖÿ∂ŸäŸÅ",host_register_property:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿπŸÇÿßÿ±",host_my_listings:"ŸÇŸàÿßÿ¶ŸÖŸä",host_logout:"ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿÆÿ±Ÿàÿ¨",
        hero_luxury:"ÿ•ŸÇÿßŸÖÿßÿ™ ŸÅÿßÿÆÿ±ÿ©.",hero_reach:"ÿßŸÜÿ™ÿ¥ÿßÿ± ÿπÿßŸÑŸÖŸä.",hero_sub:"ÿ®ÿ∑ÿßŸÇÿßÿ™ÿå ÿ™ÿ≠ŸàŸäŸÑ ÿ®ŸÜŸÉŸä ŸàÿπŸÖŸÑÿßÿ™ ŸÖÿ¥ŸÅÿ±ÿ© (BTC ¬∑ ETH ¬∑ USDT).",
        placeholder_city:"ÿ®ÿßÿ±Ÿäÿ≥ÿå ÿ∑ŸàŸÉŸäŸàÿå ÿ•ÿ≥ÿ∑ŸÜÿ®ŸàŸÑ‚Ä¶",filters:"ÿßŸÑŸÅŸÑÿßÿ™ÿ±",search:"ÿ®ÿ≠ÿ´",
        feat_verified:"ÿ•ŸÇÿßŸÖÿßÿ™ ŸÖŸàÿ´ŸàŸÇÿ©",feat_verified_sub:"ÿ£ŸÅÿ∂ŸÑ ÿßŸÑÿÆŸäÿßÿ±ÿßÿ™ ÿ®ÿßŸÑŸÇÿ±ÿ® ŸÖŸÜŸÉ.",
        feat_rewards:"ŸÖŸÉÿßŸÅÿ¢ÿ™ StayWorld+",feat_rewards_sub:"ŸÜŸÇÿßÿ∑ ŸÖÿπ ŸÉŸÑ ÿ≠ÿ¨ÿ≤.",
        feat_payments:"ŸÖÿØŸÅŸàÿπÿßÿ™ ÿ¢ŸÖŸÜÿ©",feat_payments_sub:"Visa ŸàMastercard ŸàAmex ŸàÿßŸÑÿπŸÖŸÑÿßÿ™ ÿßŸÑŸÖÿ¥ŸÅÿ±ÿ©.",
        explore_unique_title:"ÿ•ŸÇÿßŸÖÿßÿ™ ÿ≥ÿ™ÿπÿ¨ÿ®ŸÉ",explore_unique_sub:"ÿ£ŸÉŸàÿßÿÆ ŸàŸÅŸäŸÑÿßÿ™ Ÿàÿ¥ÿßŸÑŸäŸáÿßÿ™ Ÿàÿ£ŸÉÿ´ÿ±",
        explore_exceptional:"ÿ±ÿßÿ¶ÿπ",
        explore_tab_city:"ŸÖÿØŸäŸÜÿ©",explore_tab_beach:"ÿ¥ÿßÿ∑ÿ¶",explore_tab_outdoor:"ÿÆÿßÿ±ÿ¨Ÿä",explore_tab_romance:"ÿ±ŸàŸÖÿßŸÜÿ≥Ÿä",explore_tab_food:"ÿ∑ÿπÿßŸÖ",
        promo_title:"ÿÆÿµŸÖ 10% ŸÑŸÑÿ£ÿπÿ∂ÿßÿ° ÿßŸÑÿ¨ÿØÿØ",promo_sub:"ÿßŸÜÿ∂ŸÖ ŸÑÿ™ÿ≠ÿµŸÑ ÿπŸÑŸâ ÿßŸÑŸÜŸÇÿßÿ∑ ŸàÿßŸÑŸÖÿ≤ÿßŸäÿß",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"},
    RU:{nav_home:"–ì–ª–∞–≤–Ω–∞—è",nav_membership:"–ü–æ–¥–ø–∏—Å–∫–∞",nav_login:"–í–æ–π—Ç–∏",nav_logout:"–í—ã–π—Ç–∏",language:"–Ø–∑—ã–∫",nav_host:"–•–æ—Å—Ç",
        host_login:"–í—Ö–æ–¥ —Ö–æ—Å—Ç–∞",host_signup:"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ö–æ—Å—Ç–∞",host_register_property:"–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç",host_my_listings:"–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è",host_logout:"–í—ã–π—Ç–∏",
        hero_luxury:"–†–æ—Å–∫–æ—à–Ω–æ–µ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏–µ.",hero_reach:"–ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ—Ö–≤–∞—Ç.",hero_sub:"–ö–∞—Ä—Ç—ã, –ø–µ—Ä–µ–≤–æ–¥ –∏ –∫—Ä–∏–ø—Ç–æ (BTC ¬∑ ETH ¬∑ USDT).",
        placeholder_city:"–ü–∞—Ä–∏–∂, –¢–æ–∫–∏–æ, –°—Ç–∞–º–±—É–ª‚Ä¶",filters:"–§–∏–ª—å—Ç—Ä—ã",search:"–ü–æ–∏—Å–∫",
        feat_verified:"–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã",feat_verified_sub:"–õ—É—á—à–∏–µ –º–µ—Å—Ç–∞ —Ä—è–¥–æ–º —Å –≤–∞–º–∏.",
        feat_rewards:"–ë–æ–Ω—É—Å—ã StayWorld+",feat_rewards_sub:"–ë–∞–ª–ª—ã –∑–∞ –∫–∞–∂–¥–æ–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.",
        feat_payments:"–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏",feat_payments_sub:"Visa, Mastercard, Amex –∏ –∫—Ä–∏–ø—Ç–æ.",
        explore_unique_title:"–ì–æ—Å—Ç–∏–Ω–∏—Ü—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –ø–æ–Ω—Ä–∞–≤—è—Ç—Å—è",explore_unique_sub:"–î–æ–º–∏–∫–∏, –≤–∏–ª–ª—ã, —à–∞–ª–µ –∏ –¥—Ä.",
        explore_exceptional:"–û—Ç–ª–∏—á–Ω–æ",
        explore_tab_city:"–ì–æ—Ä–æ–¥",explore_tab_beach:"–ü–ª—è–∂",explore_tab_outdoor:"–ü—Ä–∏—Ä–æ–¥–∞",explore_tab_romance:"–†–æ–º–∞–Ω—Ç–∏–∫–∞",explore_tab_food:"–ï–¥–∞",
        promo_title:"-10% –¥–ª—è –Ω–æ–≤—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤",promo_sub:"–í—Å—Ç—É–ø–∞–π—Ç–µ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –±–∞–ª–ª—ã –∏ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏",
        footer_copy:"¬© StayWorld ‚Äî stayworldbooking.com"}
  };

  // Words dictionary (amenities etc.) ‚Äî kept short; expand as needed
  const WORDS = {
    EN:{"Wi-Fi":"Wi-Fi","Pool":"Pool","Parking":"Parking","Breakfast":"Breakfast","Any":"Any","beds":"beds","baths":"baths","4.5+":"4.5+","4.0+":"4.0+"},
    KO:{"Wi-Fi":"ÏôÄÏù¥ÌååÏù¥","Pool":"ÏàòÏòÅÏû•","Parking":"Ï£ºÏ∞®","Breakfast":"Ï°∞Ïãù","Any":"Î¨¥Í¥Ä","beds":"Ïπ®ÎåÄ","baths":"ÏöïÏã§","4.5+":"4.5+","4.0+":"4.0+"}
  };

  const CURRENCIES = {
    USD:{symbol:'$',rate:1,locale:'en-US',name:'USD'}, EUR:{symbol:'‚Ç¨',rate:0.92,locale:'fr-FR',name:'EUR'},
    KRW:{symbol:'‚Ç©',rate:1300,locale:'ko-KR',name:'KRW'}, JPY:{symbol:'¬•',rate:155,locale:'ja-JP',name:'JPY'},
    CNY:{symbol:'¬•',rate:7.2,locale:'zh-CN',name:'CNY'}, TRY:{symbol:'‚Ç∫',rate:33,locale:'tr-TR',name:'TRY'},
    RUB:{symbol:'‚ÇΩ',rate:90,locale:'ru-RU',name:'RUB'}, GBP:{symbol:'¬£',rate:0.78,locale:'en-GB',name:'GBP'},
    AED:{symbol:'ÿØ.ÿ•',rate:3.67,locale:'ar-AE',name:'AED'}, CAD:{symbol:'$',rate:1.36,locale:'en-CA',name:'CAD'}
  };
  const LANG_TO_CUR = { EN:'USD', KO:'KRW', JA:'JPY', ZH:'CNY', FR:'EUR', ES:'EUR', DE:'EUR', TR:'TRY', AR:'AED', RU:'RUB' };

  function t(k){ const lang = localStorage.getItem('sw_lang') || 'EN'; const dict = I18N[lang]||I18N.EN; return dict[k] || (I18N.EN[k]||k); }
  function w(k){ const lang=localStorage.getItem('sw_lang')||'EN'; return (WORDS[lang]||WORDS.EN||{})[k]||k; }
  function applyI18N(){
    const lang = localStorage.getItem('sw_lang') || 'EN';
    const sel=document.getElementById('langSel'); if(sel) sel.value=lang;
    const dict = I18N[lang]||I18N.EN;
    document.querySelectorAll('[data-i18n]').forEach(el=>{ const k=el.getAttribute('data-i18n'); if(dict[k]) el.textContent=dict[k];});
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el=>{ const k=el.getAttribute('data-i18n-placeholder'); if(dict[k]) el.setAttribute('placeholder', dict[k]);});
    // Welcome text
    const user = JSON.parse(localStorage.getItem('sw_user')||'null');
    const wel = document.getElementById('welcomeUser'); if(wel) wel.textContent = user?`Welcome, ${user.name} üéâ`:'Welcome, Guest üéâ';
  }

  document.getElementById('langSel').addEventListener('change', (e)=>{
    const lang=e.target.value; localStorage.setItem('sw_lang', lang); setCurrencyByLang(lang); applyI18N();
  });

  function setCurrencyByLang(lang){ localStorage.setItem('sw_cur', LANG_TO_CUR[lang]||'USD'); }
  function fmtMoneyUSDToLocal(usd){ const code = localStorage.getItem('sw_cur')||'USD'; const cur=CURRENCIES[code]||CURRENCIES.USD; const val=usd*cur.rate; return new Intl.NumberFormat(cur.locale,{style:'currency',currency:cur.name,maximumFractionDigits:0}).format(val); }

  /* ========================= Auth (user/host/google with fallback) ========================= */
  const Auth = {
    isLogged(){ return localStorage.getItem('sw_logged')==='1'; },
    login(type,profile){ try{ localStorage.setItem('sw_logged','1'); localStorage.setItem('sw_login_type', type||'user'); if(profile) localStorage.setItem('sw_user', JSON.stringify(profile)); }catch(_){ } renderAuth(); },
    logout(){ try{ localStorage.removeItem('sw_logged'); localStorage.removeItem('sw_login_type'); localStorage.removeItem('sw_user'); }catch(_){} renderAuth(); }
  };
  function renderAuth(){ const logged = Auth.isLogged(); document.getElementById('loginBtn').style.display = logged ? 'none' : ''; document.getElementById('logoutBtn').style.display = logged ? '' : 'none'; const user=JSON.parse(localStorage.getItem('sw_user')||'null'); const wel=document.getElementById('welcomeUser'); if(wel) wel.textContent = user?`Welcome, ${user.name} üéâ`:'Welcome, Guest üéâ'; updateHostMenu(); }
  window.googleLogin = async function(){ try{ const r=await fetch('/api/auth/google',{method:'POST',credentials:'include'}); if(r.ok){ const u=await r.json().catch(()=>({name:'Google User'})); Auth.login('google', u||{name:'Google User'}); return; } }catch(_){ } Auth.login('google',{name:'Google User'}); };
  window.userLogin = (name='Member')=> Auth.login('user',{name});
  window.hostLogin = (name='Host')=> Auth.login('host',{name});

  function updateHostMenu(){ const panel = document.querySelector('#hostMenu .dropdown-panel'); if(!panel) return; const signedIn = Auth.isLogged(); panel.querySelectorAll('[data-host-visible]').forEach(el=>el.style.display='none'); panel.querySelectorAll(`[data-host-visible="${signedIn?'signedIn':'signedOut'}"]`).forEach(el=>el.style.display='block'); }

  document.getElementById('logoutBtn').addEventListener('click',(e)=>{ e.preventDefault(); Auth.logout(); alert('Logged out'); location.href='/'; });
  // Host dropdown mobile toggle
  (function(){ const hostMenu = document.getElementById('hostMenu'); if(!hostMenu) return; const toggle=hostMenu.querySelector('.dropdown-toggle'); let hideTimer; toggle?.addEventListener('click',(e)=>{ e.preventDefault(); hostMenu.classList.toggle('open');}); hostMenu.addEventListener('mouseleave',()=>{ hideTimer=setTimeout(()=>hostMenu.classList.remove('open'),180);}); hostMenu.addEventListener('mouseenter',()=> clearTimeout(hideTimer)); })();

  /* ========================= Notifications ========================= */
  (function(){ const btn=document.getElementById('notifBtn'), panel=document.getElementById('notifPanel'), badge=document.getElementById('notifBadge'), list=document.getElementById('notifList'), markAll=document.getElementById('markAllReadBtn'); if(!btn||!panel) return; let items=[]; function render(){ const unread = items.filter(x=>!x.read).length; if(unread>0){ badge.textContent=unread>99?'99+':String(unread); badge.hidden=false;} else badge.hidden=true; list.innerHTML = items.map(it=>`<li class="notif-item" data-id="${it.id}"><span class="notif-dot" style="opacity:${it.read?.5:1}"></span><div><div style="font-weight:700">${it.title}</div><div style="opacity:.8;font-size:13px">${it.desc||''}</div></div><div style="opacity:.7;font-size:12px">${it.time||''}</div></li>`).join('') || `<li class="notif-item"><div>No notifications</div></li>`; }
    function fetchIt(){ fetch('/api/notifications',{credentials:'include'}).then(r=>r.json()).then(d=>{items=d; render();}).catch(()=>{ items=[ {id:1,title:'Booking confirmed',desc:'Istanbul ‚Ä¢ 2‚Äì5 Sep',time:'2m ago',read:false}, {id:2,title:'Level progress',desc:'GOLD ‚Üí 78% reached',time:'1h ago',read:false}, {id:3,title:'Promo',desc:'Autumn deal unlocked',time:'Yesterday',read:true} ]; render(); }); }
    btn.addEventListener('click',(e)=>{ e.stopPropagation(); const hid=panel.hasAttribute('hidden'); document.querySelectorAll('.notif-panel').forEach(p=>p.setAttribute('hidden','')); if(hid) panel.removeAttribute('hidden'); else panel.setAttribute('hidden',''); });
    document.addEventListener('click',(e)=>{ if(!panel.contains(e.target) && e.target!==btn) panel.setAttribute('hidden',''); });
    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape') panel.setAttribute('hidden',''); });
    markAll?.addEventListener('click',()=>{ fetch('/api/notifications/mark-all-read',{method:'POST',credentials:'include'}).catch(()=>{}).finally(()=>{ items=items.map(x=>({...x,read:true})); render();}); });
    fetchIt(); setInterval(fetchIt,30000);
  })();

  /* ========================= Map + Search ========================= */
  let map, marker; function initMap(){ map=L.map('map',{scrollWheelZoom:true}).setView([48.8566,2.3522],12); L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'&copy; OpenStreetMap'}).addTo(map);} function goTo(lat,lon,label){ if(marker) marker.remove(); marker=L.marker([lat,lon]).addTo(map).bindPopup(label||'').openPopup(); map.setView([lat,lon],13,{animate:true}); document.getElementById('map').scrollIntoView({behavior:'smooth',block:'start'}); }
  const statusEl=document.getElementById('searchStatus'); function setStatus(msg){ statusEl.textContent=msg||''; statusEl.style.opacity=msg?1:0; if(msg){clearTimeout(statusEl._t); statusEl._t=setTimeout(()=>statusEl.style.opacity=0,3000);} } function setLoading(on){ const b=document.getElementById('btnSearch'); b.disabled=on; b.classList.toggle('loading',on); b.textContent=on?'‚Ä¶':t('search'); }
  async function geocodeAny(q){ const prov=[q=>`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(q)}`,q=>`https://photon.komoot.io/api/?limit=1&q=${encodeURIComponent(q)}`]; for(const make of prov){ try{ const r=await fetch(make(q),{headers:{'Accept':'application/json'}}); if(!r.ok) continue; const data=await r.json(); if(Array.isArray(data)&&data[0]) return {lat:+data[0].lat,lon:+data[0].lon,label:data[0].display_name||q}; if(data?.features?.[0]){const f=data.features[0];return {lat:f.geometry.coordinates[1],lon:f.geometry.coordinates[0],label:f.properties.name||f.properties.city||f.properties.country||q};} }catch(_){ } } throw new Error('no_results'); }
  async function runSearch(){ const q=(document.getElementById('searchDestination').value||'').trim(); if(!q){document.getElementById('searchDestination').focus(); return;} try{ setLoading(true); setStatus('Searching‚Ä¶'); const {lat,lon,label}=await geocodeAny(q); goTo(lat,lon,label); setStatus(`Found: ${label}`);} catch(_){ setStatus('No results. Try another place.'); alert('Í≤ÄÏÉâ Í≤∞Í≥ºÍ∞Ä ÏóÜÏäµÎãàÎã§. Îã§Î•∏ ÎèÑÏãúÎ•º ÏûÖÎ†•Ìï¥Î≥¥ÏÑ∏Ïöî.'); } finally{ setLoading(false); } }
  document.getElementById('btnSearch').addEventListener('click',runSearch,{capture:true}); ['searchDestination','checkIn','checkOut'].forEach(id=>{const el=document.getElementById(id); el&&el.addEventListener('keydown',e=>{if(e.key==='Enter') runSearch();});});

  /* ========================= Filters Drawer (rich) ========================= */
  const GROUPS=[
    {t:'f_price', kind:'price'},
    {t:'f_staytype', checks:['Hotel','Motel','Hostel','Apartment','Villa','Ryokan','Guesthouse','B&B']},
    {t:'f_review', radios:['4.5+','4.0+','Any']},
    {t:'f_beds', inputs:[['number','beds',{min:1,value:1}],['number','baths',{min:1,value:1}]]},
    {t:'f_pets', checks:['Allowed']},
    {t:'f_checkin', checks:['Self check-in']},
    {t:'f_amen', checks:['Wi-Fi','Kitchen','Parking','Pool','Air conditioning','Gym','Workspace','Washer','Dryer','Breakfast']},
    {t:'f_booking', checks:['Instant book','Request to book']},
    {t:'f_verify', checks:['Verified listings only','Verified reviews']},
    {t:'f_long', checks:['Show long-stay deals']},
    {t:'f_biz', checks:['B2B-ready','Invoice available']},
    {t:'f_loc', checks:['Near airport','Near station','Near beach','City center']},
    {t:'f_access', checks:['Step-free access','Elevator','Wide doorway','Accessible bathroom']},
    {t:'f_ex', checks:['Nature','Camping','Traditional','Ski-in/out','Wine country']},
    {t:'f_view', checks:['Sea view','City view','Mountain view','Garden']},
    {t:'f_safe', checks:['Carbon monoxide alarm','Smoke alarm','First aid kit']},
    {t:'f_family', checks:['Crib','High chair','Stroller friendly']},
    {t:'f_ent', checks:['TV','Netflix','Game console']},
    {t:'f_out', checks:['BBQ grill','Patio','Private garden']},
    {t:'f_park', checks:['On-site','Street','Paid garage']},
  ];

  function ensureDrawer(){ let d=document.getElementById('filterDrawer'); if(d) return d; d=document.createElement('div'); d.id='filterDrawer'; d.setAttribute('aria-hidden','true'); d.innerHTML=`<div class="back"></div><div class="panel"><div class="head"><strong id="fTitle">${t('filters')}</strong><div style="display:flex;gap:8px;align-items:center"><label for="currencySelect" id="curLabel" style="font-size:12px;opacity:.8">Currency</label><select id="currencySelect" class="lang-select" style="padding:6px 10px">${Object.keys(CURRENCIES).map(k=>`<option value="${k}">${k}</option>`).join('')}</select><button id="swClose" class="btn btn-ghost">‚úï</button></div></div><div id="filterGrid"></div><div class="foot"><button id="swReset" class="btn btn-ghost">Reset</button><button id="swApply" class="btn btn-gold">Apply</button></div></div>`; document.body.appendChild(d); const grid=d.querySelector('#filterGrid'); GROUPS.forEach((g,gi)=>{ const box=document.createElement('div'); box.className='box'; box.innerHTML=`<h4 data-title="${g.t}">${t(g.t)||g.t}</h4>`; if(g.kind==='price'){ const html=`<div style="display:grid;gap:10px"><div style="display:flex;justify-content:space-between;font-size:13px"><span>${t('f_price')||'Price per night'}</span><span><span id="priceMinVal">‚Äì</span> ~ <span id="priceMaxVal">‚Äì</span></span></div><label style="font-size:12px;opacity:.8">Min</label><input type="range" id="priceMin" min="0" max="1000" step="10" value="100"><label style="font-size:12px;opacity:.8">Max</label><input type="range" id="priceMax" min="0" max="5000" step="50" value="800"></div>`; const wrap=document.createElement('div'); wrap.innerHTML=html; box.appendChild(wrap);} (g.inputs||[]).forEach(([type,id,attrs])=>{ const wrap=document.createElement('div'); wrap.style.margin='6px 0'; wrap.innerHTML=`<label style="font-size:12px">${w(id)}</label><input type="${type}" id="${id}" style="width:100%">`; Object.entries(attrs||{}).forEach(([k,v])=>wrap.querySelector('input').setAttribute(k,v)); box.appendChild(wrap); }); (g.radios||[]).forEach((name,ri)=>{ const id=`rg_${gi}_${ri}`; const lab=document.createElement('label'); lab.style.cssText='display:inline-flex;align-items:center;gap:6px;margin:6px 10px 0 0'; lab.innerHTML=`<input type="radio" name="rg_${gi}" id="${id}" ${/Any/i.test(name)?'checked':''}> <span>${w(name)}</span>`; box.appendChild(lab); }); (g.checks||[]).forEach((name,ci)=>{ const id=`ck_${gi}_${ci}`; const lab=document.createElement('label'); lab.style.cssText='display:inline-flex;align-items:center;gap:6px;margin:6px 10px 0 0'; lab.innerHTML=`<input type="checkbox" id="${id}"> <span>${w(name)}</span>`; box.appendChild(lab); }); grid.appendChild(box); }); const back=d.querySelector('.back'); const close=()=>{d.setAttribute('aria-hidden','true'); d.style.display='none';}; back.addEventListener('click',close); d.querySelector('#swClose').addEventListener('click',close); d.querySelector('.panel').addEventListener('click',e=>e.stopPropagation()); d.querySelector('#swReset').addEventListener('click',()=>{ d.querySelectorAll('input[type=checkbox]').forEach(i=>i.checked=false); d.querySelectorAll('input[type=radio]').forEach(i=>i.checked=/Any/i.test(i.nextSibling?.textContent||'Any')); document.getElementById('priceMin').value=100; document.getElementById('priceMax').value=800; updatePriceLabels(); }); d.querySelector('#swApply').addEventListener('click',close); d.querySelector('#currencySelect').addEventListener('change',()=>{ localStorage.setItem('sw_cur', d.querySelector('#currencySelect').value); updatePriceLabels(); }); ['priceMin','priceMax'].forEach(id=>{ d.querySelector('#'+id).addEventListener('input',()=>{ const min=+d.querySelector('#priceMin').value; const max=+d.querySelector('#priceMax').value; if(min>max){ d.querySelector('#priceMin').value=max; } updatePriceLabels(); }); }); setCurrencyByLang(localStorage.getItem('sw_lang')||'EN'); updatePriceLabels(); d.open=()=>{d.style.display='flex'; requestAnimationFrame(()=>d.setAttribute('aria-hidden','false'));}; return d; }
  function updatePriceLabels(){ const d=document.getElementById('filterDrawer'); if(!d) return; const min=+d.querySelector('#priceMin').value||0; const max=+d.querySelector('#priceMax').value||0; const minEl=d.querySelector('#priceMinVal'); const maxEl=d.querySelector('#priceMaxVal'); if(minEl) minEl.textContent = fmtMoneyUSDToLocal(min); if(maxEl) maxEl.textContent = fmtMoneyUSDToLocal(max); }
  document.getElementById('btnFilters').addEventListener('click',()=>{ const d=ensureDrawer(); applyI18N(); d.open(); });

  /* ========================= Explore interactions ========================= */
  (function(){ const row=document.querySelector('.sw-row'); if(!row) return; const track=row.querySelector('.sw-track'); const prev=row.querySelector('.prev'); const next=row.querySelector('.next'); const step=()=>Math.min(360, track.clientWidth*0.85); prev.addEventListener('click',()=>track.scrollBy({left:-step(),behavior:'smooth'})); next.addEventListener('click',()=>track.scrollBy({left: step(),behavior:'smooth'})); let isDown=false,startX=0,scrollLeft=0; track.addEventListener('pointerdown',e=>{isDown=true;startX=e.pageX;scrollLeft=track.scrollLeft;track.setPointerCapture(e.pointerId);}); track.addEventListener('pointermove',e=>{if(!isDown)return; const dx=e.pageX-startX; track.scrollLeft=scrollLeft-dx;}); track.addEventListener('pointerup',()=>isDown=false); track.addEventListener('click',e=>{ if(e.target.classList.contains('sw-like')) e.target.classList.toggle('active'); }); const tabs=document.querySelector('.sw-tabs'); const spots=document.querySelectorAll('.sw-spot'); tabs?.addEventListener('click',(e)=>{ const btn=e.target.closest('button'); if(!btn) return; tabs.querySelectorAll('button').forEach(b=>b.classList.remove('is-active')); btn.classList.add('is-active'); const type=btn.dataset.filter; spots.forEach(s=>{ s.style.display = (!type || s.dataset.type===type)?'block':'none'; }); }); })();

  /* ========================= Chatbot ========================= */
  (function(){ let fab=document.getElementById('chatFab'); if(!fab){ fab=document.createElement('button'); fab.id='chatFab'; fab.textContent='üí¨'; document.body.appendChild(fab);} let panel=document.getElementById('botPanel'); if(!panel){ panel=document.createElement('div'); panel.id='botPanel'; panel.innerHTML=`<div class="hdr"><strong>AI Concierge</strong><button id="botClose" class="btn btn-ghost">‚úï</button></div><div id="botBody" class="body"><div class="msg ai">Hello! Ask in any language.</div></div><div class="row"><input id="botInput" placeholder="Type a message‚Ä¶"><button id="botSend">Send</button></div>`; document.body.appendChild(panel);} const open=()=>{panel.style.display='block';}; const close=()=>{panel.style.display='none';}; fab.addEventListener('click',e=>{e.stopPropagation(); open();},{capture:true}); panel.querySelector('#botClose').addEventListener('click',e=>{e.stopPropagation(); close();}); document.addEventListener('click',e=>{ if(panel.style.display!=='block')return; const r=panel.getBoundingClientRect(); const inside=e.clientX>=r.left&&e.clientX<=r.right&&e.clientY>=r.top&&e.clientY<=r.bottom; if(!inside) close(); },{capture:true}); const body=panel.querySelector('#botBody'), input=panel.querySelector('#botInput'), send=panel.querySelector('#botSend'); const msgs=[]; const add=(t,me)=>{const d=document.createElement('div'); d.className=`msg ${me?'me':'ai'}`; d.textContent=t; body.appendChild(d); body.scrollTop=body.scrollHeight;}; async function askAI(message,lang){ for(const ep of ['/api/chat','/.netlify/functions/sw-chat']){ try{ const r=await fetch(ep,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({messages:[...msgs,{role:'user',content:message}],lang})}); if(r.ok){const d=await r.json(); if(d.reply) return d.reply;} }catch(_){ } } return '(Backend not found. Check your function URL.)'; } async function sendIt(){ const v=(input.value||'').trim(); if(!v) return; input.value=''; add(v,true); msgs.push({role:'user',content:v}); add('‚Ä¶',false); const dots=body.lastChild; try{ const reply=await askAI(v,(localStorage.getItem('sw_lang')||'EN').toLowerCase()); dots.remove(); add(reply,false); msgs.push({role:'assistant',content:reply}); } catch(_){ dots.remove(); add('Assistant is unavailable.',false); } } send.addEventListener('click',sendIt); input.addEventListener('keydown',e=>{if(e.key==='Enter') sendIt();}); })();

  /* ========================= Featured listings (Firebase optional) ========================= */
  (async function(){ try{ const m=await import('/scripts/firebase.js'); const {db,collection,query,where,orderBy,limit,getDocs}=m; const grid=document.createElement('section'); grid.className='container'; grid.innerHTML='<h2 style="margin:0 0 10px">‚ú® Featured</h2><div id="recosGrid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:14px"></div>'; document.querySelector('.sw-explore').insertAdjacentElement('beforebegin',grid); const listEl=grid.querySelector('#recosGrid'); const qref=query(collection(db,'listings'),where('status','==','Active'),orderBy('createdAt','desc'),limit(6)); const snap=await getDocs(qref); const items=snap.docs.map(d=>({id:d.id,...d.data()})); listEl.innerHTML=items.map(it=>`<a href="/results.html?listing=${it.id}" style="display:block;border:1px solid var(--line);border-radius:16px;overflow:hidden;background:#0f1420"><img src="${(Array.isArray(it.photos)&&it.photos[0])||'https://images.unsplash.com/photo-1505691938895-1758d7feb511?q=80&w=1200&auto=format&fit=crop'}" style="width:100%;height:180px;object-fit:cover"><div style="padding:12px 14px"><div style="display:flex;justify-content:space-between;gap:8px"><strong style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${it.title||'Untitled stay'}</strong><span style="white-space:nowrap">${fmtMoneyUSDToLocal(Number(it.price)||0)}</span></div><div style="opacity:.75;font-size:13px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${it.address||''}</div></div></a>`).join(''); }catch(err){ /* optional; ignore if firebase absent */ } })();

  /* ========================= Init ========================= */
  (function init(){ const savedLang=localStorage.getItem('sw_lang') || (navigator.language||'en').slice(0,2).toUpperCase(); if(!localStorage.getItem('sw_lang')) localStorage.setItem('sw_lang', I18N[savedLang]?savedLang:'EN'); setCurrencyByLang(localStorage.getItem('sw_lang')); applyI18N(); renderAuth(); initMap(); })();
  </script>
</body>
</html>

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>STAYWORLD — Luxury Global Booking</title>

  <!-- 가장 확실한 방식으로 CSS 연결 -->
  <link rel="stylesheet" href="/style.css?v=2025-08-15b"/>

  <!-- 최소 폴백 스타일(외부 CSS 못 불러와도 버튼/라벨 안깨지게) -->
  <style>
    .visually-hidden{position:absolute;clip:rect(0 0 0 0);clip-path:inset(50%);width:1px;height:1px;overflow:hidden;white-space:nowrap}
  </style>
</head>
<body>
  <!-- 헤더 -->
  <header class="site-header">
    <div class="container header-inner">
      <a href="/" class="brand" aria-label="StayWorld">
        <img src="/stayworld-logo.png" class="logo" alt="StayWorld" />
        <span class="brand-text">STAYWORLD</span>
      </a>

      <nav class="main-nav" aria-label="Primary">
        <a href="/index.html" data-i18n="nav.home">Home</a>
        <a href="/membership.html" data-i18n="nav.membership">Membership</a>
        <a href="/login.html" data-i18n="nav.login">Login</a>
      </nav>

      <div class="header-right">
        <label for="lang" class="visually-hidden" id="langLabel">Language</label>
        <div class="lang-select" aria-labelledby="langLabel">
          <select id="lang">
            <option>EN</option><option>KO</option><option>JA</option><option>ZH</option>
            <option>FR</option><option>ES</option><option>DE</option><option>TR</option>
            <option>AR</option><option>PT</option>
          </select>
        </div>
        <a class="btn primary" href="/signup.html" data-i18n="nav.signup">Sign Up</a>
      </div>
    </div>
  </header>

  <!-- 히어로 + 검색바 -->
  <section class="hero">
    <div class="container">
      <h1 class="hero-title">
        <span data-i18n="hero.line1">Luxury stays.</span><br/>
        <span class="gold" data-i18n="hero.line2">Global reach.</span>
      </h1>
      <p class="tagline" data-i18n="hero.tagline">
        Cards, bank transfer & crypto (BTC · ETH · USDT).
      </p>

      <form id="search-form" class="search-bar" onsubmit="return false;">
        <input id="destination" class="i-text"
               data-i18n-placeholder="search.placeholder"
               placeholder="Paris, Tokyo, Istanbul..." />
        <input id="checkin" class="i-date" type="date" aria-label="Check-in"/>
        <input id="checkout" class="i-date" type="date" aria-label="Check-out"/>
        <button id="filterBtn" type="button" class="btn secondary" data-i18n="search.filters">Filters</button>
        <button id="searchBtn" type="button" class="btn primary" data-i18n="search.search">Search</button>
      </form>
    </div>
  </section>

  <!-- 정보 카드 3개(예시) -->
  <section class="usp container">
    <div class="card">
      <h3 data-i18n="usp.verifiedTitle">Verified stays</h3>
      <p data-i18n="usp.verifiedText">Top picks near you.</p>
    </div>
    <div class="card">
      <h3 data-i18n="usp.rewardsTitle">StayWorld+ Rewards</h3>
      <p data-i18n="usp.rewardsText">Earn points on every booking.</p>
    </div>
    <div class="card">
      <h3 data-i18n="usp.paymentsTitle">Secure payments</h3>
      <p data-i18n="usp.paymentsText">Visa, Mastercard, Amex & Crypto.</p>
    </div>
  </section>

  <!-- 필터 모달 -->
  <div id="filtersModal" class="modal" aria-hidden="true" role="dialog">
    <div class="modal-card" role="document">
      <header class="modal-head">
        <h3 data-i18n="filter.title">Filters</h3>
        <button class="icon-btn" data-close aria-label="Close">&times;</button>
      </header>
      <div class="modal-body">
        <!-- 20개+ 체크옵션 -->
        <div class="filter-grid">
          <!-- Amenities -->
          <label><input type="checkbox" value="wifi"/> Wi-Fi</label>
          <label><input type="checkbox" value="pool"/> Pool</label>
          <label><input type="checkbox" value="spa"/> Spa</label>
          <label><input type="checkbox" value="gym"/> Gym</label>
          <label><input type="checkbox" value="parking"/> Parking</label>
          <label><input type="checkbox" value="pet"/> Pet-friendly</label>
          <label><input type="checkbox" value="kitchen"/> Kitchen</label>
          <label><input type="checkbox" value="balcony"/> Balcony</label>
          <label><input type="checkbox" value="sea"/> Sea view</label>
          <label><input type="checkbox" value="city"/> City view</label>
          <!-- Property types -->
          <label><input type="checkbox" value="hotel"/> Hotel</label>
          <label><input type="checkbox" value="apartment"/> Apartment</label>
          <label><input type="checkbox" value="villa"/> Villa</label>
          <label><input type="checkbox" value="hostel"/> Hostel</label>
          <label><input type="checkbox" value="bnb"/> B&B</label>
          <!-- Payment -->
          <label><input type="checkbox" value="crypto"/> Crypto</label>
          <label><input type="checkbox" value="bank"/> Bank transfer</label>
          <label><input type="checkbox" value="card"/> Cards</label>
          <!-- Extras -->
          <label><input type="checkbox" value="breakfast"/> Breakfast</label>
          <label><input type="checkbox" value="airport"/> Airport shuttle</label>
          <label><input type="checkbox" value="accessible"/> Accessible</label>
          <label><input type="checkbox" value="24h"/> 24h check-in</label>
        </div>
      </div>
      <footer class="modal-foot">
        <button class="btn secondary" data-clear data-i18n="filter.clear">Clear</button>
        <button class="btn primary" data-apply data-i18n="filter.apply">Apply</button>
      </footer>
    </div>
  </div>

  <!-- 챗봇 플로팅 버튼 & 패널 -->
  <button id="chat-toggle" class="chat-fab" aria-controls="chat-panel" aria-expanded="false" title="AI Concierge">💬</button>

  <aside id="chat-panel" class="chat-panel" aria-hidden="true">
    <header class="chat-head">
      <h3>StayWorld AI</h3>
      <button class="icon-btn" data-close-chat aria-label="Close">&times;</button>
    </header>
    <div id="chatLog" class="chat-log" aria-live="polite"></div>
    <form id="chatForm" class="chat-input">
      <input id="chatInput" autocomplete="off" data-i18n-placeholder="chat.placeholder" placeholder="Type a message…"/>
      <button id="chatSend" class="btn primary" type="submit" data-i18n="chat.send">Send</button>
    </form>
  </aside>
  <div id="chatMask" class="mask" hidden></div>

  <!-- 앱 스크립트 (i18n + 모달 + 챗봇) -->
  <script>
    /**************  I18N (10개 언어)  **************/
    const DICT = {
      EN:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Luxury stays.",line2:"Global reach.",tagline:"Cards, bank transfer & crypto (BTC · ETH · USDT)."},
          search:{placeholder:"Paris, Tokyo, Istanbul…",filters:"Filters",search:"Search"},
          usp:{verifiedTitle:"Verified stays",verifiedText:"Top picks near you.",
               rewardsTitle:"StayWorld+ Rewards",rewardsText:"Earn points on every booking.",
               paymentsTitle:"Secure payments",paymentsText:"Visa, Mastercard, Amex & Crypto."},
          filter:{title:"Filters",clear:"Clear",apply:"Apply"},
          chat:{placeholder:"Ask about stays, dates, or payments…",send:"Send"}},
      KO:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"럭셔리 스테이.",line2:"글로벌 리치.",tagline:"카드·계좌이체·암호화폐(BTC·ETH·USDT) 지원."},
          search:{placeholder:"파리, 도쿄, 이스탄불…",filters:"필터",search:"검색"},
          usp:{verifiedTitle:"검증된 숙소",verifiedText:"내 주변 추천 숙소.",
               rewardsTitle:"StayWorld+ 리워드",rewardsText:"예약마다 포인트 적립.",
               paymentsTitle:"안전한 결제",paymentsText:"비자, 마스터카드, 아멕스 & 크립토."},
          filter:{title:"필터",clear:"초기화",apply:"적용"},
          chat:{placeholder:"숙소/날짜/결제 문의를 입력하세요…",send:"전송"}},
      JA:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"ラグジュアリー滞在。",line2:"世界に広がるアクセス。",tagline:"カード・振込・暗号資産（BTC・ETH・USDT）。"},
          search:{placeholder:"パリ、東京、イスタンブール…",filters:"フィルター",search:"検索"},
          usp:{verifiedTitle:"厳選ステイ",verifiedText:"近場のおすすめ。",
               rewardsTitle:"StayWorld+ リワード",rewardsText:"予約ごとにポイント。",
               paymentsTitle:"安全な決済",paymentsText:"Visa, Mastercard, Amex & Crypto."},
          filter:{title:"フィルター",clear:"クリア",apply:"適用"},
          chat:{placeholder:"宿・日付・支払いを質問…",send:"送信"}},
      ZH:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"奢华住宿。",line2:"全球触达。",tagline:"支持银行卡、转账和加密货币（BTC·ETH·USDT）。"},
          search:{placeholder:"巴黎、东京、伊斯坦布尔…",filters:"筛选",search:"搜索"},
          usp:{verifiedTitle:"优选住宿",verifiedText:"离你最近的精选。",
               rewardsTitle:"StayWorld+ 积分",rewardsText:"每次预订都能赚积分。",
               paymentsTitle:"安全支付",paymentsText:"Visa、万事达、Amex 与加密货币。"},
          filter:{title:"筛选",clear:"清除",apply:"应用"},
          chat:{placeholder:"询问住宿、日期或支付…",send:"发送"}},
      FR:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Séjours de luxe.",line2:"Portée mondiale.",tagline:"Carte, virement & crypto (BTC · ETH · USDT)."},
          search:{placeholder:"Paris, Tokyo, Istanbul…",filters:"Filtres",search:"Rechercher"},
          usp:{verifiedTitle:"Logements vérifiés",verifiedText:"Meilleurs choix près de vous.",
               rewardsTitle:"Récompenses StayWorld+",rewardsText:"Des points à chaque réservation.",
               paymentsTitle:"Paiements sécurisés",paymentsText:"Visa, Mastercard, Amex & Crypto."},
          filter:{title:"Filtres",clear:"Réinitialiser",apply:"Appliquer"},
          chat:{placeholder:"Demandez sur les séjours, dates ou paiements…",send:"Envoyer"}},
      ES:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Estancias de lujo.",line2:"Alcance global.",tagline:"Tarjeta, transferencia y cripto (BTC · ETH · USDT)."},
          search:{placeholder:"París, Tokio, Estambul…",filters:"Filtros",search:"Buscar"},
          usp:{verifiedTitle:"Alojamientos verificados",verifiedText:"Las mejores opciones cerca.",
               rewardsTitle:"Recompensas StayWorld+",rewardsText:"Gana puntos en cada reserva.",
               paymentsTitle:"Pagos seguros",paymentsText:"Visa, Mastercard, Amex y Cripto."},
          filter:{title:"Filtros",clear:"Limpiar",apply:"Aplicar"},
          chat:{placeholder:"Pregunta sobre estancias, fechas o pagos…",send:"Enviar"}},
      DE:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Luxuriöse Aufenthalte.",line2:"Globale Reichweite.",tagline:"Karten, Überweisung & Krypto (BTC · ETH · USDT)."},
          search:{placeholder:"Paris, Tokio, Istanbul…",filters:"Filter",search:"Suchen"},
          usp:{verifiedTitle:"Geprüfte Unterkünfte",verifiedText:"Top-Tipps in deiner Nähe.",
               rewardsTitle:"StayWorld+ Prämien",rewardsText:"Punkte bei jeder Buchung.",
               paymentsTitle:"Sichere Zahlungen",paymentsText:"Visa, Mastercard, Amex & Krypto."},
          filter:{title:"Filter",clear:"Zurücksetzen",apply:"Übernehmen"},
          chat:{placeholder:"Fragen zu Aufenthalt, Datum oder Zahlung…",send:"Senden"}},
      TR:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Lüks konaklamalar.",line2:"Küresel erişim.",tagline:"Kart, havale ve kripto (BTC · ETH · USDT)."},
          search:{placeholder:"Paris, Tokyo, İstanbul…",filters:"Filtreler",search:"Ara"},
          usp:{verifiedTitle:"Doğrulanmış konaklamalar",verifiedText:"Yakınınızdaki en iyi seçenekler.",
               rewardsTitle:"StayWorld+ Ödüller",rewardsText:"Her rezervasyonda puan kazanın.",
               paymentsTitle:"Güvenli ödemeler",paymentsText:"Visa, Mastercard, Amex & Kripto."},
          filter:{title:"Filtreler",clear:"Temizle",apply:"Uygula"},
          chat:{placeholder:"Konaklama, tarih veya ödeme sor…",send:"Gönder"}},
      AR:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"إقامات فاخرة.",line2:"انتشار عالمي.",tagline:"بطاقة، تحويل بنكي وعُملات رقمية (BTC · ETH · USDT)."},
          search:{placeholder:"باريس، طوكيو، إسطنبول…",filters:"عوامل التصفية",search:"بحث"},
          usp:{verifiedTitle:"إقامات موثوقة",verifiedText:"أفضل الخيارات بالقرب منك.",
               rewardsTitle:"مكافآت StayWorld+",rewardsText:"اكسب نقاطًا مع كل حجز.",
               paymentsTitle:"مدفوعات آمنة",paymentsText:"Visa وMastercard وAmex والعملات الرقمية."},
          filter:{title:"عوامل التصفية",clear:"مسح",apply:"تطبيق"},
          chat:{placeholder:"اسأل عن الإقامة أو التواريخ أو الدفع…",send:"إرسال"}},
      PT:{nav:{home:"Home",membership:"Membership",login:"Login",signup:"Sign Up"},
          hero:{line1:"Estadias de luxo.",line2:"Alcance global.",tagline:"Cartão, transferência e cripto (BTC · ETH · USDT)."},
          search:{placeholder:"Paris, Tóquio, Istambul…",filters:"Filtros",search:"Buscar"},
          usp:{verifiedTitle:"Estadias verificadas",verifiedText:"Melhores opções perto de você.",
               rewardsTitle:"Recompensas StayWorld+",rewardsText:"Ganhe pontos em cada reserva.",
               paymentsTitle:"Pagamentos seguros",paymentsText:"Visa, Mastercard, Amex e Cripto."},
          filter:{title:"Filtros",clear:"Limpar",apply:"Aplicar"},
          chat:{placeholder:"Pergunte sobre estadias, datas ou pagamentos…",send:"Enviar"}},
    };

    function applyI18n(lang){
      const L = DICT[lang] || DICT.EN;
      document.documentElement.lang = (lang||'EN').toLowerCase();

      // text
      document.querySelectorAll("[data-i18n]").forEach(el=>{
        const path = el.getAttribute("data-i18n").split(".");
        let cur = L; for (const k of path) cur = (cur||{})[k];
        if (typeof cur === "string") el.textContent = cur;
      });
      // placeholders
      document.querySelectorAll("[data-i18n-placeholder]").forEach(el=>{
        const path = el.getAttribute("data-i18n-placeholder").split(".");
        let cur = L; for (const k of path) cur = (cur||{})[k];
        if (typeof cur === "string") el.placeholder = cur;
      });
    }

    /**************  필터 모달  **************/
    const modal = document.getElementById("filtersModal");
    const filterBtn = document.getElementById("filterBtn");
    filterBtn.addEventListener("click", (e)=>{ e.stopPropagation(); openModal();});
    modal.addEventListener("click", ()=> closeModal());
    modal.querySelector(".modal-card").addEventListener("click", (e)=> e.stopPropagation());
    modal.querySelector("[data-close]").addEventListener("click", closeModal);
    modal.querySelector("[data-clear]").addEventListener("click", ()=>{
      modal.querySelectorAll("input[type=checkbox]").forEach(c=> c.checked=false);
    });
    modal.querySelector("[data-apply]").addEventListener("click", ()=>{
      const selected = [...modal.querySelectorAll("input[type=checkbox]:checked")].map(x=>x.value);
      console.log("APPLIED FILTERS:", selected);
      closeModal();
    });
    function openModal(){ modal.setAttribute("aria-hidden","false"); document.body.classList.add("no-scroll"); }
    function closeModal(){ modal.setAttribute("aria-hidden","true"); document.body.classList.remove("no-scroll"); }

    /**************  챗봇  **************/
    const chatToggle = document.getElementById("chat-toggle");
    const chatPanel  = document.getElementById("chat-panel");
    const chatMask   = document.getElementById("chatMask");
    const chatLog    = document.getElementById("chatLog");
    const chatForm   = document.getElementById("chatForm");
    const chatInput  = document.getElementById("chatInput");
    const chatSend   = document.getElementById("chatSend");

    function openChat(){
      chatPanel.setAttribute("aria-hidden","false");
      chatMask.hidden = false;
      chatToggle.setAttribute("aria-expanded","true");
      chatInput.focus();
    }
    function closeChat(){
      chatPanel.setAttribute("aria-hidden","true");
      chatMask.hidden = true;
      chatToggle.setAttribute("aria-expanded","false");
    }

    chatToggle.addEventListener("click",(e)=>{ e.stopPropagation(); openChat(); });
    chatMask.addEventListener("click", closeChat);
    chatPanel.querySelector("[data-close-chat]").addEventListener("click", closeChat);
    chatPanel.addEventListener("click",(e)=> e.stopPropagation());

    function addMsg(role, text){
      const row = document.createElement("div");
      row.className = "msg " + role;
      row.textContent = text;
      chatLog.appendChild(row);
      chatLog.scrollTop = chatLog.scrollHeight;
    }

    chatForm.addEventListener("submit", async (e)=>{
      e.preventDefault();
      const content = chatInput.value.trim();
      if (!content) return;
      const lang = document.getElementById("lang").value || "EN";
      addMsg("user", content);
      chatInput.value = "";
      chatSend.disabled = true;

      try{
        const res = await fetch("/.netlify/functions/chat",{
          method:"POST",
          headers:{"Content-Type":"application/json"},
          body: JSON.stringify({message: content, lang})
        });
        if(!res.ok){
          const t = await res.text();
          console.error("Chat error:", t);
          addMsg("bot", "Sorry, the assistant is temporarily unavailable.");
        }else{
          const data = await res.json();
          addMsg("bot", data.reply || "…");
        }
      }catch(err){
        console.error(err);
        addMsg("bot", "Network error. Please try again.");
      }finally{
        chatSend.disabled = false;
      }
    });

    /**************  초기 설정  **************/
    const langSel = document.getElementById("lang");
    langSel.addEventListener("change",()=> applyI18n(langSel.value));
    applyI18n(langSel.value);
  </script>
</body>
</html>
